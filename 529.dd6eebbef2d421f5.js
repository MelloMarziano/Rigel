"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[529],{8529:(U,F,l)=>{l.r(F),l.d(F,{ProductosPageModule:()=>z});var m=l(177),a=l(9417),h=l(8498),b=l(467),c=l(2418),C=l(8032),u=l.n(C),P=l(8359),j=l(4572),p=l(7673),g=l(9172),v=l(152),R=l(5558),o=l(7705);function I(r,d){if(1&r&&(o.j41(0,"option",67),o.EFF(1),o.k0s()),2&r){const e=d.$implicit;o.Y8G("value",e.id),o.R7$(1),o.JRh(e.nombre)}}function $(r,d){if(1&r&&(o.j41(0,"option",67),o.EFF(1),o.k0s()),2&r){const e=d.$implicit;o.Y8G("value",e.id),o.R7$(1),o.JRh(e.nombre)}}function y(r,d){1&r&&(o.j41(0,"div",68)(1,"p",56),o.EFF(2,"No se encontraron productos con los filtros seleccionados."),o.k0s()())}function D(r,d){if(1&r&&(o.j41(0,"span",83),o.EFF(1),o.k0s()),2&r){const e=o.XpG().$implicit,i=o.XpG();o.R7$(1),o.SpI(" ",i.getFamiliaName(e.categoriaId,e.familiaId)," ")}}function S(r,d){if(1&r){const e=o.RV6();o.j41(0,"div",69)(1,"div",70),o.bIt("click",function(){const s=o.eBV(e).$implicit,n=o.XpG();return o.Njj(n.verDetalleProducto(s))}),o.j41(2,"div",71)(3,"div",39)(4,"div",72)(5,"h6",73),o.EFF(6),o.k0s(),o.j41(7,"p",74),o.EFF(8),o.k0s(),o.j41(9,"div",75)(10,"span",76),o.EFF(11),o.k0s(),o.DNE(12,D,2,1,"span",77),o.k0s()()(),o.j41(13,"div",78)(14,"div",79)(15,"div",80),o.EFF(16,"Costo"),o.k0s(),o.j41(17,"div",81),o.EFF(18),o.nI1(19,"currency"),o.k0s()(),o.j41(20,"div",79)(21,"div",80),o.EFF(22,"Stock Actual"),o.k0s(),o.j41(23,"div",82),o.EFF(24),o.k0s()()()()()()}if(2&r){const e=d.$implicit,i=o.XpG();o.R7$(6),o.JRh(e.nombre),o.R7$(2),o.JRh(e.descripcion),o.R7$(2),o.Y8G("ngClass",i.getCategoryBadgeClass(e.categoriaId)),o.R7$(1),o.SpI(" ",i.getCategoryName(e.categoriaId)," "),o.R7$(1),o.Y8G("ngIf",e.familiaId),o.R7$(6),o.SpI(" ",o.ii3(19,7,e.costo,"EUR","symbol","1.2-2")," "),o.R7$(6),o.SpI(" ",e.stock," ")}}function G(r,d){if(1&r&&(o.j41(0,"div",63)(1,"label",84),o.EFF(2,"Stock Actual"),o.k0s(),o.nrm(3,"input",85),o.k0s()),2&r){const e=o.XpG(2);o.R7$(3),o.Y8G("value",e.productoSeleccionado.stock)}}function N(r,d){if(1&r&&(o.j41(0,"div",63)(1,"label",84),o.EFF(2,"Stock M\xednimo"),o.k0s(),o.nrm(3,"input",85),o.k0s()),2&r){const e=o.XpG(2);o.R7$(3),o.Y8G("value",e.productoSeleccionado.stockMinimo)}}function M(r,d){if(1&r&&(o.j41(0,"div",38)(1,"div",39)(2,"label",84),o.EFF(3,"Nombre del Producto"),o.k0s(),o.nrm(4,"input",85),o.k0s(),o.j41(5,"div",39)(6,"label",84),o.EFF(7,"Descripci\xf3n"),o.k0s(),o.nrm(8,"textarea",86),o.k0s(),o.j41(9,"div",1)(10,"div",45)(11,"label",84),o.EFF(12,"Costo"),o.k0s(),o.nrm(13,"input",85),o.nI1(14,"currency"),o.k0s(),o.j41(15,"div",45)(16,"label",84),o.EFF(17,"IVA (%)"),o.k0s(),o.nrm(18,"input",85),o.k0s()(),o.j41(19,"div",39)(20,"label",84),o.EFF(21,"Categor\xeda"),o.k0s(),o.nrm(22,"input",85),o.k0s(),o.j41(23,"div",39)(24,"label",84),o.EFF(25,"Familia"),o.k0s(),o.nrm(26,"input",85),o.k0s(),o.j41(27,"div",39)(28,"label",84),o.EFF(29,"Proveedor"),o.k0s(),o.nrm(30,"input",85),o.k0s(),o.j41(31,"div",39)(32,"div",87),o.nrm(33,"input",88),o.j41(34,"label",89),o.EFF(35," Es Receta/Combinado (sin control de stock) "),o.k0s()()(),o.j41(36,"div",1),o.DNE(37,G,4,1,"div",62),o.DNE(38,N,4,1,"div",62),o.j41(39,"div",63)(40,"label",84),o.EFF(41,"Cantidad"),o.k0s(),o.nrm(42,"input",85),o.k0s(),o.j41(43,"div",63)(44,"label",84),o.EFF(45,"Unidad de Medida"),o.k0s(),o.nrm(46,"input",85),o.k0s()()()),2&r){const e=o.XpG();o.R7$(4),o.Y8G("value",e.productoSeleccionado.nombre),o.R7$(4),o.Y8G("value",e.productoSeleccionado.descripcion),o.R7$(5),o.Y8G("value",o.ii3(14,12,e.productoSeleccionado.costo,"EUR","symbol","1.2-2")),o.R7$(5),o.Y8G("value",e.productoSeleccionado.IVA+"%"),o.R7$(4),o.Y8G("value",e.getCategoryName(e.productoSeleccionado.categoriaId)),o.R7$(4),o.Y8G("value",e.getFamiliaName(e.productoSeleccionado.categoriaId,e.productoSeleccionado.familiaId)),o.R7$(4),o.Y8G("value",e.getProveedorName(e.productoSeleccionado.proveedorId)),o.R7$(3),o.Y8G("checked",e.productoSeleccionado.esCombinado),o.R7$(4),o.Y8G("ngIf",!e.productoSeleccionado.esCombinado),o.R7$(1),o.Y8G("ngIf",!e.productoSeleccionado.esCombinado),o.R7$(4),o.Y8G("value",e.productoSeleccionado.cantidad),o.R7$(4),o.Y8G("value",e.productoSeleccionado.unidadMedida)}}function Y(r,d){1&r&&(o.j41(0,"div",90),o.EFF(1," Este nombre de producto ya existe. "),o.k0s())}function _(r,d){if(1&r&&(o.j41(0,"option",67),o.EFF(1),o.k0s()),2&r){const e=d.$implicit;o.Y8G("value",e.id),o.R7$(1),o.JRh(e.nombre)}}function x(r,d){if(1&r&&(o.j41(0,"option",67),o.EFF(1),o.k0s()),2&r){const e=d.$implicit;o.Y8G("value",e.id),o.R7$(1),o.JRh(e.nombre)}}function V(r,d){1&r&&(o.j41(0,"small",56),o.EFF(1," Las familias se cargar\xe1n al seleccionar una categor\xeda "),o.k0s())}function T(r,d){if(1&r&&(o.j41(0,"option",67),o.EFF(1),o.k0s()),2&r){const e=d.$implicit;o.Y8G("value",e.id),o.R7$(1),o.JRh(e.nombre)}}function w(r,d){1&r&&(o.j41(0,"div",63)(1,"label",40),o.EFF(2,"Stock Actual"),o.k0s(),o.nrm(3,"input",91),o.k0s())}function A(r,d){1&r&&(o.j41(0,"div",63)(1,"label",40),o.EFF(2,"Stock M\xednimo"),o.k0s(),o.nrm(3,"input",92),o.k0s())}function B(r,d){if(1&r&&(o.j41(0,"option",67),o.EFF(1),o.k0s()),2&r){const e=d.$implicit;o.Y8G("value",e),o.R7$(1),o.JRh(e)}}const J=[{path:"",component:(()=>{class r{constructor(e,i){this.fb=e,this.firestore=i,this.productos=[],this.filteredProducts=[],this.categorias=[],this.proveedores=[],this.unidadesDisponibles=[],this.familiasDisponibles=[],this.totalProveedores=0,this.totalStockValue=0,this.productosBajosEnStock=0,this.subscriptions=new P.yU,this.productSearch=new a.MJ(""),this.categoryFilter=new a.MJ("all"),this.supplierFilter=new a.MJ("all"),this.productoSeleccionado=null}ngOnInit(){this.productoForm=this.fb.group({id:[""],nombre:["",{validators:[a.k0.required],asyncValidators:[this.productNameValidator()],updateOn:"blur"}],descripcion:["",a.k0.required],costo:[0,[a.k0.required,a.k0.min(0)]],IVA:[0,[a.k0.required,a.k0.min(0)]],categoriaId:["",a.k0.required],familiaId:["",a.k0.required],proveedorId:[null],esCombinado:[!1],stock:[0,a.k0.min(0)],stockMinimo:[0,a.k0.min(0)],cantidad:[0,[a.k0.required,a.k0.min(0)]],unidadMedida:["",a.k0.required]}),this.cargarProductos(),this.cargarCategorias(),this.cargarProveedores();const e=document.getElementById("productModal");e&&(this.modal=new bootstrap.Modal(e));const i=document.getElementById("detalleModal");i&&(this.detalleModal=new bootstrap.Modal(i)),this.subscriptions.add(this.productoForm.get("categoriaId")?.valueChanges.subscribe(t=>{this.onCategoriaChange(t)})),this.subscriptions.add(this.productoForm.get("esCombinado")?.valueChanges.subscribe(t=>{this.onEsCombinadoChange(t)})),this.subscriptions.add((0,j.z)([this.productSearch.valueChanges.pipe((0,g.Z)("")),this.categoryFilter.valueChanges.pipe((0,g.Z)("all")),this.supplierFilter.valueChanges.pipe((0,g.Z)("all"))]).pipe((0,v.B)(300)).subscribe(([t,s,n])=>{this.filterProducts(t||"",s||"all",n||"all")}))}ngOnDestroy(){this.subscriptions.unsubscribe()}productNameValidator(){return e=>(0,p.of)(e.value).pipe((0,v.B)(500),(0,R.n)(i=>{if(!i||!i.trim())return(0,p.of)(null);const t=i.trim().toLowerCase(),s=this.productoForm?.get("id")?.value;return this.productos&&0!==this.productos.length&&this.productos.some(f=>f.nombre.toLowerCase()===t&&f.id!==s)?(0,p.of)({productNameExists:!0}):(0,p.of)(null)}))}cargarProductos(){const e=(0,c.rJ)(this.firestore,"productos");this.subscriptions.add((0,c.xs)(e,{idField:"id"}).subscribe(i=>{this.productos=i,this.filteredProducts=i,this.totalStockValue=i.reduce((t,s)=>t+(s.stock||0)*s.costo,0),this.productosBajosEnStock=i.filter(t=>!t.esCombinado&&(t.stock||0)<=(t.stockMinimo||0)).length}))}cargarCategorias(){const e=(0,c.rJ)(this.firestore,"categorias");this.subscriptions.add((0,c.xs)(e,{idField:"id"}).subscribe(i=>{this.categorias=i}))}cargarProveedores(){const e=(0,c.rJ)(this.firestore,"proveedores");this.subscriptions.add((0,c.xs)(e,{idField:"id"}).subscribe(i=>{this.proveedores=i,this.totalProveedores=i.length}))}filterProducts(e,i,t){let s=[...this.productos];e&&(s=s.filter(n=>n.nombre.toLowerCase().includes(e.toLowerCase()))),i&&"all"!==i&&(s=s.filter(n=>n.categoriaId===i)),t&&"all"!==t&&(s=s.filter(n=>n.proveedorId===t)),this.filteredProducts=s}onCategoriaChange(e){const i=this.categorias.find(t=>t.id===e);this.unidadesDisponibles=i?.unidadesDisponibles||[],this.unidadesDisponibles.length>0?this.productoForm.get("unidadMedida")?.setValue(this.unidadesDisponibles[0]):this.productoForm.get("unidadMedida")?.setValue(""),this.familiasDisponibles=i?.familias||[],this.productoForm.get("familiaId")?.setValue("")}onEsCombinadoChange(e){const i=this.productoForm.get("stock"),t=this.productoForm.get("stockMinimo");e?(i?.setValue(null),i?.disable(),t?.setValue(null),t?.disable()):(i?.enable(),t?.enable())}guardarProducto(){var e=this;return(0,b.A)(function*(){if(e.productoForm.invalid)return void u().fire("Error","Por favor, complete todos los campos requeridos.","error");const i=e.productoForm.getRawValue();u().showLoading();try{if(i.id){const t=(0,c.H9)(e.firestore,"productos",i.id);yield(0,c.mZ)(t,i),u().fire("\xa1Actualizado!","El producto ha sido actualizado.","success")}else i.fechaCreacion=(0,c.O5)(),delete i.id,yield(0,c.gS)((0,c.rJ)(e.firestore,"productos"),i),u().fire("\xa1Creado!","El nuevo producto ha sido guardado.","success");e.modal.hide(),e.resetForm()}catch(t){console.error("Error al guardar el producto:",t),u().fire("Error","Hubo un problema al guardar el producto.","error")}})()}editarProducto(e){this.productoForm.contains("id")||this.productoForm.addControl("id",this.fb.control(""));const i=this.categorias.find(t=>t.id===e.categoriaId);this.unidadesDisponibles=i?.unidadesDisponibles||[],this.familiasDisponibles=i?.familias||[],this.productoForm.patchValue({id:e.id,nombre:e.nombre,descripcion:e.descripcion,costo:e.costo,IVA:e.IVA,categoriaId:e.categoriaId,familiaId:e.familiaId,proveedorId:e.proveedorId,esCombinado:e.esCombinado,stock:e.stock,stockMinimo:e.stockMinimo,cantidad:e.cantidad,unidadMedida:e.unidadMedida}),this.modal.show()}eliminarProducto(e){var i=this;return(0,b.A)(function*(){if((yield u().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{yield(0,c.kd)((0,c.H9)(i.firestore,"productos",e)),u().fire("\xa1Eliminado!","El producto ha sido eliminado.","success")}catch(s){console.error("Error al eliminar el producto:",s),u().fire("Error","No se pudo eliminar el producto.","error")}})()}abrirModalNuevo(){this.resetForm(),this.modal.show()}resetForm(){this.productoForm.reset({id:"",nombre:"",descripcion:"",costo:0,IVA:0,categoriaId:"",familiaId:"",proveedorId:null,esCombinado:!1,stock:0,stockMinimo:0,cantidad:0,unidadMedida:""}),this.familiasDisponibles=[],this.unidadesDisponibles=[]}getCategoryName(e){const i=this.categorias.find(t=>t.id===e);return i?i.nombre:""}getFamiliaName(e,i){if(!i)return"";const t=this.categorias.find(n=>n.id===e);if(!t||!t.familias)return"";const s=t.familias.find(n=>n.id===i);return s?s.nombre:""}getCategoryBadgeClass(e){const i=this.categorias.find(n=>n.id===e);if(!i)return"bg-secondary";const t=["bg-primary","bg-success","bg-info","bg-warning","bg-danger"];return t[i.nombre.length%t.length]}getPrecioVenta(e){return e.costo*(1+(e.IVA||0)/100)}getStockClass(e){if(e.esCombinado)return"text-muted";const i=e.stock||0;return i<=0?"text-danger":i<=(e.stockMinimo||0)?"text-warning":"text-success"}getUnidadDisplay(e){return e.cantidad&&e.unidadMedida?`${e.unidadMedida}`:"unidades"}getMargenPorcentaje(e){const i=this.getPrecioVenta(e),t=e.costo;return 0===t?"0.0":((i-t)/t*100).toFixed(1)}verDetalleProducto(e){this.productoSeleccionado=e,this.detalleModal.show()}editarDesdeDetalle(){this.productoSeleccionado&&(this.detalleModal.hide(),this.editarProducto(this.productoSeleccionado))}eliminarDesdeDetalle(){var e=this;return(0,b.A)(function*(){e.productoSeleccionado&&(e.detalleModal.hide(),yield e.eliminarProducto(e.productoSeleccionado.id),e.productoSeleccionado=null)})()}getProveedorName(e){if(!e)return"Sin proveedor";const i=this.proveedores.find(t=>t.id===e);return i?i.nombre:"Sin proveedor"}static{this.\u0275fac=function(i){return new(i||r)(o.rXU(a.ok),o.rXU(c._7))}}static{this.\u0275cmp=o.VBU({type:r,selectors:[["app-productos-page"]],decls:154,vars:25,consts:[[1,"container-fluid"],[1,"row"],[1,"col-8"],[1,"col","text-end"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-plus-lg","me-2"],[1,"row","mt-3"],[1,"col"],[1,"card"],[1,"card-body"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-sm-4","mt-2"],["type","text","placeholder","Buscar productos...",1,"form-control",3,"formControl"],[1,"col-12","col-sm-3","mt-2"],[1,"form-select",3,"formControl"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-sm-2","mt-2"],[1,"bi","bi-box","text-primary"],[1,"bi","bi-exclamation-circle","text-danger"],[1,"row","mt-4"],["class","col-12 text-center",4,"ngIf"],["class","col-12 col-sm-3 mb-4",4,"ngFor","ngForOf"],["id","detalleModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil-fill","me-2"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill","me-2"],["id","productModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","nombre","placeholder","Ej: Coca-Cola",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["formControlName","descripcion","placeholder","Descripci\xf3n del producto",1,"form-control"],[1,"col-md-6","mb-3"],["type","number","formControlName","costo","placeholder","0.00",1,"form-control"],["formControlName","IVA",1,"form-control"],["selected","","disabled",""],["value","4"],["value","10"],["value","21"],["formControlName","categoriaId",1,"form-select"],["value","","disabled",""],["formControlName","familiaId",1,"form-select",3,"disabled"],["class","text-muted",4,"ngIf"],[1,"text-muted"],["formControlName","proveedorId",1,"form-select"],[3,"ngValue"],[1,"form-check","mb-3"],["type","checkbox","formControlName","esCombinado","id","esCombinadoCheck",1,"form-check-input"],["for","esCombinadoCheck",1,"form-check-label"],["class","col-md-4 mb-3",4,"ngIf"],[1,"col-md-4","mb-3"],["type","number","formControlName","cantidad","placeholder","0",1,"form-control"],["formControlName","unidadMedida",1,"form-select"],["type","submit",1,"btn","btn-danger",3,"disabled"],[3,"value"],[1,"col-12","text-center"],[1,"col-12","col-sm-3","mb-4"],[1,"card","shadow-sm","border-0","h-100",2,"cursor","pointer",3,"click"],[1,"card-body","p-3"],[1,"flex-grow-1"],[1,"mb-1","fw-bold","text-dark"],[1,"text-muted","small","mb-2"],[1,"d-flex","flex-wrap","gap-1"],[1,"badge","rounded-pill",2,"font-size","0.75rem",3,"ngClass"],["class","badge rounded-pill bg-secondary","style","font-size: 0.7rem;",4,"ngIf"],[1,"row","mb-3"],[1,"col-6"],[1,"text-muted","small"],[1,"fw-bold","text-danger",2,"font-size","1.1rem"],[1,"fw-bold"],[1,"badge","rounded-pill","bg-secondary",2,"font-size","0.7rem"],[1,"form-label","fw-bold"],["type","text","disabled","",1,"form-control",3,"value"],["disabled","","rows","2",1,"form-control",3,"value"],[1,"form-check"],["type","checkbox","disabled","",1,"form-check-input",3,"checked"],[1,"form-check-label","fw-bold"],[1,"text-danger","mt-1"],["type","number","formControlName","stock","placeholder","0",1,"form-control"],["type","number","formControlName","stockMinimo","placeholder","0",1,"form-control"]],template:function(i,t){if(1&i&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),o.EFF(4,"Gesti\xf3n de Productos"),o.k0s(),o.j41(5,"span"),o.EFF(6,"Crea, edita y organiza todos tus productos."),o.k0s()(),o.j41(7,"div",3)(8,"button",4),o.bIt("click",function(){return t.abrirModalNuevo()}),o.nrm(9,"i",5),o.EFF(10," Nuevo Producto "),o.k0s()()(),o.j41(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11),o.nrm(17,"input",12),o.k0s(),o.j41(18,"div",13)(19,"select",14)(20,"option",15),o.EFF(21,"Todas las categor\xedas"),o.k0s(),o.DNE(22,I,2,2,"option",16),o.k0s()(),o.j41(23,"div",13)(24,"select",14)(25,"option",15),o.EFF(26,"Todos los proveedores"),o.k0s(),o.DNE(27,$,2,2,"option",16),o.k0s()(),o.j41(28,"div",17)(29,"span"),o.nrm(30,"i",18),o.EFF(31),o.k0s(),o.EFF(32,"\xa0\xa0 "),o.j41(33,"span"),o.nrm(34,"i",19),o.EFF(35),o.k0s()()()()()()(),o.j41(36,"div",20),o.DNE(37,y,3,0,"div",21),o.DNE(38,S,25,12,"div",22),o.k0s()(),o.j41(39,"div",23)(40,"div",24)(41,"div",25)(42,"div",26)(43,"h5",27),o.EFF(44,"Detalle del Producto"),o.k0s(),o.nrm(45,"button",28),o.k0s(),o.DNE(46,M,47,17,"div",29),o.j41(47,"div",30)(48,"button",31),o.EFF(49,"Cerrar"),o.k0s(),o.j41(50,"button",32),o.bIt("click",function(){return t.editarDesdeDetalle()}),o.nrm(51,"i",33),o.EFF(52,"Editar "),o.k0s(),o.j41(53,"button",34),o.bIt("click",function(){return t.eliminarDesdeDetalle()}),o.nrm(54,"i",35),o.EFF(55,"Eliminar "),o.k0s()()()()(),o.j41(56,"div",36)(57,"div",24)(58,"div",25)(59,"form",37),o.bIt("ngSubmit",function(){return t.guardarProducto()}),o.j41(60,"div",26)(61,"h5",27),o.EFF(62),o.k0s(),o.nrm(63,"button",28),o.k0s(),o.j41(64,"div",38)(65,"div",39)(66,"label",40),o.EFF(67,"Nombre del Producto "),o.j41(68,"span",41),o.EFF(69,"*"),o.k0s()(),o.nrm(70,"input",42),o.DNE(71,Y,2,0,"div",43),o.k0s(),o.j41(72,"div",39)(73,"label",40),o.EFF(74,"Descripci\xf3n "),o.j41(75,"span",41),o.EFF(76,"*"),o.k0s()(),o.nrm(77,"textarea",44),o.k0s(),o.j41(78,"div",1)(79,"div",45)(80,"label",40),o.EFF(81,"Costo "),o.j41(82,"span",41),o.EFF(83,"*"),o.k0s()(),o.nrm(84,"input",46),o.k0s(),o.j41(85,"div",45)(86,"label",40),o.EFF(87,"IVA(%) "),o.j41(88,"span",41),o.EFF(89,"*"),o.k0s()(),o.j41(90,"select",47)(91,"option",48),o.EFF(92,"Selecciona un IVA"),o.k0s(),o.j41(93,"option",49),o.EFF(94,"4%"),o.k0s(),o.j41(95,"option",50),o.EFF(96,"10%"),o.k0s(),o.j41(97,"option",51),o.EFF(98,"21%"),o.k0s()()()(),o.j41(99,"div",39)(100,"label",40),o.EFF(101,"Categor\xeda "),o.j41(102,"span",41),o.EFF(103,"*"),o.k0s()(),o.j41(104,"select",52)(105,"option",53),o.EFF(106,"Selecciona una categor\xeda"),o.k0s(),o.DNE(107,_,2,2,"option",16),o.k0s()(),o.j41(108,"div",39)(109,"label",40),o.EFF(110,"Familia "),o.j41(111,"span",41),o.EFF(112,"*"),o.k0s()(),o.j41(113,"select",54)(114,"option",53),o.EFF(115),o.k0s(),o.DNE(116,x,2,2,"option",16),o.k0s(),o.DNE(117,V,2,0,"small",55),o.k0s(),o.j41(118,"div",39)(119,"label",40),o.EFF(120,"Proveedor "),o.j41(121,"small",56),o.EFF(122,"(Opcional)"),o.k0s()(),o.j41(123,"select",57)(124,"option",58),o.EFF(125,"Ninguno"),o.k0s(),o.DNE(126,T,2,2,"option",16),o.k0s()(),o.j41(127,"div",59),o.nrm(128,"input",60),o.j41(129,"label",61),o.EFF(130," Es Receta/Combinado (sin control de stock) "),o.k0s()(),o.j41(131,"div",1),o.DNE(132,w,4,0,"div",62),o.DNE(133,A,4,0,"div",62),o.j41(134,"div",63)(135,"label",40),o.EFF(136,"Cantidad "),o.j41(137,"span",41),o.EFF(138,"*"),o.k0s()(),o.nrm(139,"input",64),o.k0s(),o.j41(140,"div",63)(141,"label",40),o.EFF(142,"Unidad de Medida "),o.j41(143,"span",41),o.EFF(144,"*"),o.k0s()(),o.j41(145,"select",65)(146,"option",53),o.EFF(147,"Selecciona una unidad"),o.k0s(),o.DNE(148,B,2,2,"option",16),o.k0s()()()(),o.j41(149,"div",30)(150,"button",31),o.EFF(151,"Cancelar"),o.k0s(),o.j41(152,"button",66),o.EFF(153),o.k0s()()()()()()),2&i){let s,n,f,k,E;o.R7$(17),o.Y8G("formControl",t.productSearch),o.R7$(2),o.Y8G("formControl",t.categoryFilter),o.R7$(3),o.Y8G("ngForOf",t.categorias),o.R7$(2),o.Y8G("formControl",t.supplierFilter),o.R7$(3),o.Y8G("ngForOf",t.proveedores),o.R7$(4),o.SpI("\xa0",t.filteredProducts.length,"\xa0Productos"),o.R7$(4),o.SpI("\xa0",t.productosBajosEnStock,"\xa0Stock"),o.R7$(2),o.Y8G("ngIf",0===t.filteredProducts.length),o.R7$(1),o.Y8G("ngForOf",t.filteredProducts),o.R7$(8),o.Y8G("ngIf",t.productoSeleccionado),o.R7$(13),o.Y8G("formGroup",t.productoForm),o.R7$(3),o.JRh(null!=(s=t.productoForm.get("id"))&&s.value?"Editar Producto":"Nuevo Producto"),o.R7$(9),o.Y8G("ngIf",null==(n=t.productoForm.get("nombre"))?null:n.hasError("productNameExists")),o.R7$(36),o.Y8G("ngForOf",t.categorias),o.R7$(6),o.Y8G("disabled",0===t.familiasDisponibles.length),o.R7$(2),o.SpI(" ",0===t.familiasDisponibles.length?"Primero selecciona una categor\xeda":"Selecciona una familia"," "),o.R7$(1),o.Y8G("ngForOf",t.familiasDisponibles),o.R7$(1),o.Y8G("ngIf",0===t.familiasDisponibles.length),o.R7$(7),o.Y8G("ngValue",null),o.R7$(2),o.Y8G("ngForOf",t.proveedores),o.R7$(6),o.Y8G("ngIf",!(null!=(f=t.productoForm.get("esCombinado"))&&f.value)),o.R7$(1),o.Y8G("ngIf",!(null!=(k=t.productoForm.get("esCombinado"))&&k.value)),o.R7$(15),o.Y8G("ngForOf",t.unidadesDisponibles),o.R7$(4),o.Y8G("disabled",t.productoForm.invalid),o.R7$(1),o.JRh(null!=(E=t.productoForm.get("id"))&&E.value?"Actualizar":"Crear")}},dependencies:[m.YU,m.Sq,m.bT,a.qT,a.xH,a.y7,a.me,a.Q0,a.Zm,a.wz,a.BC,a.cb,a.l_,a.j4,a.JD,m.oe]})}}return r})()}];let O=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=o.$C({type:r})}static{this.\u0275inj=o.G2t({imports:[h.iI.forChild(J),h.iI]})}}return r})(),z=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=o.$C({type:r})}static{this.\u0275inj=o.G2t({imports:[m.MD,a.YN,a.X1,O]})}}return r})()}}]);