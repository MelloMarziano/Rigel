"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[76],{6239:(d,m,s)=>{s.d(m,{d:()=>u});var o=s(467),t=s(9173),n=s(6354),l=s(7705);let u=(()=>{class i{constructor(e){this.firestore=e}getMermas(){const e=(0,t.collection)(this.firestore,"mermas");return(0,t.collectionData)(e,{idField:"id"})}getMermasActivas(){return this.getMermas().pipe((0,n.T)(e=>e.filter(r=>r.activo)))}getMermaPorProducto(e){return this.getMermasActivas().pipe((0,n.T)(r=>r.find(a=>a.productoId===e)))}crearMerma(e){var r=this;return(0,o.A)(function*(){const a=(0,t.collection)(r.firestore,"mermas"),c={...e,fechaCreacion:(0,t.serverTimestamp)(),fechaActualizacion:new Date};yield(0,t.addDoc)(a,c)})()}actualizarMerma(e,r){var a=this;return(0,o.A)(function*(){const c=(0,t.doc)(a.firestore,"mermas",e),_={...r,fechaActualizacion:new Date};yield(0,t.updateDoc)(c,_)})()}eliminarMerma(e){var r=this;return(0,o.A)(function*(){const a=(0,t.doc)(r.firestore,"mermas",e);yield(0,t.deleteDoc)(a)})()}calcularCantidadUtil(e,r){return e-e*r/100}calcularPerdida(e,r){return e*r/100}calcularCantidadNecesaria(e,r){return e/(1-r/100)}static{this.\u0275fac=function(r){return new(r||i)(l.KVO(t.Firestore))}}static{this.\u0275prov=l.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);