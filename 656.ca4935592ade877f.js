"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[656],{9656:(B,b,n)=>{n.r(b),n.d(b,{ProveedoresPageModule:()=>Y});var h=n(7412),d=n(9417),p=n(177),f=n(5743),u=n(467),c=n(9173),g=n(8032),m=n.n(g),k=n(8359),E=n(4572),F=n(9172),j=n(152),o=n(7705);function P(i,a){if(1&i&&(o.j41(0,"option",80),o.EFF(1),o.k0s()),2&i){const e=a.$implicit;o.Y8G("value",e.id),o.R7$(1),o.JRh(e.nombre)}}function y(i,a){1&i&&(o.j41(0,"div",81)(1,"p",10),o.EFF(2,"No se encontraron proveedores con los filtros seleccionados."),o.k0s()())}function S(i,a){if(1&i&&(o.j41(0,"span",104),o.EFF(1),o.k0s()),2&i){const e=a.$implicit,r=o.XpG(2);o.R7$(1),o.SpI(" ",r.getProductName(e)," ")}}const R=function(i,a){return{"bg-info bg-opacity-10":i,"bg-warning bg-opacity-10":a}};function x(i,a){if(1&i&&(o.j41(0,"div",105)(1,"small",106),o.EFF(2),o.k0s()()),2&i){const e=o.XpG().$implicit;o.Y8G("ngClass",o.l_i(2,R,"SEPA"===e.metodoPago,"TRANSFERENCIA"===e.metodoPago)),o.R7$(2),o.SpI("M\xe9todo de Pago: ",e.metodoPago,"")}}function C(i,a){if(1&i){const e=o.RV6();o.j41(0,"div",82)(1,"div",83),o.bIt("click",function(){const s=o.eBV(e).$implicit,l=o.XpG();return o.Njj(l.verDetalleProveedor(s))}),o.j41(2,"div",84)(3,"div",85)(4,"div",26)(5,"div",86),o.nrm(6,"i",87),o.k0s(),o.j41(7,"div")(8,"h6",88),o.EFF(9),o.k0s(),o.j41(10,"small",10),o.EFF(11),o.k0s()()()(),o.j41(12,"div",89)(13,"div",90),o.nrm(14,"i",91),o.j41(15,"span"),o.EFF(16),o.k0s()(),o.j41(17,"div",90),o.nrm(18,"i",92),o.j41(19,"span"),o.EFF(20),o.k0s()(),o.j41(21,"div",90),o.nrm(22,"i",93),o.j41(23,"span"),o.EFF(24),o.k0s()(),o.j41(25,"div",26),o.nrm(26,"i",94),o.j41(27,"span"),o.EFF(28),o.k0s()()(),o.j41(29,"div",95)(30,"div",96)(31,"div",26),o.nrm(32,"i",97),o.j41(33,"div")(34,"small",98),o.EFF(35,"Pago: "),o.j41(36,"span"),o.EFF(37),o.k0s()()()()(),o.j41(38,"div",96)(39,"div",26),o.nrm(40,"i",99),o.j41(41,"div")(42,"small",98),o.EFF(43,"Productos:"),o.k0s(),o.j41(44,"div",100),o.DNE(45,S,2,1,"span",101),o.k0s()()()()(),o.j41(46,"div",102)(47,"small"),o.EFF(48),o.k0s()(),o.DNE(49,x,3,5,"div",103),o.k0s()()()}if(2&i){const e=a.$implicit;o.R7$(9),o.JRh(e.nombre),o.R7$(2),o.SpI("CIF: ",e.cif,""),o.R7$(5),o.SpI("Contacto: ",e.contacto.nombre,""),o.R7$(4),o.JRh(e.contacto.email),o.R7$(4),o.JRh(e.contacto.telefono),o.R7$(4),o.Lme("",e.direccion.calle,", ",e.direccion.ciudad,""),o.R7$(9),o.SpI("",e.plazoPago," d\xedas"),o.R7$(8),o.Y8G("ngForOf",e.productos),o.R7$(3),o.SpI("Descuento: ",e.descuento,"%"),o.R7$(1),o.Y8G("ngIf",e.metodoPago)}}function $(i,a){if(1&i&&(o.j41(0,"div")(1,"small",98),o.EFF(2,"IBAN"),o.k0s(),o.j41(3,"strong",131),o.EFF(4),o.k0s()()),2&i){const e=o.XpG(2);o.R7$(4),o.JRh(e.proveedorSeleccionado.iban)}}function N(i,a){if(1&i&&(o.j41(0,"span",134),o.nrm(1,"i",135),o.EFF(2),o.k0s()),2&i){const e=a.$implicit,r=o.XpG(3);o.R7$(2),o.SpI(" ",r.getProductName(e)," ")}}function I(i,a){if(1&i&&(o.j41(0,"div",132),o.DNE(1,N,3,1,"span",133),o.k0s()),2&i){const e=o.XpG(2);o.R7$(1),o.Y8G("ngForOf",e.proveedorSeleccionado.productos)}}function D(i,a){1&i&&(o.j41(0,"div",136),o.nrm(1,"i",137),o.j41(2,"p",29),o.EFF(3,"No hay productos asignados a este proveedor"),o.k0s()())}const w=function(i,a){return{"bg-info":i,"bg-warning":a}},G=function(i,a){return{"bi-bank":i,"bi-arrow-left-right":a}};function A(i,a){if(1&i&&(o.j41(0,"div",107)(1,"div",89)(2,"span",108),o.nrm(3,"i",109),o.EFF(4),o.k0s()(),o.j41(5,"div",110)(6,"div",8)(7,"h6",74),o.nrm(8,"i",111),o.EFF(9,"Informaci\xf3n de Contacto"),o.k0s(),o.j41(10,"div",112)(11,"div",50)(12,"div",26),o.nrm(13,"i",113),o.j41(14,"div")(15,"small",98),o.EFF(16,"Persona de contacto"),o.k0s(),o.j41(17,"strong"),o.EFF(18),o.k0s()()()(),o.j41(19,"div",114)(20,"div",26),o.nrm(21,"i",115),o.j41(22,"div")(23,"small",98),o.EFF(24,"Email"),o.k0s(),o.j41(25,"strong"),o.EFF(26),o.k0s()()()(),o.j41(27,"div",114)(28,"div",26),o.nrm(29,"i",116),o.j41(30,"div")(31,"small",98),o.EFF(32,"Tel\xe9fono"),o.k0s(),o.j41(33,"strong"),o.EFF(34),o.k0s()()()()()()(),o.j41(35,"div",112)(36,"div",114)(37,"div",117)(38,"div",8)(39,"h6",74),o.nrm(40,"i",118),o.EFF(41,"Datos de la Empresa"),o.k0s(),o.j41(42,"div",74)(43,"small",98),o.EFF(44,"Raz\xf3n Social"),o.k0s(),o.j41(45,"strong"),o.EFF(46),o.k0s()(),o.j41(47,"div",74)(48,"small",98),o.EFF(49,"Direcci\xf3n"),o.k0s(),o.j41(50,"strong"),o.EFF(51),o.k0s(),o.nrm(52,"br"),o.j41(53,"span"),o.EFF(54),o.k0s(),o.nrm(55,"br"),o.j41(56,"span"),o.EFF(57),o.k0s()(),o.DNE(58,$,5,1,"div",119),o.k0s()()(),o.j41(59,"div",114)(60,"div",117)(61,"div",8)(62,"h6",74),o.nrm(63,"i",120),o.EFF(64,"Condiciones Comerciales"),o.k0s(),o.j41(65,"div",112)(66,"div",96)(67,"div",121),o.nrm(68,"i",122),o.j41(69,"h4",29),o.EFF(70),o.k0s(),o.j41(71,"small",10),o.EFF(72,"d\xedas de pago"),o.k0s()()(),o.j41(73,"div",96)(74,"div",121),o.nrm(75,"i",123),o.j41(76,"h4",29),o.EFF(77),o.k0s(),o.j41(78,"small",10),o.EFF(79,"descuento"),o.k0s()()()(),o.j41(80,"div",124)(81,"small",125),o.EFF(82,"M\xe9todo de Pago"),o.k0s(),o.j41(83,"div",126),o.nrm(84,"i",109),o.j41(85,"strong",127),o.EFF(86),o.k0s()()()()()()(),o.j41(87,"div",128)(88,"div",8)(89,"h6",74),o.nrm(90,"i",99),o.EFF(91),o.k0s(),o.DNE(92,I,2,1,"div",129),o.DNE(93,D,4,0,"div",130),o.k0s()()()),2&i){const e=o.XpG();o.R7$(2),o.Y8G("ngClass",e.proveedorSeleccionado.activo?"bg-success":"bg-secondary"),o.R7$(1),o.Y8G("ngClass",e.proveedorSeleccionado.activo?"bi-check-circle-fill":"bi-x-circle-fill"),o.R7$(1),o.SpI(" ",e.proveedorSeleccionado.activo?"Activo":"Inactivo"," "),o.R7$(14),o.JRh(e.proveedorSeleccionado.contacto.nombre),o.R7$(8),o.JRh(e.proveedorSeleccionado.contacto.email),o.R7$(8),o.JRh(e.proveedorSeleccionado.contacto.telefono),o.R7$(12),o.JRh(e.proveedorSeleccionado.razonSocial),o.R7$(5),o.JRh(e.proveedorSeleccionado.direccion.calle),o.R7$(3),o.Lme("",e.proveedorSeleccionado.direccion.codigoPostal," ",e.proveedorSeleccionado.direccion.ciudad,""),o.R7$(3),o.JRh(e.proveedorSeleccionado.direccion.provincia),o.R7$(1),o.Y8G("ngIf",e.proveedorSeleccionado.iban),o.R7$(12),o.JRh(e.proveedorSeleccionado.plazoPago),o.R7$(7),o.SpI("",e.proveedorSeleccionado.descuento,"%"),o.R7$(6),o.Y8G("ngClass",o.l_i(20,w,"SEPA"===e.proveedorSeleccionado.metodoPago,"TRANSFERENCIA"===e.proveedorSeleccionado.metodoPago)),o.R7$(1),o.Y8G("ngClass",o.l_i(23,G,"SEPA"===e.proveedorSeleccionado.metodoPago,"TRANSFERENCIA"===e.proveedorSeleccionado.metodoPago)),o.R7$(2),o.JRh(e.proveedorSeleccionado.metodoPago),o.R7$(5),o.SpI("Productos Suministrados (",(null==e.proveedorSeleccionado.productos?null:e.proveedorSeleccionado.productos.length)||0,")"),o.R7$(1),o.Y8G("ngIf",e.proveedorSeleccionado.productos&&e.proveedorSeleccionado.productos.length>0),o.R7$(1),o.Y8G("ngIf",!e.proveedorSeleccionado.productos||0===e.proveedorSeleccionado.productos.length)}}function _(i,a){if(1&i&&(o.j41(0,"label",138),o.nrm(1,"input",139),o.EFF(2),o.k0s()),2&i){const e=a.index,r=o.XpG();o.Y8G("hidden",!r.shouldShowProduct(e)),o.R7$(1),o.Y8G("formControlName",e),o.R7$(1),o.SpI(" ",(null==r.productos[e]?null:r.productos[e].nombre)||"Producto sin nombre"," ")}}const T=[{path:"",component:(()=>{class i{constructor(e,r,t){this.fb=e,this.firestore=r,this.cdr=t,this.proveedores=[],this.filteredProveedores=[],this.productos=[],this.categorias=[],this.totalProductos=0,this.productosBajosEnStock=0,this.subscriptions=new k.yU,this.productSearch=new d.MJ(""),this.proveedorSearch=new d.MJ(""),this.categoryFilter=new d.MJ("all"),this.proveedorSeleccionado=null,this.proveedorForm=this.fb.group({id:[null],nombre:["",d.k0.required],cif:["",d.k0.required],razonSocial:["",d.k0.required],contacto:this.fb.group({nombre:["",d.k0.required],telefono:["",d.k0.required],email:["",[d.k0.required,d.k0.email]]}),direccion:this.fb.group({calle:["",d.k0.required],codigoPostal:["",d.k0.required],ciudad:["",d.k0.required],provincia:["",d.k0.required]}),iban:[""],plazoPago:[30,d.k0.min(0)],descuento:[0,[d.k0.min(0),d.k0.max(100)]],activo:[!0],metodoPago:["",d.k0.required],productos:this.fb.array([])})}ngOnInit(){this.cargarProveedores(),this.cargarProductos(),this.cargarCategorias();const e=document.getElementById("staticBackdrop");e&&(this.modal=new bootstrap.Modal(e));const r=document.getElementById("detalleProveedorModal");r&&(this.detalleModal=new bootstrap.Modal(r)),this.subscriptions.add(this.productSearch.valueChanges.subscribe(()=>{this.cdr.detectChanges()})),this.subscriptions.add((0,E.z)([this.proveedorSearch.valueChanges.pipe((0,F.Z)("")),this.categoryFilter.valueChanges.pipe((0,F.Z)("all"))]).pipe((0,j.B)(300)).subscribe(([t,s])=>{this.filterProveedores(t||"",s||"all")}))}ngOnDestroy(){this.subscriptions.unsubscribe()}get productosFormArray(){return this.proveedorForm.get("productos")}cargarProveedores(){const e=(0,c.collection)(this.firestore,"proveedores");this.subscriptions.add((0,c.collectionData)(e,{idField:"id"}).subscribe(r=>{this.proveedores=r,this.filteredProveedores=r}))}cargarProductos(){const e=(0,c.collection)(this.firestore,"productos");this.subscriptions.add((0,c.collectionData)(e,{idField:"id"}).subscribe(r=>{this.productos=r,this.totalProductos=r.length,this.productosBajosEnStock=r.filter(t=>!t.esCombinado&&void 0!==t.stock&&void 0!==t.stockMinimo&&t.stock<=t.stockMinimo).length,this.buildProductsFormArray()}))}cargarCategorias(){const e=(0,c.collection)(this.firestore,"categorias");this.subscriptions.add((0,c.collectionData)(e,{idField:"id"}).subscribe(r=>{this.categorias=r}))}filterProveedores(e,r){let t=[...this.proveedores];if(e&&(t=t.filter(s=>s.nombre.toLowerCase().includes(e.toLowerCase()))),r&&"all"!==r){const s=this.productos.filter(l=>l.categoriaId===r).map(l=>l.id);t=t.filter(l=>l.productos.some(v=>s.includes(v)))}this.filteredProveedores=t}buildProductsFormArray(){this.productosFormArray.clear(),this.productos.forEach(()=>{this.productosFormArray.push(new d.MJ(!1))})}shouldShowProduct(e){const r=this.productSearch.value?.toLowerCase()||"";return!r||this.productos[e].nombre.toLowerCase().includes(r)}guardarProveedor(){var e=this;return(0,u.A)(function*(){if(e.proveedorForm.invalid)return void m().fire("Error","Por favor, complete todos los campos requeridos.","error");const r=e.proveedorForm.value,t=e.productos.filter((l,v)=>e.productosFormArray.at(v).value).map(l=>l.id),s={...r,productos:t};m().showLoading();try{if(r.id){const l=(0,c.doc)(e.firestore,"proveedores",r.id);yield(0,c.updateDoc)(l,s),m().fire("\xa1Actualizado!","El proveedor ha sido actualizado.","success")}else s.fechaCreacion=(0,c.serverTimestamp)(),delete s.id,yield(0,c.addDoc)((0,c.collection)(e.firestore,"proveedores"),s),m().fire("\xa1Creado!","El nuevo proveedor ha sido guardado.","success");e.modal.hide(),e.resetForm()}catch(l){console.error("Error al guardar el proveedor:",l),m().fire("Error","Hubo un problema al guardar el proveedor.","error")}})()}editarProveedor(e){this.proveedorForm.reset(),this.proveedorForm.patchValue(e),this.productosFormArray.controls.forEach((r,t)=>{e.productos&&this.productos[t]&&e.productos.includes(this.productos[t].id)?r.setValue(!0):r.setValue(!1)}),this.modal.show()}eliminarProveedor(e){var r=this;return(0,u.A)(function*(){if((yield m().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{yield(0,c.deleteDoc)((0,c.doc)(r.firestore,"proveedores",e)),m().fire("\xa1Eliminado!","El proveedor ha sido eliminado.","success")}catch(s){console.error("Error al eliminar el proveedor:",s),m().fire("Error","No se pudo eliminar el proveedor.","error")}})()}abrirModalNuevo(){this.resetForm(),this.modal.show()}resetForm(){this.proveedorForm.reset({nombre:"",cif:"",razonSocial:"",contacto:{nombre:"",telefono:"",email:""},direccion:{calle:"",codigoPostal:"",ciudad:"",provincia:""},iban:"",plazoPago:30,descuento:0,activo:!0,metodoPago:""}),this.productosFormArray&&this.productosFormArray.controls.forEach(e=>e.setValue(!1)),this.productSearch.setValue("")}getProductName(e){const r=this.productos.find(t=>t.id===e);return r?r.nombre:""}verDetalleProveedor(e){const r=this.productos.filter(t=>e.productos&&e.productos.includes(t.id)||t.proveedorId===e.id).map(t=>t.id);this.proveedorSeleccionado={...e,productos:r},this.detalleModal.show()}editarDesdeDetalle(){this.proveedorSeleccionado&&(this.detalleModal.hide(),this.editarProveedor(this.proveedorSeleccionado))}eliminarDesdeDetalle(){var e=this;return(0,u.A)(function*(){e.proveedorSeleccionado&&(e.detalleModal.hide(),yield e.eliminarProveedor(e.proveedorSeleccionado.id),e.proveedorSeleccionado=null)})()}static{this.\u0275fac=function(r){return new(r||i)(o.rXU(d.ok),o.rXU(c.Firestore),o.rXU(o.gRc))}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["app-proveedores-page"]],decls:199,vars:16,consts:[[1,"row"],[1,"col-8"],[1,"col","text-end"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-plus-lg","me-2"],[1,"row","mt-4"],[1,"col-md-3"],[1,"card","border-0","shadow-sm"],[1,"card-body"],[1,"text-primary","mb-0"],[1,"text-muted"],[1,"text-danger","mb-0"],[1,"row","mt-3"],[1,"col"],[1,"card"],[1,"card-body","d-flex","gap-2"],["type","text","placeholder","Buscar proveedor...",1,"form-control",3,"formControl"],[1,"form-select",3,"formControl"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["class","col-12 text-center",4,"ngIf"],["class","col-12 col-md-4 mb-4",4,"ngFor","ngForOf"],["id","detalleProveedorModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header","border-0","pb-0"],[1,"d-flex","align-items-center"],[1,"rounded-circle","me-3","d-flex","justify-content-center","align-items-center",2,"background-color","#03204c","width","56px","height","56px"],[1,"bi","bi-building-fill","text-white","fs-3"],[1,"mb-0"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body pt-3",4,"ngIf"],[1,"modal-footer","border-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"bi","bi-x-lg","me-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil-fill","me-2"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill","me-2"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[3,"formGroup","ngSubmit"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],[1,"modal-body"],[1,"col-12","col-sm-6"],[1,"bi","bi-building"],[1,"row","mt-2"],[1,"text-danger"],["type","text","placeholder","Nombre del proveedor","formControlName","nombre",1,"form-control"],["type","text","placeholder","B12345678","formControlName","cif",1,"form-control"],[1,"col-12"],["type","text","placeholder","Distribuciones S.L.","formControlName","razonSocial",1,"form-control"],["formGroupName","contacto"],["type","text","placeholder","Carlos Mendoza","formControlName","nombre",1,"form-control"],["type","tel","placeholder","+34 91 123 4567","formControlName","telefono",1,"form-control"],["type","email","placeholder","contacto@proveedor.com","formControlName","email",1,"form-control"],[1,"form-check"],["type","checkbox","id","checkDefault","formControlName","activo",1,"form-check-input"],["for","checkDefault",1,"form-check-label"],[1,"bi","bi-geo-alt-fill"],["formGroupName","direccion"],["type","text","placeholder","Calle Gran Via, 15","formControlName","calle",1,"form-control"],["type","text","placeholder","28013","formControlName","codigoPostal",1,"form-control"],["type","text","placeholder","Madrid","formControlName","ciudad",1,"form-control"],["type","text","placeholder","Madrid","formControlName","provincia",1,"form-control"],["type","text","placeholder","ES91 2100 0418 4502 0005 1332","formControlName","iban",1,"form-control"],["type","number","placeholder","30","formControlName","plazoPago",1,"form-control"],["type","number","placeholder","5","formControlName","descuento",1,"form-control"],["for",""],["name","","id","","formControlName","metodoPago",1,"form-select"],["value","SEPA"],["value","TRANSFERENCIA"],[1,"my-4"],[1,"bi","bi-box-seam-fill"],[1,"mb-3"],["type","text","placeholder","Buscar producto...",1,"form-control",3,"formControl"],["formArrayName","productos",1,"list-group",2,"max-height","200px","overflow-y","auto"],["class","list-group-item",3,"hidden",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit",1,"btn","btn-danger",3,"disabled"],[3,"value"],[1,"col-12","text-center"],[1,"col-12","col-md-4","mb-4"],[1,"card","shadow-sm","border-0","h-100",2,"cursor","pointer",3,"click"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","align-items-start","mb-4"],[1,"rounded-circle","me-3","d-flex","justify-content-center","align-items-center",2,"background-color","#03204c","width","48px","height","48px"],[1,"bi","bi-building-fill","text-white","fs-4"],[1,"mb-0","fw-bold"],[1,"mb-4"],[1,"d-flex","align-items-center","mb-2"],[1,"bi","bi-person-fill","me-2","text-primary"],[1,"bi","bi-envelope-fill","me-2","text-primary"],[1,"bi","bi-telephone-fill","me-2","text-primary"],[1,"bi","bi-geo-alt-fill","me-2","text-primary"],[1,"row","mb-3"],[1,"col-6"],[1,"bi","bi-calendar3","me-2","text-primary"],[1,"text-muted","d-block"],[1,"bi","bi-box-seam-fill","me-2","text-primary"],[1,"d-flex","flex-wrap","gap-1","mt-1"],["class","badge bg-light text-dark border",4,"ngFor","ngForOf"],[1,"bg-success","bg-opacity-10","text-success","px-3","py-2","rounded-1","mb-3"],["class","px-3 py-2 rounded-1",3,"ngClass",4,"ngIf"],[1,"badge","bg-light","text-dark","border"],[1,"px-3","py-2","rounded-1",3,"ngClass"],[1,"text-white","fw-bold"],[1,"modal-body","pt-3"],[1,"badge",3,"ngClass"],[1,"bi",3,"ngClass"],[1,"card","border-0","bg-light","mb-3"],[1,"bi","bi-person-circle","me-2","text-primary"],[1,"row","g-3"],[1,"bi","bi-person-fill","me-3","text-muted",2,"width","20px"],[1,"col-md-6"],[1,"bi","bi-envelope-fill","me-3","text-muted",2,"width","20px"],[1,"bi","bi-telephone-fill","me-3","text-muted",2,"width","20px"],[1,"card","border-0","bg-light","h-100"],[1,"bi","bi-building","me-2","text-primary"],[4,"ngIf"],[1,"bi","bi-cash-coin","me-2","text-primary"],[1,"text-center","p-3","bg-white","rounded"],[1,"bi","bi-calendar3","text-primary","fs-4","d-block","mb-2"],[1,"bi","bi-percent","text-success","fs-4","d-block","mb-2"],[1,"mt-3"],[1,"text-muted","d-block","mb-2"],[1,"badge","px-3","py-2","w-100",3,"ngClass"],[1,"text-white","ms-2"],[1,"card","border-0","bg-light","mt-3"],["class","d-flex flex-wrap gap-2",4,"ngIf"],["class","text-center text-muted py-3",4,"ngIf"],[1,"font-monospace"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-white text-dark border px-3 py-2",4,"ngFor","ngForOf"],[1,"badge","bg-white","text-dark","border","px-3","py-2"],[1,"bi","bi-box","text-primary","me-1"],[1,"text-center","text-muted","py-3"],[1,"bi","bi-inbox","fs-1","d-block","mb-2"],[1,"list-group-item",3,"hidden"],["type","checkbox",1,"form-check-input","me-1",3,"formControlName"]],template:function(r,t){if(1&r&&(o.j41(0,"div",0)(1,"div",1)(2,"h5"),o.EFF(3,"Gesti\xf3n de Proveedores"),o.k0s(),o.j41(4,"span"),o.EFF(5,"Administra tus proveedores y contactos"),o.k0s()(),o.j41(6,"div",2)(7,"button",3),o.bIt("click",function(){return t.abrirModalNuevo()}),o.nrm(8,"i",4),o.EFF(9," Nuevo Proveedor "),o.k0s()()(),o.j41(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"h1",9),o.EFF(15),o.k0s(),o.j41(16,"span",10),o.EFF(17,"Total Productos"),o.k0s()()()(),o.j41(18,"div",6)(19,"div",7)(20,"div",8)(21,"h1",11),o.EFF(22),o.k0s(),o.j41(23,"span",10),o.EFF(24,"Productos bajos en stock"),o.k0s()()()()(),o.j41(25,"div",12)(26,"div",13)(27,"div",14)(28,"div",15),o.nrm(29,"input",16),o.j41(30,"select",17)(31,"option",18),o.EFF(32,"Todas las categor\xedas"),o.k0s(),o.DNE(33,P,2,2,"option",19),o.k0s()()()()(),o.j41(34,"div",5),o.DNE(35,y,3,0,"div",20),o.DNE(36,C,50,11,"div",21),o.k0s(),o.j41(37,"div",22)(38,"div",23)(39,"div",24)(40,"div",25)(41,"div",26)(42,"div",27),o.nrm(43,"i",28),o.k0s(),o.j41(44,"div")(45,"h4",29),o.EFF(46),o.k0s(),o.j41(47,"small",10),o.EFF(48),o.k0s()()(),o.nrm(49,"button",30),o.k0s(),o.DNE(50,A,94,26,"div",31),o.j41(51,"div",32)(52,"button",33),o.nrm(53,"i",34),o.EFF(54,"Cerrar "),o.k0s(),o.j41(55,"button",35),o.bIt("click",function(){return t.editarDesdeDetalle()}),o.nrm(56,"i",36),o.EFF(57,"Editar "),o.k0s(),o.j41(58,"button",37),o.bIt("click",function(){return t.eliminarDesdeDetalle()}),o.nrm(59,"i",38),o.EFF(60,"Eliminar "),o.k0s()()()()(),o.j41(61,"div",39)(62,"div",23)(63,"div",24)(64,"form",40),o.bIt("ngSubmit",function(){return t.guardarProveedor()}),o.j41(65,"div",41)(66,"h4",42),o.EFF(67),o.k0s(),o.nrm(68,"button",30),o.k0s(),o.j41(69,"div",43)(70,"div",0)(71,"div",44)(72,"h6"),o.nrm(73,"i",45),o.EFF(74,"\xa0Informaci\xf3n de la Empresa"),o.k0s(),o.j41(75,"div",46)(76,"div",44)(77,"label"),o.EFF(78,"Nombre Comercial "),o.j41(79,"span",47),o.EFF(80,"*"),o.k0s()(),o.nrm(81,"input",48),o.k0s(),o.j41(82,"div",44)(83,"label"),o.EFF(84,"CIF "),o.j41(85,"span",47),o.EFF(86,"*"),o.k0s()(),o.nrm(87,"input",49),o.k0s()(),o.j41(88,"div",12)(89,"div",50)(90,"label"),o.EFF(91,"Raz\xf3n Social "),o.j41(92,"span",47),o.EFF(93,"*"),o.k0s()(),o.nrm(94,"input",51),o.k0s()(),o.j41(95,"div",52)(96,"div",12)(97,"div",44)(98,"label"),o.EFF(99,"Persona de Contacto "),o.j41(100,"span",47),o.EFF(101,"*"),o.k0s()(),o.nrm(102,"input",53),o.k0s(),o.j41(103,"div",44)(104,"label"),o.EFF(105,"Tel\xe9fono "),o.j41(106,"span",47),o.EFF(107,"*"),o.k0s()(),o.nrm(108,"input",54),o.k0s()(),o.j41(109,"div",12)(110,"div",50)(111,"label"),o.EFF(112,"Email "),o.j41(113,"span",47),o.EFF(114,"*"),o.k0s()(),o.nrm(115,"input",55),o.k0s()()(),o.j41(116,"div",12)(117,"div",13)(118,"div",56),o.nrm(119,"input",57),o.j41(120,"label",58),o.EFF(121,"Proveedor activo"),o.k0s()()()()(),o.j41(122,"div",44)(123,"h6"),o.nrm(124,"i",59),o.EFF(125,"\xa0Direcci\xf3n y Datos Fiscales"),o.k0s(),o.j41(126,"div",60)(127,"div",46)(128,"div",50)(129,"label"),o.EFF(130,"Direcci\xf3n "),o.j41(131,"span",47),o.EFF(132,"*"),o.k0s()(),o.nrm(133,"input",61),o.k0s()(),o.j41(134,"div",12)(135,"div",44)(136,"label"),o.EFF(137,"C\xf3digo Postal "),o.j41(138,"span",47),o.EFF(139,"*"),o.k0s()(),o.nrm(140,"input",62),o.k0s(),o.j41(141,"div",44)(142,"label"),o.EFF(143,"Ciudad "),o.j41(144,"span",47),o.EFF(145,"*"),o.k0s()(),o.nrm(146,"input",63),o.k0s()(),o.j41(147,"div",12)(148,"div",50)(149,"label"),o.EFF(150,"Provincia "),o.j41(151,"span",47),o.EFF(152,"*"),o.k0s()(),o.nrm(153,"input",64),o.k0s()()(),o.j41(154,"div",12)(155,"div",50)(156,"label"),o.EFF(157,"IBAN "),o.j41(158,"small",10),o.EFF(159,"(Opcional)"),o.k0s()(),o.nrm(160,"input",65),o.k0s()(),o.j41(161,"div",12)(162,"div",44)(163,"label"),o.EFF(164,"D\xedas de Pago"),o.k0s(),o.nrm(165,"input",66),o.k0s(),o.j41(166,"div",44)(167,"label"),o.EFF(168,"Descuentos "),o.j41(169,"small",10),o.EFF(170,"(%)"),o.k0s()(),o.nrm(171,"input",67),o.k0s()(),o.j41(172,"div",12)(173,"div",13)(174,"label",68),o.EFF(175,"Tipo de Pago"),o.k0s(),o.j41(176,"select",69)(177,"option",70),o.EFF(178,"SEPA"),o.k0s(),o.j41(179,"option",71),o.EFF(180,"TRANSFERENCIA"),o.k0s()()()()()(),o.nrm(181,"hr",72),o.j41(182,"div",0)(183,"div",50)(184,"h6"),o.nrm(185,"i",73),o.EFF(186,"\xa0Productos Suministrados"),o.k0s(),o.j41(187,"p",10),o.EFF(188,"Selecciona los productos que este proveedor suministra."),o.k0s(),o.j41(189,"div",74),o.nrm(190,"input",75),o.k0s(),o.j41(191,"div",76),o.DNE(192,_,3,3,"label",77),o.k0s()()()(),o.j41(193,"div",78)(194,"button",33),o.EFF(195,"Cancelar"),o.k0s(),o.j41(196,"button",79),o.EFF(197),o.k0s()()()()()(),o.EFF(198,">\n")),2&r){let s,l;o.R7$(15),o.JRh(t.totalProductos),o.R7$(7),o.JRh(t.productosBajosEnStock),o.R7$(7),o.Y8G("formControl",t.proveedorSearch),o.R7$(1),o.Y8G("formControl",t.categoryFilter),o.R7$(3),o.Y8G("ngForOf",t.categorias),o.R7$(2),o.Y8G("ngIf",0===t.filteredProveedores.length),o.R7$(1),o.Y8G("ngForOf",t.filteredProveedores),o.R7$(10),o.JRh(null==t.proveedorSeleccionado?null:t.proveedorSeleccionado.nombre),o.R7$(2),o.SpI("CIF: ",null==t.proveedorSeleccionado?null:t.proveedorSeleccionado.cif,""),o.R7$(2),o.Y8G("ngIf",t.proveedorSeleccionado),o.R7$(14),o.Y8G("formGroup",t.proveedorForm),o.R7$(3),o.SpI(" ",null!=(s=t.proveedorForm.get("id"))&&s.value?"Editar Proveedor":"Nuevo Proveedor"," "),o.R7$(123),o.Y8G("formControl",t.productSearch),o.R7$(2),o.Y8G("ngForOf",t.productosFormArray.controls),o.R7$(4),o.Y8G("disabled",t.proveedorForm.invalid),o.R7$(1),o.SpI(" ",null!=(l=t.proveedorForm.get("id"))&&l.value?"Actualizar Proveedor":"Crear Proveedor"," ")}},dependencies:[p.YU,p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.l_,d.j4,d.JD,d.$R,d.v8]})}}return i})()}];let M=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({imports:[f.iI.forChild(T),f.iI]})}}return i})(),Y=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({imports:[M,h.PrivateModule,p.MD,d.X1,d.YN]})}}return i})()}}]);