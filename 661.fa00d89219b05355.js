"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[661],{3661:(A,h,l)=>{l.r(h),l.d(h,{RecetasPageModule:()=>U});var C=l(7412),d=l(9417),g=l(177),_=l(5743),p=l(467),m=l(9173),F=l(8032),u=l.n(F),k=l(8359),t=l(7705);function P(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",60),t.nrm(1,"i",61),t.j41(2,"h5",62),t.EFF(3,"No hay recetas registradas"),t.k0s(),t.j41(4,"p",11),t.EFF(5,"Crea tu primera receta para comenzar"),t.k0s(),t.j41(6,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.abrirModalNuevo())}),t.nrm(7,"i",50),t.EFF(8," Nueva Receta "),t.k0s()()}}function R(r,s){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&r){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",t.ii3(2,1,e.costoTotal,"EUR","symbol","1.2-2")," ")}}function M(r,s){1&r&&(t.j41(0,"span",11),t.EFF(1,"\u20ac0.00"),t.k0s())}function E(r,s){if(1&r&&(t.j41(0,"span",85),t.EFF(1),t.k0s()),2&r){const e=s.$implicit,n=t.XpG(2);t.R7$(1),t.SpI(" ",n.getProductoNombre(e.productoId)," ")}}function I(r,s){if(1&r&&(t.j41(0,"span",85),t.EFF(1),t.k0s()),2&r){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" +",e.ingredientes.length-3," m\xe1s ")}}function j(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",63)(1,"div",64),t.bIt("click",function(){const a=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.verDetalleReceta(a))}),t.j41(2,"div",65)(3,"div",66)(4,"div",67),t.nrm(5,"i",68),t.k0s(),t.j41(6,"div",69)(7,"h6",70),t.EFF(8),t.k0s(),t.j41(9,"span",71),t.EFF(10),t.k0s()()(),t.j41(11,"div",45)(12,"div",72),t.EFF(13,"Costo Total"),t.k0s(),t.j41(14,"div",73),t.DNE(15,R,3,6,"span",74),t.DNE(16,M,2,0,"ng-template",null,75,t.C5r),t.k0s()(),t.j41(18,"div",45)(19,"small",76),t.nrm(20,"i",77),t.EFF(21," Ingredientes: "),t.k0s(),t.j41(22,"div",78),t.DNE(23,E,2,1,"span",79),t.DNE(24,I,2,1,"span",80),t.k0s()(),t.j41(25,"div",81)(26,"small",11),t.nrm(27,"i",82),t.EFF(28),t.k0s(),t.j41(29,"span",83),t.nrm(30,"i",84),t.EFF(31),t.k0s()()()()()}if(2&r){const e=s.$implicit,n=t.sdS(17),o=t.XpG();t.R7$(8),t.JRh(e.nombre),t.R7$(1),t.Y8G("ngClass",o.getCategoriaBadgeClass(e.categoriaId)),t.R7$(1),t.SpI(" ",o.getCategoriaNombre(e.categoriaId)," "),t.R7$(5),t.Y8G("ngIf",null!=e.costoTotal&&o.isFinite(e.costoTotal))("ngIfElse",n),t.R7$(8),t.Y8G("ngForOf",e.ingredientes.slice(0,3)),t.R7$(1),t.Y8G("ngIf",e.ingredientes.length>3),t.R7$(4),t.SpI(" ",e.ingredientes.length," ingredientes "),t.R7$(1),t.Y8G("ngClass",e.activo?"bg-success":"bg-secondary"),t.R7$(1),t.Y8G("ngClass",e.activo?"bi-check-circle":"bi-x-circle"),t.R7$(1),t.SpI(" ",e.activo?"Activo":"Inactivo"," ")}}function y(r,s){if(1&r&&(t.j41(0,"tr")(1,"td")(2,"strong"),t.EFF(3),t.k0s(),t.nrm(4,"br"),t.j41(5,"small",11),t.EFF(6),t.nI1(7,"currency"),t.k0s()(),t.j41(8,"td",101),t.EFF(9),t.k0s(),t.j41(10,"td",101),t.EFF(11),t.nI1(12,"currency"),t.k0s(),t.j41(13,"td",101)(14,"span",111),t.EFF(15),t.nI1(16,"number"),t.k0s()()()),2&r){const e=s.$implicit,n=t.XpG(2);t.R7$(3),t.JRh(n.getProductoNombre(e.productoId)),t.R7$(3),t.SpI(" Costo/unidad: ",t.ii3(7,6,(e.costo||0)/e.cantidad,"EUR","symbol","1.3-3")," "),t.R7$(3),t.Lme(" ",e.cantidad," ",e.unidadMedida," "),t.R7$(2),t.SpI(" ",t.ii3(12,11,e.costo,"EUR","symbol","1.2-2")," "),t.R7$(4),t.SpI(" ",t.i5U(16,16,n.calcularPorcentajeCosto(e,n.recetaSeleccionada),"1.1-1"),"% ")}}function O(r,s){if(1&r&&(t.j41(0,"div",112)(1,"div",97)(2,"h6",113),t.nrm(3,"i",114),t.EFF(4," Notas de Preparaci\xf3n "),t.k0s(),t.j41(5,"p",115),t.EFF(6),t.k0s()()()),2&r){const e=t.XpG(2);t.R7$(6),t.JRh(e.recetaSeleccionada.notasPreparacion)}}function x(r,s){if(1&r&&(t.j41(0,"div",86)(1,"div",87)(2,"span",88),t.nrm(3,"i",89),t.EFF(4),t.k0s(),t.j41(5,"span",90),t.nrm(6,"i",84),t.EFF(7),t.k0s()(),t.j41(8,"div",91)(9,"div",92)(10,"div",93)(11,"div",9),t.nrm(12,"i",94),t.j41(13,"h3",95),t.EFF(14),t.nI1(15,"currency"),t.k0s(),t.j41(16,"small",11),t.EFF(17,"Costo Total de la Receta"),t.k0s()()()()(),t.j41(18,"div",96)(19,"div",97)(20,"h6",45),t.nrm(21,"i",98),t.EFF(22," Desglose de Costos "),t.k0s(),t.j41(23,"div",99)(24,"table",100)(25,"thead")(26,"tr")(27,"th"),t.EFF(28,"Ingrediente"),t.k0s(),t.j41(29,"th",101),t.EFF(30,"Cantidad"),t.k0s(),t.j41(31,"th",101),t.EFF(32,"Costo"),t.k0s(),t.j41(33,"th",101),t.EFF(34,"%"),t.k0s()()(),t.j41(35,"tbody"),t.DNE(36,y,17,19,"tr",102),t.k0s()()()()(),t.j41(37,"div",103)(38,"div",104)(39,"div",105)(40,"div",97)(41,"h6",45),t.nrm(42,"i",106),t.EFF(43," Ingredientes "),t.k0s(),t.j41(44,"div",21),t.nrm(45,"i",107),t.j41(46,"div")(47,"h3",24),t.EFF(48),t.k0s(),t.j41(49,"small",11),t.EFF(50,"productos utilizados"),t.k0s()()()()()(),t.j41(51,"div",104)(52,"div",105)(53,"div",97)(54,"h6",45),t.nrm(55,"i",108),t.EFF(56," Costo Total "),t.k0s(),t.j41(57,"div",21),t.nrm(58,"i",109),t.j41(59,"div")(60,"h3",24),t.EFF(61),t.nI1(62,"currency"),t.k0s(),t.j41(63,"small",11),t.EFF(64,"costo de preparaci\xf3n"),t.k0s()()()()()()(),t.DNE(65,O,7,1,"div",110),t.k0s()),2&r){const e=t.XpG();t.R7$(2),t.Y8G("ngClass",e.getCategoriaBadgeClass(e.recetaSeleccionada.categoriaId)),t.R7$(2),t.SpI(" ",e.getCategoriaNombre(e.recetaSeleccionada.categoriaId)," "),t.R7$(1),t.Y8G("ngClass",e.recetaSeleccionada.activo?"bg-success":"bg-secondary"),t.R7$(1),t.Y8G("ngClass",e.recetaSeleccionada.activo?"bi-check-circle-fill":"bi-x-circle-fill"),t.R7$(1),t.SpI(" ",e.recetaSeleccionada.activo?"Activo":"Inactivo"," "),t.R7$(7),t.SpI(" ",t.ii3(15,10,e.recetaSeleccionada.costoTotal,"EUR","symbol","1.2-2")," "),t.R7$(22),t.Y8G("ngForOf",e.recetaSeleccionada.ingredientes),t.R7$(12),t.SpI(" ",e.recetaSeleccionada.ingredientes.length," "),t.R7$(13),t.SpI(" ",t.ii3(62,15,e.recetaSeleccionada.costoTotal,"EUR","symbol","1.2-2")," "),t.R7$(4),t.Y8G("ngIf",e.recetaSeleccionada.notasPreparacion)}}function $(r,s){if(1&r&&(t.j41(0,"option",116),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.nombre," ")}}function T(r,s){if(1&r&&(t.j41(0,"option",116),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&r){const e=s.$implicit;t.Y8G("value",e.nombre),t.R7$(1),t.E5c(" Stock: ",e.cantidad," ",e.unidadMedida," - ",t.ii3(2,4,e.costo,"EUR","symbol","1.2-2")," ")}}function w(r,s){if(1&r&&(t.j41(0,"div",137)(1,"small",138),t.nrm(2,"i",82),t.EFF(3),t.k0s(),t.j41(4,"small",139),t.nrm(5,"i",140),t.EFF(6),t.nI1(7,"currency"),t.k0s()()),2&r){const e=s.ngIf;t.R7$(3),t.Lme(" Stock: ",e.cantidad," ",e.unidadMedida," "),t.R7$(3),t.SpI(" Costo: ",t.ii3(7,3,e.costo,"EUR","symbol","1.2-2")," ")}}function G(r,s){if(1&r&&(t.j41(0,"option",116),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function N(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",117)(1,"div",118)(2,"div",119)(3,"div",120)(4,"label",121),t.EFF(5,"Producto"),t.k0s(),t.j41(6,"input",122,123),t.bIt("input",function(o){const i=t.eBV(e).index,c=t.XpG();return t.Njj(c.onProductoInput(i,o))})("change",function(o){const i=t.eBV(e).index,c=t.XpG();return t.Njj(c.onProductoInput(i,o))})("blur",function(o){const i=t.eBV(e).index,c=t.XpG();return t.Njj(c.onProductoBlur(i,o))}),t.k0s(),t.j41(8,"datalist",124),t.DNE(9,T,3,9,"option",44),t.k0s(),t.nrm(10,"input",125),t.DNE(11,w,8,8,"div",126),t.k0s(),t.j41(12,"div",127)(13,"label",121),t.EFF(14,"Cantidad"),t.k0s(),t.j41(15,"input",128),t.bIt("input",function(){const a=t.eBV(e).index,i=t.XpG();return t.Njj(i.actualizarCostoIngrediente(a))}),t.k0s()(),t.j41(16,"div",127)(17,"label",121),t.EFF(18,"Unidad"),t.k0s(),t.j41(19,"select",129),t.bIt("change",function(){const a=t.eBV(e).index,i=t.XpG();return t.Njj(i.actualizarCostoIngrediente(a))}),t.j41(20,"option",43),t.EFF(21,"Seleccionar"),t.k0s(),t.DNE(22,G,2,2,"option",44),t.k0s()(),t.j41(23,"div",130)(24,"label",121),t.EFF(25,"Costo"),t.k0s(),t.j41(26,"div",131)(27,"span",132),t.EFF(28,"\u20ac"),t.k0s(),t.nrm(29,"input",133),t.nI1(30,"currency"),t.k0s()(),t.j41(31,"div",134)(32,"label",121),t.EFF(33,"\xa0"),t.k0s(),t.j41(34,"button",135),t.bIt("click",function(){const a=t.eBV(e).index,i=t.XpG();return t.Njj(i.eliminarIngrediente(a))}),t.nrm(35,"i",136),t.k0s()()()()()}if(2&r){const e=s.$implicit,n=s.index,o=t.XpG();let a,i,c;t.Y8G("formGroupName",n),t.R7$(6),t.Y8G("value",o.getProductoNombreById(null==(a=e.get("productoId"))?null:a.value)),t.BMQ("list","productos-list-"+n),t.R7$(2),t.Y8G("id","productos-list-"+n),t.R7$(1),t.Y8G("ngForOf",o.productos),t.R7$(2),t.Y8G("ngIf",o.getProductoById(null==(i=e.get("productoId"))?null:i.value)),t.R7$(11),t.Y8G("ngForOf",o.getUnidadesCompatibles(null==(c=e.get("productoId"))?null:c.value)),t.R7$(7),t.Y8G("value",t.ii3(30,8,o.calcularCostoIngredientePreview(n),"EUR","symbol-narrow","1.3-3"))}}function S(r,s){1&r&&(t.j41(0,"div",141)(1,"small"),t.nrm(2,"i",142),t.EFF(3,' Haz clic en "Agregar" para a\xf1adir ingredientes a la receta '),t.k0s()())}function D(r,s){if(1&r&&(t.j41(0,"div",143)(1,"h6",144),t.nrm(2,"i",145),t.EFF(3," Preview de Costos "),t.k0s(),t.j41(4,"div",146)(5,"small",147),t.EFF(6,"Costo Total"),t.k0s(),t.j41(7,"strong",148),t.EFF(8),t.nI1(9,"currency"),t.k0s()()()),2&r){const e=t.XpG();t.R7$(8),t.JRh(t.ii3(9,1,e.costoPreview.costoTotal,"EUR","symbol","1.2-2"))}}const Y=[{path:"",component:(()=>{class r{constructor(e,n){this.fb=e,this.firestore=n,this.recetas=[],this.productos=[],this.recetaSeleccionada=null,this.totalRecetas=0,this.recetasActivas=0,this.totalIngredientes=0,this.costoPromedio=0,this.categorias=[{id:"platos",nombre:"Platos"},{id:"bebidas",nombre:"Bebidas"},{id:"postres",nombre:"Postres"},{id:"entradas",nombre:"Entradas"},{id:"salsas",nombre:"Salsas"},{id:"guarniciones",nombre:"Guarniciones"}],this.conversionesUnidades={"kg (kilogramos)":{"g (gramos)":1e3,"kg (kilogramos)":1},"g (gramos)":{"g (gramos)":1,"kg (kilogramos)":.001},"L (litros)":{"ml (mililitros)":1e3,"L (litros)":1},"ml (mililitros)":{"ml (mililitros)":1,"L (litros)":.001},unidades:{unidades:1}},this.subscriptions=new k.yU,this.inicializarForm()}ngOnInit(){this.cargarProductos(),this.cargarRecetas();const e=document.getElementById("recetaModal");e&&(this.modal=new bootstrap.Modal(e));const n=document.getElementById("detalleRecetaModal");n&&(this.detalleModal=new bootstrap.Modal(n))}ngOnDestroy(){this.subscriptions.unsubscribe()}inicializarForm(){this.recetaForm=this.fb.group({id:[""],nombre:[""],categoriaId:[""],notasPreparacion:[""],ingredientes:this.fb.array([]),activo:[!0]})}get ingredientes(){return this.recetaForm.get("ingredientes")}agregarIngrediente(){const e=this.fb.group({productoId:[""],cantidad:[0],unidadMedida:["g (gramos)"]});this.ingredientes.push(e)}eliminarIngrediente(e){this.ingredientes.removeAt(e)}cargarRecetas(){const e=(0,m.collection)(this.firestore,"recetas");this.subscriptions.add((0,m.collectionData)(e,{idField:"id"}).subscribe(n=>{this.recetas=n.map(o=>this.calcularCostos(o)),this.calcularEstadisticas()}))}cargarProductos(){const e=(0,m.collection)(this.firestore,"productos");this.subscriptions.add((0,m.collectionData)(e,{idField:"id"}).subscribe(n=>{this.productos=n.filter(o=>!o.esCombinado),this.recetas.length>0&&(this.recetas=this.recetas.map(o=>this.calcularCostos(o)),this.calcularEstadisticas())}))}calcularCostos(e){let n=0;return this.productos&&0!==this.productos.length?(e.ingredientes.forEach(o=>{const a=this.productos.find(i=>i.id===o.productoId);if(a)if(o.productoNombre=a.nombre,o.unidadMedida||(o.unidadMedida=a.unidadMedida),o.cantidad>0&&a.cantidad>0&&a.costo>0){const i=this.obtenerFactorConversion(o.unidadMedida,a.unidadMedida);if(i>0){const b=a.costo/a.cantidad*(o.cantidad*i);isFinite(b)&&b>=0?(o.costo=b,n+=b):o.costo=0}else o.costo=0}else o.costo=0;else o.costo=0}),e.costoTotal=isFinite(n)?n:0,e):(e.costoTotal=0,e)}calcularEstadisticas(){if(this.totalRecetas=this.recetas.length,this.recetasActivas=this.recetas.filter(e=>e.activo).length,this.totalIngredientes=this.recetas.reduce((e,n)=>e+n.ingredientes.length,0),this.recetas.length>0){const e=this.recetas.reduce((n,o)=>n+(o.costoTotal||0),0);this.costoPromedio=e/this.recetas.length}else this.costoPromedio=0}abrirModalNuevo(){this.recetaForm.reset({id:"",nombre:"",categoriaId:"",notasPreparacion:"",activo:!0}),this.ingredientes.clear(),this.agregarIngrediente(),this.modal.show()}verDetalleReceta(e){this.recetaSeleccionada=this.calcularCostos({...e}),this.detalleModal.show()}editarReceta(e){this.recetaForm.patchValue(e),this.ingredientes.clear(),e.ingredientes.forEach(n=>{const o=this.fb.group({productoId:[n.productoId],cantidad:[n.cantidad],unidadMedida:[n.unidadMedida]});this.ingredientes.push(o)}),this.modal.show()}editarDesdeDetalle(){this.recetaSeleccionada&&(this.detalleModal.hide(),this.editarReceta(this.recetaSeleccionada))}eliminarReceta(e){var n=this;return(0,p.A)(function*(){if((yield u().fire({title:"\xbfEliminar Receta?",text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{yield(0,m.deleteDoc)((0,m.doc)(n.firestore,"recetas",e)),u().fire("\xa1Eliminada!","La receta ha sido eliminada.","success")}catch(a){console.error("Error al eliminar receta:",a),u().fire("Error","No se pudo eliminar la receta.","error")}})()}eliminarDesdeDetalle(){var e=this;return(0,p.A)(function*(){e.recetaSeleccionada?.id&&(e.detalleModal.hide(),yield e.eliminarReceta(e.recetaSeleccionada.id),e.recetaSeleccionada=null)})()}guardarReceta(){var e=this;return(0,p.A)(function*(){const n=e.recetaForm.value,o={nombre:n.nombre||"",categoriaId:n.categoriaId||"",notasPreparacion:n.notasPreparacion||"",ingredientes:n.ingredientes||[],activo:n.activo,fechaActualizacion:new Date};try{if(n.id){const a=(0,m.doc)(e.firestore,"recetas",n.id);yield(0,m.updateDoc)(a,o),u().fire("\xa1Actualizada!","La receta ha sido actualizada.","success")}else{const a={...o,fechaCreacion:(0,m.serverTimestamp)()};yield(0,m.addDoc)((0,m.collection)(e.firestore,"recetas"),a),u().fire("\xa1Creada!","La nueva receta ha sido guardada.","success")}e.modal.hide(),e.recetaForm.reset()}catch(a){console.error("Error al guardar receta:",a),u().fire("Error","Hubo un problema al guardar la receta.","error")}})()}getCategoriaNombre(e){return this.categorias.find(o=>o.id===e)?.nombre||"Sin categor\xeda"}getCategoriaBadgeClass(e){return{platos:"bg-primary",bebidas:"bg-info",postres:"bg-warning text-dark",entradas:"bg-success",salsas:"bg-danger",guarniciones:"bg-secondary"}[e]||"bg-secondary"}getProductoNombre(e){return this.productos.find(o=>o.id===e)?.nombre||"Producto no encontrado"}calcularPorcentajeCosto(e,n){return n.costoTotal&&0!==n.costoTotal?(e.costo||0)/n.costoTotal*100:0}getProductoNombreById(e){return this.productos.find(o=>o.id===e)?.nombre||""}onProductoInput(e,n){const o=n.target.value.trim(),a=this.productos.find(c=>c.nombre.toLowerCase()===o.toLowerCase());this.ingredientes.at(e).patchValue(a?{productoId:a.id,unidadMedida:a.unidadMedida}:{productoId:""})}onProductoBlur(e,n){const o=n.target.value.trim(),a=this.productos.find(i=>i.nombre.toLowerCase()===o.toLowerCase());a?n.target.value=a.nombre:""===o&&this.ingredientes.at(e).patchValue({productoId:"",unidadMedida:""})}getProductoById(e){return this.productos.find(n=>n.id===e)||null}isFinite(e){return Number.isFinite(e)}getUnidadesCompatibles(e){const n=this.productos.find(i=>i.id===e);if(!n)return[];const o=n.unidadMedida,a=this.conversionesUnidades[o];return a?Object.keys(a):[o]}actualizarCostoIngrediente(e){}calcularCostoIngredientePreview(e){const n=this.ingredientes.at(e),o=n.get("productoId")?.value,a=n.get("cantidad")?.value||0,i=n.get("unidadMedida")?.value;if(!o||a<=0||!i)return 0;const c=this.productos.find(X=>X.id===o);if(!c||c.cantidad<=0||c.costo<=0)return 0;const f=this.obtenerFactorConversion(i,c.unidadMedida);if(0===f)return 0;const v=c.costo/c.cantidad*(a*f);return isFinite(v)?v:0}obtenerFactorConversion(e,n){if(e===n)return 1;const o=this.conversionesUnidades[e];if(o&&o[n])return 1/o[n];const a=this.conversionesUnidades[n];return a&&a[e]?a[e]:0}get costoPreview(){let e=0;return this.ingredientes.controls.forEach((n,o)=>{const a=this.calcularCostoIngredientePreview(o);e+=a}),{costoTotal:isFinite(e)?e:0}}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(d.ok),t.rXU(m.Firestore))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-recetas-page"]],decls:111,vars:20,consts:[[1,"container-fluid"],[1,"row"],[1,"col-8"],[1,"col","text-end"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-plus-lg","me-2"],[1,"row","mt-4"],[1,"col-md-3","mb-3"],[1,"card","border-0","shadow-sm"],[1,"card-body","text-center"],[1,"text-primary","mb-0"],[1,"text-muted"],[1,"text-success","mb-0"],[1,"text-info","mb-0"],[1,"text-warning","mb-0"],["class","col-12 text-center py-5",4,"ngIf"],["class","col-12 col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],["id","detalleRecetaModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header","border-0","pb-0"],[1,"d-flex","align-items-center"],[1,"rounded-circle","me-3","d-flex","justify-content-center","align-items-center",2,"background-color","#6c757d","width","56px","height","56px"],[1,"bi","bi-cup-straw","text-white","fs-3"],[1,"mb-0"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body pt-3",4,"ngIf"],[1,"modal-footer","border-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"bi","bi-x-lg","me-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil-fill","me-2"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill","me-2"],["id","recetaModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[3,"formGroup","ngSubmit"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"col-md-6","mb-3"],[1,"form-label"],["type","text","formControlName","nombre","placeholder","Ej: Pur\xe9 de Papa",1,"form-control"],["formControlName","categoriaId",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3"],["formControlName","notasPreparacion","rows","2","placeholder","Instrucciones especiales o notas importantes",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"form-label","mb-0"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-plus","me-1"],["formArrayName","ingredientes"],["class","card mb-2",3,"formGroupName",4,"ngFor","ngForOf"],["class","alert alert-info py-2 px-3",4,"ngIf"],["class","alert alert-info mb-3",4,"ngIf"],[1,"form-check"],["type","checkbox","formControlName","activo","id","activoCheck",1,"form-check-input"],["for","activoCheck",1,"form-check-label"],[1,"modal-footer"],["type","submit",1,"btn","btn-danger"],[1,"col-12","text-center","py-5"],[1,"bi","bi-inbox","fs-1","text-muted"],[1,"mt-3","text-muted"],[1,"col-12","col-md-6","col-lg-4","mb-4"],[1,"card","shadow-sm","border-0","h-100",2,"cursor","pointer",3,"click"],[1,"card-body","p-4"],[1,"d-flex","align-items-start","mb-3"],[1,"rounded-circle","me-3","d-flex","justify-content-center","align-items-center",2,"background-color","#6c757d","width","48px","height","48px","min-width","48px"],[1,"bi","bi-cup-straw","text-white","fs-5"],[1,"flex-grow-1"],[1,"mb-1","fw-bold"],[1,"badge","rounded-pill",3,"ngClass"],[1,"text-muted","small"],[1,"fw-bold","text-warning",2,"font-size","1.3rem"],[4,"ngIf","ngIfElse"],["noCosto",""],[1,"text-muted","d-block","mb-2"],[1,"bi","bi-list-ul","me-1"],[1,"d-flex","flex-wrap","gap-1"],["class","badge bg-light text-dark",4,"ngFor","ngForOf"],["class","badge bg-light text-dark",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],[1,"bi","bi-box-seam","me-1"],[1,"badge",3,"ngClass"],[1,"bi",3,"ngClass"],[1,"badge","bg-light","text-dark"],[1,"modal-body","pt-3"],[1,"mb-4"],[1,"badge","px-3","py-2","me-2",3,"ngClass"],[1,"bi","bi-tag-fill","me-1"],[1,"badge","px-3","py-2",3,"ngClass"],[1,"row","g-3","mb-3"],[1,"col-md-12"],[1,"card","border-0","bg-warning","bg-opacity-10","h-100"],[1,"bi","bi-cash-coin","text-warning","fs-2","d-block","mb-2"],[1,"mb-0","text-warning"],[1,"card","border-0","bg-light","mb-3"],[1,"card-body"],[1,"bi","bi-calculator","me-2","text-primary"],[1,"table-responsive"],[1,"table","table-sm","mb-0"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"row","g-3"],[1,"col-md-6"],[1,"card","border-0","bg-light","h-100"],[1,"bi","bi-list-ul","me-2","text-primary"],[1,"bi","bi-box-seam","fs-2","text-primary","me-3"],[1,"bi","bi-cash-stack","me-2","text-primary"],[1,"bi","bi-calculator","fs-2","text-primary","me-3"],["class","card border-0 bg-primary bg-opacity-10 mt-3",4,"ngIf"],[1,"badge","bg-secondary"],[1,"card","border-0","bg-primary","bg-opacity-10","mt-3"],[1,"mb-2"],[1,"bi","bi-journal-text","me-2","text-primary"],[1,"mb-0","small"],[3,"value"],[1,"card","mb-2",3,"formGroupName"],[1,"card-body","p-3"],[1,"row","g-2"],[1,"col-md-4"],[1,"form-label","small","text-muted","mb-1"],["type","text","placeholder","Buscar producto...","autocomplete","off",1,"form-control","form-control-sm",3,"value","input","change","blur"],["productoInput",""],[3,"id"],["type","hidden","formControlName","productoId"],["class","mt-1",4,"ngIf"],[1,"col-md-2"],["type","number","formControlName","cantidad","placeholder","0","step","0.01","min","0",1,"form-control","form-control-sm",3,"input"],["formControlName","unidadMedida",1,"form-select","form-select-sm",3,"change"],[1,"col-md-3"],[1,"input-group","input-group-sm"],[1,"input-group-text"],["type","text","readonly","",1,"form-control","form-control-sm",2,"background-color","#f8f9fa",3,"value"],[1,"col-md-1"],["type","button",1,"btn","btn-sm","btn-outline-danger","w-100","d-block",3,"click"],[1,"bi","bi-trash"],[1,"mt-1"],[1,"text-success","d-block"],[1,"text-info","d-block"],[1,"bi","bi-cash","me-1"],[1,"alert","alert-info","py-2","px-3"],[1,"bi","bi-info-circle","me-1"],[1,"alert","alert-info","mb-3"],[1,"alert-heading"],[1,"bi","bi-calculator","me-2"],[1,"text-center"],[1,"text-muted","d-block"],[1,"fs-4","text-warning"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),t.EFF(4,"Recetas Pre-elaboradas"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Productos combinados para usar en tus escandallos"),t.k0s()(),t.j41(7,"div",3)(8,"button",4),t.bIt("click",function(){return o.abrirModalNuevo()}),t.nrm(9,"i",5),t.EFF(10," Nueva Receta "),t.k0s()()(),t.j41(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"h2",10),t.EFF(16),t.k0s(),t.j41(17,"span",11),t.EFF(18,"Total Recetas"),t.k0s()()()(),t.j41(19,"div",7)(20,"div",8)(21,"div",9)(22,"h2",12),t.EFF(23),t.k0s(),t.j41(24,"span",11),t.EFF(25,"Activas"),t.k0s()()()(),t.j41(26,"div",7)(27,"div",8)(28,"div",9)(29,"h2",13),t.EFF(30),t.k0s(),t.j41(31,"span",11),t.EFF(32,"Total Ingredientes"),t.k0s()()()(),t.j41(33,"div",7)(34,"div",8)(35,"div",9)(36,"h2",14),t.EFF(37),t.nI1(38,"currency"),t.k0s(),t.j41(39,"span",11),t.EFF(40,"Costo Promedio"),t.k0s()()()()(),t.j41(41,"div",6),t.DNE(42,P,9,0,"div",15),t.DNE(43,j,32,11,"div",16),t.k0s()(),t.j41(44,"div",17)(45,"div",18)(46,"div",19)(47,"div",20)(48,"div",21)(49,"div",22),t.nrm(50,"i",23),t.k0s(),t.j41(51,"div")(52,"h4",24),t.EFF(53),t.k0s()()(),t.nrm(54,"button",25),t.k0s(),t.DNE(55,x,66,20,"div",26),t.j41(56,"div",27)(57,"button",28),t.nrm(58,"i",29),t.EFF(59,"Cerrar "),t.k0s(),t.j41(60,"button",30),t.bIt("click",function(){return o.editarDesdeDetalle()}),t.nrm(61,"i",31),t.EFF(62,"Editar "),t.k0s(),t.j41(63,"button",32),t.bIt("click",function(){return o.eliminarDesdeDetalle()}),t.nrm(64,"i",33),t.EFF(65,"Eliminar "),t.k0s()()()()(),t.j41(66,"div",34)(67,"div",18)(68,"div",19)(69,"form",35),t.bIt("ngSubmit",function(){return o.guardarReceta()}),t.j41(70,"div",36)(71,"h5",37),t.EFF(72),t.k0s(),t.nrm(73,"button",25),t.k0s(),t.j41(74,"div",38)(75,"div",1)(76,"div",39)(77,"label",40),t.EFF(78,"Nombre"),t.k0s(),t.nrm(79,"input",41),t.k0s(),t.j41(80,"div",39)(81,"label",40),t.EFF(82,"Categor\xeda"),t.k0s(),t.j41(83,"select",42)(84,"option",43),t.EFF(85,"Seleccionar categor\xeda"),t.k0s(),t.DNE(86,$,2,2,"option",44),t.k0s()()(),t.j41(87,"div",45)(88,"label",40),t.EFF(89,"Notas de Preparaci\xf3n"),t.k0s(),t.nrm(90,"textarea",46),t.k0s(),t.j41(91,"div",45)(92,"div",47)(93,"label",48),t.EFF(94,"Ingredientes"),t.k0s(),t.j41(95,"button",49),t.bIt("click",function(){return o.agregarIngrediente()}),t.nrm(96,"i",50),t.EFF(97,"Agregar "),t.k0s()(),t.j41(98,"div",51),t.DNE(99,N,36,13,"div",52),t.k0s(),t.DNE(100,S,4,0,"div",53),t.k0s(),t.DNE(101,D,10,6,"div",54),t.j41(102,"div",55),t.nrm(103,"input",56),t.j41(104,"label",57),t.EFF(105," Activo "),t.k0s()()(),t.j41(106,"div",58)(107,"button",28),t.EFF(108," Cancelar "),t.k0s(),t.j41(109,"button",59),t.EFF(110),t.k0s()()()()()()),2&n){let a,i;t.R7$(16),t.JRh(o.totalRecetas),t.R7$(7),t.JRh(o.recetasActivas),t.R7$(7),t.JRh(o.totalIngredientes),t.R7$(7),t.SpI(" ",t.ii3(38,15,o.costoPromedio,"EUR","symbol","1.2-2")," "),t.R7$(5),t.Y8G("ngIf",0===o.recetas.length),t.R7$(1),t.Y8G("ngForOf",o.recetas),t.R7$(10),t.JRh(null==o.recetaSeleccionada?null:o.recetaSeleccionada.nombre),t.R7$(2),t.Y8G("ngIf",o.recetaSeleccionada),t.R7$(14),t.Y8G("formGroup",o.recetaForm),t.R7$(3),t.SpI(" ",null!=(a=o.recetaForm.get("id"))&&a.value?"Editar Receta":"Nueva Receta"," "),t.R7$(14),t.Y8G("ngForOf",o.categorias),t.R7$(13),t.Y8G("ngForOf",o.ingredientes.controls),t.R7$(1),t.Y8G("ngIf",0===o.ingredientes.length),t.R7$(1),t.Y8G("ngIf",o.ingredientes.length>0),t.R7$(9),t.SpI(" ",null!=(i=o.recetaForm.get("id"))&&i.value?"Actualizar":"Guardar"," ")}},dependencies:[g.YU,g.Sq,g.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.VZ,d.j4,d.JD,d.$R,d.v8,g.QX,g.oe],styles:[".card[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #00000026!important}.badge[_ngcontent-%COMP%]{font-weight:500}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000005}.modal-content[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden}.dark-mode[_nghost-%COMP%]   .card[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--bg-card);color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover, .dark-mode   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #ffffff1a!important}.dark-mode[_nghost-%COMP%]   .text-muted[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-muted)!important}.dark-mode[_nghost-%COMP%]   .bg-light[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .bg-light[_ngcontent-%COMP%]{background-color:var(--bg-surface)!important}.dark-mode[_nghost-%COMP%]   .table[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .table[_ngcontent-%COMP%]{color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover, .dark-mode   [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}.dark-mode[_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:var(--bg-card);color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom-color:var(--border-color)}.dark-mode[_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top-color:var(--border-color)}.dark-mode[_nghost-%COMP%]   .form-control[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .form-control[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .form-select[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]{background-color:var(--input-bg);border-color:var(--input-border);color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .dark-mode   [_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .dark-mode[_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]:focus, .dark-mode   [_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{background-color:var(--input-bg);border-color:var(--color-principal);color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder, .dark-mode   [_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder, .dark-mode[_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]::placeholder, .dark-mode   [_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.dark-mode[_nghost-%COMP%]   .badge.bg-light[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .badge.bg-light[_ngcontent-%COMP%]{background-color:var(--bg-surface)!important;color:var(--text-primary)!important}.dark-mode[_nghost-%COMP%]   .alert[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .alert[_ngcontent-%COMP%]{background-color:var(--bg-surface);border-color:var(--border-color);color:var(--text-primary)}.card-body[_ngcontent-%COMP%]   .row.g-2[_ngcontent-%COMP%]   .form-select-sm[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]   .row.g-2[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{font-size:.875rem}.badge.rounded-pill[_ngcontent-%COMP%]{padding:.35em .75em;font-size:.75rem;font-weight:600}.card-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.table-responsive[_ngcontent-%COMP%]{border-radius:8px}.card.mb-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease-out}input[list][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{opacity:.6}"]})}}return r})()}];let B=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[_.iI.forChild(Y),_.iI]})}}return r})(),U=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[B,C.PrivateModule,g.MD,d.X1,d.YN]})}}return r})()}}]);