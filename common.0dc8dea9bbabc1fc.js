"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[76],{6239:(d,m,i)=>{i.d(m,{d:()=>u});var c=i(467),t=i(9173),s=i(6354),l=i(7705);let u=(()=>{class o{constructor(e){this.firestore=e}getMermas(){const e=(0,t.collection)(this.firestore,"mermas");return(0,t.collectionData)(e,{idField:"id"})}getMermasActivas(){return this.getMermas().pipe((0,s.T)(e=>e.filter(r=>r.activo)))}getMermasCocinaActivas(){return this.getMermas().pipe((0,s.T)(e=>e.filter(r=>r.activo&&(!r.tipo||"cocina"===r.tipo))))}getMermasProducto(){return this.getMermas().pipe((0,s.T)(e=>e.filter(r=>"producto"===r.tipo)))}getMermaPorProducto(e){return this.getMermasCocinaActivas().pipe((0,s.T)(r=>r.find(a=>a.productoId===e)))}crearMerma(e){var r=this;return(0,c.A)(function*(){const a=(0,t.collection)(r.firestore,"mermas"),n={...e,fechaCreacion:(0,t.serverTimestamp)(),fechaActualizacion:new Date};yield(0,t.addDoc)(a,n)})()}actualizarMerma(e,r){var a=this;return(0,c.A)(function*(){const n=(0,t.doc)(a.firestore,"mermas",e),_={...r,fechaActualizacion:new Date};yield(0,t.updateDoc)(n,_)})()}eliminarMerma(e){var r=this;return(0,c.A)(function*(){const a=(0,t.doc)(r.firestore,"mermas",e);yield(0,t.deleteDoc)(a)})()}calcularCantidadUtil(e,r){return e-e*r/100}calcularPerdida(e,r){return e*r/100}calcularCantidadNecesaria(e,r){return e/(1-r/100)}static{this.\u0275fac=function(r){return new(r||o)(l.KVO(t.Firestore))}}static{this.\u0275prov=l.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()}}]);