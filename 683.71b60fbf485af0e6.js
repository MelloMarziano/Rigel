"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[683],{3683:(ut,k,p)=>{p.r(k),p.d(k,{InventarioPageModule:()=>mt});var E=p(7412),u=p(9417),h=p(177),w=p(5743),P=p(467),d=p(9173),j=p(8359),S=p(8032),s=p.n(S),t=p(7705),R=p(4441);function T(i,c){if(1&i&&(t.j41(0,"option",40),t.EFF(1),t.k0s()),2&i){const n=c.$implicit;t.Y8G("value",n.id),t.R7$(1),t.SpI(" ",n.nombre," ")}}function A(i,c){if(1&i&&(t.j41(0,"option",40),t.EFF(1),t.k0s()),2&i){const n=c.$implicit;t.Y8G("value",n.id),t.R7$(1),t.SpI(" ",n.nombre," ")}}function $(i,c){1&i&&t.nrm(0,"span",41)}function z(i,c){1&i&&t.nrm(0,"i",42)}function D(i,c){1&i&&(t.j41(0,"div",6)(1,"div",43)(2,"div",44)(3,"div",45),t.nrm(4,"i",46),t.k0s(),t.j41(5,"h4",47),t.EFF(6,"No hay inventario para esta fecha"),t.k0s(),t.j41(7,"p",48),t.EFF(8," Selecciona una fecha y crea un nuevo inventario o busca uno existente "),t.k0s()()()())}function G(i,c){1&i&&t.nrm(0,"span",41)}function N(i,c){1&i&&t.nrm(0,"i",90)}function B(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",6)(1,"div",43)(2,"div",82),t.nrm(3,"i",83),t.j41(4,"div",84)(5,"strong"),t.EFF(6,"Inventario en borrador"),t.k0s(),t.EFF(7," - Este inventario no est\xe1 finalizado. Recuerda guardarlo o cancelarlo. "),t.k0s(),t.j41(8,"div",85)(9,"button",86),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.cancelarInventario())}),t.nrm(10,"i",87),t.EFF(11," Cancelar "),t.k0s(),t.j41(12,"button",88),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.guardarInventario())}),t.DNE(13,G,1,0,"span",19),t.DNE(14,N,1,0,"i",89),t.EFF(15),t.k0s()()()()()}if(2&i){const n=t.XpG(2);t.R7$(9),t.Y8G("disabled",n.isSaving),t.R7$(3),t.Y8G("disabled",n.isSaving),t.R7$(1),t.Y8G("ngIf",n.isSaving),t.R7$(1),t.Y8G("ngIf",!n.isSaving),t.R7$(1),t.SpI(" ",n.isSaving?"Guardando...":"Finalizar Inventario"," ")}}function Y(i,c){if(1&i&&(t.j41(0,"div",91)(1,"div",43)(2,"div",92)(3,"span",93),t.nrm(4,"i",94),t.EFF(5," Inventario Finalizado "),t.k0s(),t.j41(6,"small",95),t.EFF(7),t.nI1(8,"date"),t.k0s()()()()),2&i){const n=t.XpG(2);t.R7$(7),t.SpI(" Finalizado el ",t.i5U(8,1,n.inventarioActual.fechaActualizacion,"dd/MM/yyyy HH:mm")," ")}}function U(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",98)(1,"div",99),t.bIt("click",function(){const r=t.eBV(n).$implicit,a=t.XpG(3);return t.Njj(a.filtrarPorFamilia(r.id||""))}),t.j41(2,"div",100)(3,"div",101)(4,"div",109),t.nrm(5,"i",110),t.k0s(),t.j41(6,"h6",104),t.EFF(7),t.k0s(),t.j41(8,"div",105)(9,"span",111),t.EFF(10),t.k0s(),t.j41(11,"small",95),t.EFF(12),t.k0s(),t.j41(13,"small",112),t.EFF(14),t.k0s()()()()()()}if(2&i){const n=c.$implicit,e=t.XpG(3);t.R7$(1),t.AVh("selected",e.familiaSeleccionada===n.id),t.R7$(6),t.JRh(n.nombre),t.R7$(3),t.SpI(" ",e.getProductosPorFamilia(n.id||"").length," productos "),t.R7$(2),t.SpI(" Sin contar: ",e.getProductosSinContarPorFamilia(n.id||"")," "),t.R7$(2),t.SpI(" COSTO FAMILIA: ",e.formatearMoneda(e.getCostoTotalPorFamilia(n.id||""))," ")}}function V(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",91)(1,"div",43)(2,"h6",47),t.nrm(3,"i",96),t.EFF(4,"Filtrar por Familia "),t.k0s(),t.j41(5,"div",97)(6,"div",98)(7,"div",99),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.filtrarPorFamilia(""))}),t.j41(8,"div",100)(9,"div",101)(10,"div",102),t.nrm(11,"i",103),t.k0s(),t.j41(12,"h6",104),t.EFF(13,"Todas las familias"),t.k0s(),t.j41(14,"div",105)(15,"span",106),t.EFF(16),t.k0s(),t.j41(17,"small",95),t.EFF(18),t.k0s(),t.j41(19,"small",107),t.EFF(20),t.k0s()()()()()(),t.DNE(21,U,15,6,"div",108),t.k0s()()()}if(2&i){const n=t.XpG(2);t.R7$(7),t.AVh("selected",""===n.familiaSeleccionada),t.R7$(9),t.SpI(" ",n.inventarioActual.productos.length," productos "),t.R7$(2),t.SpI(" Sin contar: ",n.getTotalProductosSinContar()," "),t.R7$(2),t.SpI(" COSTO TOTAL: ",n.formatearMoneda(n.getCostoTotalInventario())," "),t.R7$(1),t.Y8G("ngForOf",n.getFamiliasConProductos())("ngForTrackBy",n.trackByFamilia)}}function X(i,c){1&i&&(t.j41(0,"span",113),t.EFF(1,"Borrador"),t.k0s())}function L(i,c){1&i&&(t.j41(0,"span",114),t.EFF(1,"Finalizado"),t.k0s())}function H(i,c){if(1&i&&(t.j41(0,"span",115),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2);t.R7$(1),t.JRh(n.getNombreFamiliaSeleccionada())}}function J(i,c){if(1&i&&(t.j41(0,"span",121),t.nrm(1,"i",122),t.EFF(2),t.k0s()),2&i){const n=t.XpG(3);t.R7$(2),t.SpI(' "',n.busquedaProducto,'" ')}}function q(i,c){if(1&i&&(t.j41(0,"span",123),t.nrm(1,"i",124),t.EFF(2),t.k0s()),2&i){const n=t.XpG(3);t.R7$(2),t.SpI(" ",n.getNombreFamiliaSeleccionada()," ")}}function K(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",116)(1,"div",117)(2,"small",95),t.EFF(3,"Filtros activos:"),t.k0s(),t.DNE(4,J,3,1,"span",118),t.DNE(5,q,3,1,"span",119),t.j41(6,"button",120),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.limpiarTodosFiltros())}),t.j41(7,"small"),t.EFF(8,"Limpiar todos"),t.k0s()()()()}if(2&i){const n=t.XpG(2);t.R7$(4),t.Y8G("ngIf",n.busquedaProducto),t.R7$(1),t.Y8G("ngIf",n.familiaSeleccionada)}}function Q(i,c){if(1&i&&(t.j41(0,"small"),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&i){const n=t.XpG().$implicit;t.HbH(n.diferencia>0?"text-success":"text-danger"),t.R7$(1),t.Lme(" ",n.diferencia>0?"+":"","",t.i5U(2,4,n.diferencia,"1.1-1")," ")}}function Z(i,c){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td")(2,"div")(3,"strong"),t.EFF(4),t.k0s(),t.nrm(5,"br"),t.j41(6,"small",95),t.EFF(7),t.k0s(),t.nrm(8,"br"),t.j41(9,"span",125),t.EFF(10),t.k0s(),t.nrm(11,"br"),t.j41(12,"small",126),t.EFF(13),t.k0s()()(),t.j41(14,"td")(15,"span"),t.EFF(16),t.nI1(17,"number"),t.k0s()(),t.j41(18,"td"),t.EFF(19),t.nI1(20,"currency"),t.k0s(),t.j41(21,"td")(22,"input",127),t.bIt("ngModelChange",function(o){const a=t.eBV(n).$implicit;return t.Njj(a.stockContado=o)})("ngModelChange",function(){const r=t.eBV(n).$implicit,a=t.XpG(2);return t.Njj(a.calcularValorTotal(r))}),t.k0s(),t.DNE(23,Q,3,7,"small",128),t.k0s(),t.j41(24,"td")(25,"strong"),t.EFF(26),t.nI1(27,"currency"),t.k0s()()()}if(2&i){const n=c.$implicit,e=t.XpG(2);t.R7$(4),t.JRh(n.nombre),t.R7$(3),t.JRh(n.unidadMedida),t.R7$(3),t.JRh(n.categoria),t.R7$(3),t.JRh(n.proveedor),t.R7$(2),t.HbH(e.getStockClass(n.stockActual)),t.R7$(1),t.SpI(" ",t.i5U(17,16,n.stockActual,"1.1-1")," "),t.R7$(3),t.SpI(" ",t.ii3(20,19,n.costoUnitario,"EUR","symbol","1.2-2")," "),t.R7$(3),t.AVh("is-invalid",0!==n.diferencia),t.Y8G("ngModel",n.stockContado)("disabled","finalizado"===e.inventarioActual.estado),t.R7$(1),t.Y8G("ngIf",0!==n.diferencia),t.R7$(2),t.HbH(0!==n.diferencia?"text-danger":"text-success"),t.R7$(1),t.SpI(" ",t.ii3(27,24,n.valorTotal,"EUR","symbol","1.0-0")," ")}}function W(i,c){if(1&i&&(t.j41(0,"small",143),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&i){const n=t.XpG().$implicit;t.HbH(n.diferencia>0?"text-success":"text-danger"),t.R7$(1),t.Lme(" Diferencia: ",n.diferencia>0?"+":"","",t.i5U(2,4,n.diferencia,"1.1-1")," ")}}function tt(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",129)(1,"div",8)(2,"div",130)(3,"div",131)(4,"div",84)(5,"h6",104),t.EFF(6),t.k0s(),t.j41(7,"small",95),t.EFF(8),t.k0s()(),t.j41(9,"span",106),t.EFF(10),t.k0s()(),t.j41(11,"div",32)(12,"small",132),t.nrm(13,"i",133),t.EFF(14),t.k0s()(),t.j41(15,"div",134)(16,"div",135)(17,"div",136)(18,"small",137),t.EFF(19,"Stock Actual"),t.k0s(),t.j41(20,"span",138),t.EFF(21),t.nI1(22,"number"),t.k0s()()(),t.j41(23,"div",135)(24,"div",136)(25,"small",137),t.EFF(26,"Costo Unitario"),t.k0s(),t.j41(27,"span",138),t.EFF(28),t.nI1(29,"currency"),t.k0s()()()(),t.j41(30,"div",32)(31,"label",139),t.EFF(32,"Stock Contado"),t.k0s(),t.j41(33,"input",140),t.bIt("ngModelChange",function(o){const a=t.eBV(n).$implicit;return t.Njj(a.stockContado=o)})("ngModelChange",function(){const r=t.eBV(n).$implicit,a=t.XpG(2);return t.Njj(a.calcularValorTotal(r))}),t.k0s(),t.DNE(34,W,3,7,"small",141),t.k0s(),t.j41(35,"div",92)(36,"span",95),t.EFF(37,"Valor Total:"),t.k0s(),t.j41(38,"strong",142),t.EFF(39),t.nI1(40,"currency"),t.k0s()()()()()}if(2&i){const n=c.$implicit,e=t.XpG(2);t.R7$(6),t.SpI(" ",n.nombre," "),t.R7$(2),t.JRh(n.unidadMedida),t.R7$(2),t.JRh(n.categoria),t.R7$(4),t.SpI("",n.proveedor," "),t.R7$(6),t.HbH(e.getStockClass(n.stockActual)),t.R7$(1),t.SpI(" ",t.i5U(22,16,n.stockActual,"1.1-1")," "),t.R7$(7),t.SpI(" ",t.ii3(29,19,n.costoUnitario,"EUR","symbol","1.2-2")," "),t.R7$(5),t.AVh("is-invalid",0!==n.diferencia),t.Y8G("ngModel",n.stockContado)("disabled","finalizado"===e.inventarioActual.estado),t.R7$(1),t.Y8G("ngIf",0!==n.diferencia),t.R7$(4),t.HbH(0!==n.diferencia?"text-danger":"text-success"),t.R7$(1),t.SpI(" ",t.ii3(40,24,n.valorTotal,"EUR","symbol","1.0-0")," ")}}function nt(i,c){if(1&i){const n=t.RV6();t.j41(0,"div"),t.DNE(1,B,16,5,"div",21),t.DNE(2,Y,9,4,"div",49),t.j41(3,"div",6)(4,"div",50)(5,"div",8)(6,"div",51)(7,"div",52)(8,"span",53),t.EFF(9,"Inversi\xf3n Total"),t.k0s(),t.nrm(10,"i",54),t.k0s(),t.j41(11,"h3",55),t.EFF(12),t.nI1(13,"currency"),t.k0s()()()(),t.j41(14,"div",50)(15,"div",8)(16,"div",51)(17,"div",52)(18,"span",53),t.EFF(19,"Total Productos"),t.k0s(),t.nrm(20,"i",56),t.k0s(),t.j41(21,"h3",57),t.EFF(22),t.k0s()()()(),t.j41(23,"div",50)(24,"div",8)(25,"div",51)(26,"div",52)(27,"span",53),t.EFF(28,"Total Unidades"),t.k0s(),t.nrm(29,"i",58),t.k0s(),t.j41(30,"h3",59),t.EFF(31),t.nI1(32,"number"),t.k0s()()()(),t.j41(33,"div",50)(34,"div",8)(35,"div",51)(36,"div",52)(37,"span",53),t.EFF(38,"Costo Promedio"),t.k0s(),t.nrm(39,"i",60),t.k0s(),t.j41(40,"h3",61),t.EFF(41),t.nI1(42,"currency"),t.k0s()()()()(),t.DNE(43,V,22,7,"div",49),t.j41(44,"div",6)(45,"div",43)(46,"div",8)(47,"div",62)(48,"div",63)(49,"div")(50,"h5",64),t.EFF(51),t.DNE(52,X,2,0,"span",65),t.DNE(53,L,2,0,"span",66),t.DNE(54,H,2,1,"span",67),t.k0s()(),t.j41(55,"div",68)(56,"div",69)(57,"input",70),t.bIt("ngModelChange",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.busquedaProducto=o)})("input",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.filtrarProductosPorBusqueda())}),t.k0s(),t.nrm(58,"i",71),t.k0s(),t.j41(59,"button",72),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.limpiarBusqueda())}),t.nrm(60,"i",73),t.k0s()()(),t.DNE(61,K,9,2,"div",74),t.k0s(),t.j41(62,"div",75)(63,"div",76)(64,"table",77)(65,"thead",78)(66,"tr")(67,"th"),t.EFF(68,"PRODUCTO"),t.k0s(),t.j41(69,"th"),t.EFF(70,"STOCK ACTUAL"),t.k0s(),t.j41(71,"th"),t.EFF(72,"COSTO UNITARIO"),t.k0s(),t.j41(73,"th"),t.EFF(74,"STOCK CONTADO"),t.k0s(),t.j41(75,"th"),t.EFF(76,"VALOR TOTAL"),t.k0s()()(),t.j41(77,"tbody"),t.DNE(78,Z,28,29,"tr",79),t.k0s()()(),t.j41(79,"div",80),t.DNE(80,tt,41,29,"div",81),t.k0s()()()()()()}if(2&i){const n=t.XpG();t.R7$(1),t.Y8G("ngIf","borrador"===n.inventarioActual.estado),t.R7$(1),t.Y8G("ngIf","finalizado"===n.inventarioActual.estado),t.R7$(10),t.SpI(" ",t.ii3(13,19,n.inventarioActual.inversionTotal,"EUR","symbol","1.0-0")," "),t.R7$(10),t.SpI(" ",n.inventarioActual.totalProductos," "),t.R7$(9),t.SpI(" ",t.i5U(32,24,n.inventarioActual.totalUnidades,"1.1-1")," "),t.R7$(10),t.SpI(" ",t.ii3(42,27,n.inventarioActual.costoPromedio,"EUR","symbol","1.0-0")," "),t.R7$(2),t.Y8G("ngIf",n.familiasDisponibles.length>0),t.R7$(8),t.Lme(" Productos del Inventario (",n.productosFiltrados.length," de ",n.inventarioActual.productos.length,") "),t.R7$(1),t.Y8G("ngIf","borrador"===n.inventarioActual.estado),t.R7$(1),t.Y8G("ngIf","finalizado"===n.inventarioActual.estado),t.R7$(1),t.Y8G("ngIf",n.familiaSeleccionada),t.R7$(3),t.Y8G("ngModel",n.busquedaProducto),t.R7$(2),t.Y8G("disabled",!n.busquedaProducto),t.R7$(2),t.Y8G("ngIf",n.busquedaProducto||n.familiaSeleccionada),t.R7$(17),t.Y8G("ngForOf",n.productosFiltrados)("ngForTrackBy",n.trackByProducto),t.R7$(2),t.Y8G("ngForOf",n.productosFiltrados)("ngForTrackBy",n.trackByProducto)}}function et(i,c){1&i&&(t.j41(0,"div",6)(1,"div",43)(2,"div",44)(3,"div",144)(4,"span",145),t.EFF(5,"Cargando..."),t.k0s()(),t.j41(6,"h4",47),t.EFF(7,"Creando inventario..."),t.k0s(),t.j41(8,"p",95),t.EFF(9," Cargando productos y preparando el inventario para la fecha seleccionada "),t.k0s()()()())}function ot(i,c){if(1&i&&(t.j41(0,"div",154)(1,"small",132),t.EFF(2),t.k0s()()),2&i){const n=t.XpG().$implicit,e=t.XpG();t.R7$(2),t.Lme(" ",n.familias.length," familias: ",e.getFamiliasNombres(n.familias)," ")}}function it(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",146)(1,"div",147),t.bIt("click",function(){const r=t.eBV(n).$implicit,a=t.XpG();return t.Njj(a.seleccionarCategoria(r.id||""))}),t.j41(2,"div",9)(3,"div",148)(4,"div",149),t.nrm(5,"i"),t.k0s(),t.j41(6,"div",84)(7,"h6",150),t.EFF(8),t.k0s(),t.j41(9,"small",95),t.EFF(10),t.k0s(),t.DNE(11,ot,3,2,"div",151),t.k0s(),t.j41(12,"div",152),t.nrm(13,"i",153),t.k0s()()()()()}if(2&i){const n=c.$implicit,e=t.XpG();t.R7$(1),t.AVh("selected",e.categoriaSeleccionada===n.id),t.R7$(3),t.xc7("background-color",n.colorFondo),t.R7$(1),t.HbH("bi "+n.icono+" text-white"),t.R7$(3),t.JRh(n.nombre),t.R7$(2),t.SpI("",e.getTotalProductosCategoria(n.id)," productos"),t.R7$(1),t.Y8G("ngIf",n.familias&&n.familias.length>0),t.R7$(2),t.HbH(e.categoriaSeleccionada===n.id?"bi-check-circle-fill text-success":"bi-circle text-muted")}}function rt(i,c){if(1&i&&(t.j41(0,"span",162),t.EFF(1),t.k0s()),2&i){const n=c.$implicit,e=t.XpG(3);t.R7$(1),t.Lme(" ",n.nombre," (",e.getProductosPorFamiliaEnCategoria(n.id||"").length," productos) ")}}function at(i,c){if(1&i&&(t.j41(0,"div",159)(1,"h6",156),t.EFF(2,"Familias incluidas:"),t.k0s(),t.j41(3,"div",160),t.DNE(4,rt,2,2,"span",161),t.k0s()()),2&i){const n=t.XpG(2);t.R7$(4),t.Y8G("ngForOf",n.getFamiliasCategoria())}}function ct(i,c){if(1&i&&(t.j41(0,"div",43)(1,"div",155)(2,"h6",156),t.nrm(3,"i",157),t.EFF(4," Categor\xeda seleccionada: "),t.j41(5,"strong"),t.EFF(6),t.k0s()(),t.j41(7,"p",156),t.EFF(8," Se incluir\xe1n "),t.j41(9,"strong"),t.EFF(10),t.k0s(),t.EFF(11," productos de esta categor\xeda en el inventario. "),t.k0s(),t.DNE(12,at,5,1,"div",158),t.k0s()()),2&i){const n=t.XpG();t.R7$(6),t.JRh(n.getNombreCategoriaSeleccionada()),t.R7$(4),t.JRh(n.getTotalProductosCategoria()),t.R7$(2),t.Y8G("ngIf",n.getFamiliasCategoria().length>0)}}function dt(i,c){1&i&&t.nrm(0,"span",41)}function st(i,c){1&i&&t.nrm(0,"i",163)}const lt=[{path:"",component:(()=>{class i{constructor(n,e){this.firestore=n,this.authService=e,this.isLoading=!1,this.isCreatingInventory=!1,this.isSaving=!1,this.inventarioActual=null,this.productos=[],this.categorias=[],this.proveedores=[],this.fechaSeleccionada=new Date,this.fechaFiltro=new u.MJ((new Date).toISOString().split("T")[0]),this.categoriaFiltro=new u.MJ(""),this.proveedorFiltro=new u.MJ(""),this.categoriaSeleccionada="",this.familiasDisponibles=[],this.familiaSeleccionada="",this.productosFiltrados=[],this.busquedaProducto="",this.productosSinFiltrar=[],this.subscriptions=new j.yU}convertirFecha(n){if(n){if(n instanceof Date)return n;if("object"==typeof n&&"toDate"in n)return n.toDate();if("string"==typeof n)return new Date(n)}}limpiarObjetoParaFirebase(n){const e={};for(const[o,r]of Object.entries(n))null!=r&&(e[o]=Array.isArray(r)?r.map(a=>"object"==typeof a?this.limpiarObjetoParaFirebase(a):a):"object"==typeof r&&null!==r?this.limpiarObjetoParaFirebase(r):r);return e}ngOnInit(){this.authService.getCurrentUser()?(this.cargarDatosIniciales(),this.setupFiltros(),this.buscarInventario()):s().fire("Error","Usuario no autenticado","error")}ngOnDestroy(){this.subscriptions.unsubscribe()}setupFiltros(){this.subscriptions.add(this.fechaFiltro.valueChanges.subscribe(n=>{if(n)try{this.fechaSeleccionada=new Date(n)}catch{this.fechaSeleccionada=new Date}}))}cargarDatosIniciales(){var n=this;return(0,P.A)(function*(){try{const e=(0,d.collection)(n.firestore,"productos");n.subscriptions.add((0,d.collectionData)(e,{idField:"id"}).subscribe({next:a=>{n.productos=a.filter(f=>!f.esCombinado)},error:a=>{s().fire("Error","Error al cargar productos","error")}}));const o=(0,d.collection)(n.firestore,"categorias");n.subscriptions.add((0,d.collectionData)(o,{idField:"id"}).subscribe({next:a=>{n.categorias=a,n.inventarioActual&&(n.configurarFamiliasDisponibles(),n.aplicarFiltroFamilia())},error:a=>{s().fire("Error","Error al cargar categor\xedas","error")}}));const r=(0,d.collection)(n.firestore,"proveedores");n.subscriptions.add((0,d.collectionData)(r,{idField:"id"}).subscribe({next:a=>{n.proveedores=a},error:a=>{s().fire("Error","Error al cargar proveedores","error")}}))}catch{s().fire("Error","Error al cargar los datos iniciales","error")}})()}buscarInventario(){var n=this;return(0,P.A)(function*(){n.isLoading=!0;try{const e=n.fechaSeleccionada.toISOString().split("T")[0],o=(0,d.collection)(n.firestore,"inventarios"),r=(0,d.query)(o,(0,d.where)("fecha","==",e)),a=yield(0,d.getDocs)(r);if(a.empty)n.inventarioActual=null;else{const f=a.docs.filter(m=>!m.data().eliminado);if(f.length>0){const m=f.filter(v=>"borrador"===v.data().estado),_=m.length>0?m[0]:f[0];n.inventarioActual={id:_.id,..._.data()},n.inventarioActual.fecha=n.convertirFecha(n.inventarioActual.fecha)||n.inventarioActual.fecha,n.inventarioActual.fechaActualizacion=n.convertirFecha(n.inventarioActual.fechaActualizacion),n.inventarioActual.fechaCreacion=n.convertirFecha(n.inventarioActual.fechaCreacion),"borrador"===n.inventarioActual.estado&&setTimeout(()=>{const b=n.categorias.find(O=>O.id===n.inventarioActual?.categoriaId)?.nombre||"Sin categor\xeda";s().fire({title:"Inventario en borrador encontrado",text:`Se ha cargado un inventario en borrador de ${b} para esta fecha. Puedes continuar edit\xe1ndolo.`,icon:"info",confirmButtonText:"Continuar",timer:3e3,timerProgressBar:!0})},1e3)}else n.inventarioActual=null}n.inventarioActual&&(n.configurarFamiliasDisponibles(),n.aplicarFiltroFamilia())}catch{n.inventarioActual=null}finally{n.isLoading=!1}})()}crearNuevoInventario(){var n=this;return(0,P.A)(function*(){if(!n.inventarioActual||(yield s().fire({title:"\xbfCrear nuevo inventario?",text:"Ya existe un inventario para esta fecha. \xbfDeseas reemplazarlo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, crear nuevo",cancelButtonText:"Cancelar"})).isConfirmed){n.isCreatingInventory=!0;try{let e=[...n.productos];const o=n.categoriaFiltro.value,r=n.proveedorFiltro.value;o&&(e=e.filter(g=>g.categoriaId===o)),r&&(e=e.filter(g=>g.proveedorId===r));const a=e.map(g=>{const C=n.categorias.find(I=>I.id===g.categoriaId),x=n.proveedores.find(I=>I.id===g.proveedorId);return{productoId:g.id,nombre:g.nombre,categoria:C?.nombre||"Sin categor\xeda",proveedor:x?.nombre||"Sin proveedor",stockActual:g.stock||0,stockContado:null,costoUnitario:g.costo,valorTotal:(g.stock||0)*g.costo,unidadMedida:g.unidadMedida,diferencia:0}}),f=a.reduce((g,C)=>g+C.valorTotal,0),m=a.length,_=a.reduce((g,C)=>g+(C.stockContado??0),0),v=_>0?f/_:0,b={fecha:n.fechaSeleccionada.toISOString().split("T")[0],categoriaId:o||void 0,proveedorId:r||void 0,productos:a,inversionTotal:f,totalProductos:m,totalUnidades:_,costoPromedio:v,fechaCreacion:(0,d.serverTimestamp)(),usuarioId:n.authService.getCurrentUser()?.id,estado:"borrador"},O=n.limpiarObjetoParaFirebase(b),F=(0,d.collection)(n.firestore,"inventarios"),y=yield(0,d.addDoc)(F,O);n.inventarioActual={id:y.id,fecha:n.fechaSeleccionada,categoriaId:o||void 0,proveedorId:r||void 0,productos:a,inversionTotal:f,totalProductos:m,totalUnidades:_,costoPromedio:v,fechaCreacion:new Date,usuarioId:n.authService.getCurrentUser()?.id,estado:"borrador"},o&&n.categorias.find(g=>g.id===o),s().fire("\xa1Creado!",`Inventario creado con ${m} productos. Puedes editarlo y luego finalizarlo.`,"success")}catch{s().fire("Error","Error al crear el inventario","error")}finally{n.isCreatingInventory=!1}}})()}recalcularTotales(){this.inventarioActual&&(this.inventarioActual.inversionTotal=this.inventarioActual.productos.reduce((n,e)=>n+e.valorTotal,0),this.inventarioActual.totalUnidades=this.inventarioActual.productos.reduce((n,e)=>n+(e.stockContado??0),0),this.inventarioActual.costoPromedio=this.inventarioActual.totalUnidades>0?this.inventarioActual.inversionTotal/this.inventarioActual.totalUnidades:0)}guardarInventario(){var n=this;return(0,P.A)(function*(){if(n.inventarioActual&&("borrador"!==n.inventarioActual.estado||(yield s().fire({title:"\xbfFinalizar inventario?",text:"Una vez finalizado, no podr\xe1s editarlo. \xbfEst\xe1s seguro?",icon:"question",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, finalizar",cancelButtonText:"Cancelar"})).isConfirmed)){n.isSaving=!0;try{const e={...n.inventarioActual,fecha:n.fechaSeleccionada.toISOString().split("T")[0],fechaActualizacion:(0,d.serverTimestamp)(),estado:"finalizado"},o=n.limpiarObjetoParaFirebase(e);if(n.inventarioActual.id){const r=(0,d.doc)(n.firestore,"inventarios",n.inventarioActual.id);yield(0,d.updateDoc)(r,o),n.inventarioActual.estado="finalizado",n.inventarioActual.fechaActualizacion=new Date}else{const r=(0,d.collection)(n.firestore,"inventarios"),a=yield(0,d.addDoc)(r,o);n.inventarioActual.id=a.id,n.inventarioActual.estado="finalizado"}s().fire("\xa1Finalizado!","Inventario finalizado exitosamente","success")}catch{s().fire("Error","Error al finalizar el inventario","error")}finally{n.isSaving=!1}}})()}getStockClass(n){return n<=0?"text-danger fw-bold":n<=5?"text-warning fw-bold":"text-success fw-bold"}trackByProducto(n,e){return e.productoId}cancelarInventario(){var n=this;return(0,P.A)(function*(){if(n.inventarioActual?.id){if((yield s().fire({title:"\xbfCancelar inventario?",text:"Se eliminar\xe1 completamente el inventario en borrador. Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, eliminar",cancelButtonText:"No cancelar"})).isConfirmed){n.isSaving=!0;try{const o=(0,d.doc)(n.firestore,"inventarios",n.inventarioActual.id);yield(0,d.deleteDoc)(o),n.inventarioActual=null,n.familiasDisponibles=[],n.familiaSeleccionada="",n.productosFiltrados=[],s().fire({title:"\xa1Eliminado!",text:"El inventario ha sido eliminado completamente",icon:"success",timer:2e3,timerProgressBar:!0})}catch{s().fire("Error","Error al eliminar el inventario","error")}finally{n.isSaving=!1}}}else s().fire("Error","No hay inventario para cancelar","error")})()}calcularValorTotal(n){if("finalizado"===this.inventarioActual?.estado)return;const e=n.stockContado??0;n.diferencia=e-n.stockActual,n.valorTotal=e*n.costoUnitario,this.recalcularTotales(),"borrador"===this.inventarioActual?.estado&&this.autoGuardarBorrador()}autoGuardarBorrador(){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(()=>{this.guardarBorrador()},2e3)}guardarBorrador(){var n=this;return(0,P.A)(function*(){if(n.inventarioActual?.id&&"borrador"===n.inventarioActual.estado)try{const e=(0,d.doc)(n.firestore,"inventarios",n.inventarioActual.id);yield(0,d.updateDoc)(e,{productos:n.inventarioActual.productos,inversionTotal:n.inventarioActual.inversionTotal,totalUnidades:n.inventarioActual.totalUnidades,costoPromedio:n.inventarioActual.costoPromedio,fechaActualizacion:(0,d.serverTimestamp)()})}catch{}})()}abrirModalNuevoInventario(){this.categoriaSeleccionada="";const n=document.getElementById("modalNuevoInventario");n&&(this.modal=new bootstrap.Modal(n),this.modal.show())}cerrarModalNuevoInventario(){this.modal&&this.modal.hide(),this.categoriaSeleccionada=""}seleccionarCategoria(n){this.categoriaSeleccionada=n}getNombreCategoriaSeleccionada(){return this.categorias.find(e=>e.id===this.categoriaSeleccionada)?.nombre||""}getTotalProductosCategoria(n){const e=n||this.categoriaSeleccionada;return e?this.productos.filter(o=>o.categoriaId===e&&!o.esCombinado).length:0}getFamiliasCategoria(){return this.categorias.find(e=>e.id===this.categoriaSeleccionada)?.familias||[]}getProductosPorFamiliaEnCategoria(n){return this.productos.filter(e=>e.categoriaId===this.categoriaSeleccionada&&e.familiaId===n&&!e.esCombinado)}getFamiliasNombres(n){return n&&0!==n.length?n.map(e=>e.nombre).join(", "):""}crearInventarioConSeleccion(){var n=this;return(0,P.A)(function*(){if(n.categoriaSeleccionada)if(0!==n.productos.length)if(0!==n.categorias.length){if(n.inventarioActual){const o="borrador"===n.inventarioActual.estado?"en borrador":"finalizado";if(!(yield s().fire({title:"\xbfCrear nuevo inventario?",text:`Ya existe un inventario ${o} para esta fecha. \xbfDeseas reemplazarlo?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, reemplazar",cancelButtonText:"Cancelar"})).isConfirmed)return;if(n.inventarioActual.id)try{const a=(0,d.doc)(n.firestore,"inventarios",n.inventarioActual.id);yield(0,d.deleteDoc)(a)}catch(a){console.error("Error eliminando inventario anterior:",a)}}n.isCreatingInventory=!0;try{const e=n.authService.getCurrentUser();if(!e?.id)return void s().fire("Error","Usuario no autenticado","error");const o=n.productos.filter(l=>l.categoriaId===n.categoriaSeleccionada&&!l.esCombinado);if(0===o.length)return void s().fire("Error","No hay productos disponibles en la categor\xeda seleccionada.","error");const r=o.map(l=>{const M=n.categorias.find(x=>x.id===l.categoriaId),g=n.proveedores.find(x=>x.id===l.proveedorId),C={productoId:l.id||"",nombre:l.nombre||"",categoria:M?.nombre||"Sin categor\xeda",proveedor:g?.nombre||"Sin proveedor",stockActual:l.stock||0,stockContado:null,costoUnitario:l.costo||0,valorTotal:(l.stock||0)*(l.costo||0),unidadMedida:l.unidadMedida||"",diferencia:0};return l.familiaId&&(C.familiaId=l.familiaId),C}),a=r.reduce((l,M)=>l+M.valorTotal,0),f=r.length,m=r.reduce((l,M)=>l+(M.stockContado??0),0),_=m>0?a/m:0,v={fecha:n.fechaSeleccionada.toISOString().split("T")[0],categoriaId:n.categoriaSeleccionada||"",productos:r,inversionTotal:a||0,totalProductos:f||0,totalUnidades:m||0,costoPromedio:_||0,fechaCreacion:(0,d.serverTimestamp)(),usuarioId:e.id||"",estado:"borrador"},b=n.limpiarObjetoParaFirebase(v),O=(0,d.collection)(n.firestore,"inventarios"),F=yield(0,d.addDoc)(O,b);n.inventarioActual={id:F.id,fecha:n.fechaSeleccionada,categoriaId:n.categoriaSeleccionada,productos:r,inversionTotal:a,totalProductos:f,totalUnidades:m,costoPromedio:_,fechaCreacion:new Date,usuarioId:e.id,estado:"borrador"},n.configurarFamiliasDisponibles(),n.aplicarFiltroFamilia(),n.cerrarModalNuevoInventario();const y=n.getNombreCategoriaSeleccionada();s().fire("\xa1Creado!",`Inventario de ${y} creado con ${f} productos. Puedes editarlo y luego finalizarlo.`,"success")}catch(e){let o="Error al crear el inventario";e?.message&&(o+=": "+e.message),s().fire("Error",o,"error")}finally{n.isCreatingInventory=!1}}else s().fire("Error","No se han cargado las categor\xedas. Intenta recargar la p\xe1gina.","error");else s().fire("Error","No se han cargado los productos. Intenta recargar la p\xe1gina.","error");else s().fire("Error","Selecciona una categor\xeda para el inventario","error")})()}configurarFamiliasDisponibles(){if(!this.inventarioActual)return;const n=new Set,e=new Map,o=this.categorias.find(r=>r.id===this.inventarioActual?.categoriaId);o?.familias&&o.familias.forEach(r=>{r.id&&!n.has(r.id)&&(n.add(r.id),e.set(r.id,r))}),this.familiasDisponibles=Array.from(e.values())}filtrarPorFamilia(n){this.familiaSeleccionada=n,this.aplicarFiltroFamilia()}aplicarFiltroFamilia(){this.inventarioActual&&(this.productosSinFiltrar=[...this.inventarioActual.productos],this.productosFiltrados=this.familiaSeleccionada?this.inventarioActual.productos.filter(n=>this.productos.find(o=>o.id===n.productoId)?.familiaId===this.familiaSeleccionada):[...this.inventarioActual.productos],this.busquedaProducto.trim()&&this.filtrarProductosPorBusqueda())}getProductosPorFamilia(n){return this.inventarioActual?this.inventarioActual.productos.filter(e=>this.productos.find(r=>r.id===e.productoId)?.familiaId===n):[]}getNombreFamiliaSeleccionada(){return this.familiasDisponibles.find(e=>e.id===this.familiaSeleccionada)?.nombre||""}trackByFamilia(n,e){return e.id||""}getProductosSinContarPorFamilia(n){return this.inventarioActual?this.getProductosPorFamilia(n).filter(o=>null==o.stockContado).length:0}getCostoTotalPorFamilia(n){return this.inventarioActual?this.getProductosPorFamilia(n).reduce((o,r)=>o+(r.stockContado??0)*r.costoUnitario,0):0}formatearMoneda(n){return n.toLocaleString("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0})}getTotalProductosSinContar(){return this.inventarioActual?this.inventarioActual.productos.filter(n=>null==n.stockContado).length:0}getCostoTotalInventario(){return this.inventarioActual?this.inventarioActual.productos.reduce((n,e)=>n+(e.stockContado??0)*e.costoUnitario,0):0}getFamiliasConProductos(){return this.familiasDisponibles?this.familiasDisponibles.filter(n=>this.getProductosPorFamilia(n.id||"").length>0):[]}filtrarProductosPorBusqueda(){if(!this.inventarioActual)return;0===this.productosSinFiltrar.length&&(this.productosSinFiltrar=[...this.inventarioActual.productos]);let n=this.productosSinFiltrar;if(this.familiaSeleccionada&&(n=this.productosSinFiltrar.filter(o=>this.productos.find(a=>a.id===o.productoId)?.familiaId===this.familiaSeleccionada)),!this.busquedaProducto.trim())return void(this.productosFiltrados=[...n]);const e=this.busquedaProducto.toLowerCase().trim();this.productosFiltrados=n.filter(o=>{const r=this.productos.find(b=>b.id===o.productoId);if(!r)return!1;const a=r.nombre.toLowerCase().includes(e),m=this.categorias.find(b=>b.id===r.categoriaId)?.nombre.toLowerCase().includes(e)||!1,v=this.proveedores.find(b=>b.id===r.proveedorId)?.nombre.toLowerCase().includes(e)||!1;return a||m||v})}limpiarBusqueda(){this.busquedaProducto="",this.filtrarProductosPorBusqueda()}limpiarTodosFiltros(){this.busquedaProducto="",this.familiaSeleccionada="",this.aplicarFiltroFamilia()}static{this.\u0275fac=function(e){return new(e||i)(t.rXU(d.Firestore),t.rXU(R.u))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-inventario-page"]],decls:67,vars:23,consts:[[1,"container-fluid"],[1,"row"],[1,"col-8"],[1,"col","text-end"],[1,"btn","btn-danger",3,"disabled","click"],[1,"bi","bi-plus-lg","me-2"],[1,"row","mt-4"],[1,"col"],[1,"card","border-0","shadow-sm"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-12","col-md-3","mb-2","mb-md-0"],[1,"form-label","small","text-muted"],["type","date",1,"form-control",3,"formControl","value"],[1,"form-select",3,"formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-md-3","text-end","mt-4"],[1,"btn","btn-outline-danger","w-100",3,"disabled","click"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["class","bi bi-search me-2",4,"ngIf"],["class","row mt-4",4,"ngIf"],[4,"ngIf"],["id","modalNuevoInventario","tabindex","-1","data-bs-backdrop","static",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-clipboard-check","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-12","mb-4"],[1,"mb-3"],[1,"bi","bi-tags","me-2"],["class","col-md-6 mb-3",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["class","bi bi-plus me-2",4,"ngIf"],[3,"value"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-search","me-2"],[1,"col-12"],[1,"text-center","py-5"],[1,"mb-4"],[1,"bi","bi-archive","text-muted",2,"font-size","4rem"],[1,"text-muted","mb-3"],[1,"text-muted","mb-4"],["class","row mt-3",4,"ngIf"],[1,"col-12","col-md-3","mb-3"],[1,"card-body","text-center"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"text-muted","small"],[1,"bi","bi-currency-euro","text-danger"],[1,"text-danger","fw-bold","mb-0"],[1,"bi","bi-box","text-info"],[1,"text-info","fw-bold","mb-0"],[1,"bi","bi-graph-up","text-success"],[1,"text-success","fw-bold","mb-0"],[1,"bi","bi-calculator","text-warning"],[1,"text-warning","fw-bold","mb-0"],[1,"card-header","bg-white","border-0","py-3"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center","gap-3"],[1,"mb-0"],["class","badge bg-warning ms-2",4,"ngIf"],["class","badge bg-success ms-2",4,"ngIf"],["class","badge bg-info ms-2",4,"ngIf"],[1,"d-flex","align-items-center","gap-2"],[1,"position-relative",2,"min-width","300px"],["type","text","placeholder","Buscar producto por nombre...","autocomplete","off",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","input"],[1,"bi","bi-search","position-absolute","top-50","end-0","translate-middle-y","me-3","text-muted"],["type","button","title","Limpiar b\xfasqueda",1,"btn","btn-outline-secondary","btn-sm",3,"disabled","click"],[1,"bi","bi-x-lg"],["class","mt-2",4,"ngIf"],[1,"card-body","p-0"],[1,"table-responsive","d-none","d-md-block"],[1,"table","table-hover","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"mobile-cards-container","d-block","d-md-none","p-3"],["class","product-card mb-3",4,"ngFor","ngForOf","ngForTrackBy"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"flex-grow-1"],[1,"ms-3"],[1,"btn","btn-outline-secondary","btn-sm","me-2",3,"disabled","click"],[1,"bi","bi-x-lg","me-1"],[1,"btn","btn-danger","btn-sm",3,"disabled","click"],["class","bi bi-save me-1",4,"ngIf"],[1,"bi","bi-save","me-1"],[1,"row","mt-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"badge","bg-success","fs-6"],[1,"bi","bi-check-circle","me-1"],[1,"text-muted"],[1,"bi","bi-funnel","me-2"],[1,"row","g-3"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card","familia-filter-card","cursor-pointer","h-100",3,"click"],[1,"card-body","text-center","p-3"],[1,"d-flex","flex-column","align-items-center"],[1,"rounded-circle","bg-primary","bg-opacity-10","p-3","mb-2"],[1,"bi","bi-grid-3x3-gap","text-primary","fs-4"],[1,"card-title","mb-1","fw-bold"],[1,"d-flex","flex-column","gap-1"],[1,"badge","bg-primary","rounded-pill"],[1,"text-success","fw-bold"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf","ngForTrackBy"],[1,"rounded-circle","bg-info","bg-opacity-10","p-3","mb-2"],[1,"bi","bi-collection","text-info","fs-4"],[1,"badge","bg-info","rounded-pill"],[1,"text-success"],[1,"badge","bg-warning","ms-2"],[1,"badge","bg-success","ms-2"],[1,"badge","bg-info","ms-2"],[1,"mt-2"],[1,"d-flex","flex-wrap","gap-2","align-items-center"],["class","badge bg-primary",4,"ngIf"],["class","badge bg-info",4,"ngIf"],["type","button",1,"btn","btn-link","btn-sm","p-0","text-decoration-none",3,"click"],[1,"badge","bg-primary"],[1,"bi","bi-search","me-1"],[1,"badge","bg-info"],[1,"bi","bi-collection","me-1"],[1,"badge","bg-primary","rounded-pill","mt-1"],[1,"text-info","mt-1"],["type","number","step","0.1","min","0","placeholder","Ingrese cantidad contada",1,"form-control","form-control-sm",3,"ngModel","disabled","ngModelChange"],[3,"class",4,"ngIf"],[1,"product-card","mb-3"],[1,"card-body","p-3"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[1,"text-info"],[1,"bi","bi-building","me-1"],[1,"row","g-2","mb-3"],[1,"col-6"],[1,"bg-light","rounded","p-2","text-center"],[1,"text-muted","d-block"],[1,"fw-bold"],[1,"form-label","small","text-muted","mb-1"],["type","number","step","0.1","min","0","placeholder","Ingrese cantidad contada",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","d-block mt-1",3,"class",4,"ngIf"],[1,"fs-5"],[1,"d-block","mt-1"],["role","status",1,"spinner-border","text-danger","mb-3"],[1,"visually-hidden"],[1,"col-md-6","mb-3"],[1,"card","h-100","cursor-pointer","categoria-card",3,"click"],[1,"d-flex","align-items-center"],[1,"rounded-circle","p-2","me-3"],[1,"mb-1"],["class","mt-1",4,"ngIf"],[1,"ms-2"],[1,"bi","fs-5"],[1,"mt-1"],[1,"alert","alert-success"],[1,"mb-2"],[1,"bi","bi-check-circle","me-2"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-primary","style","font-size: 0.85rem; padding: 6px 12px",4,"ngFor","ngForOf"],[1,"badge","bg-primary",2,"font-size","0.85rem","padding","6px 12px"],[1,"bi","bi-plus","me-2"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t.EFF(4,"Gesti\xf3n de Inventario"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Control y conteo de stock por fechas"),t.k0s()(),t.j41(7,"div",3)(8,"button",4),t.bIt("click",function(){return o.abrirModalNuevoInventario()}),t.nrm(9,"i",5),t.EFF(10," Nuevo Inventario "),t.k0s()()(),t.j41(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11)(17,"label",12),t.EFF(18,"Fecha del Inventario"),t.k0s(),t.nrm(19,"input",13),t.nI1(20,"date"),t.k0s(),t.j41(21,"div",11)(22,"label",12),t.EFF(23,"Categor\xeda"),t.k0s(),t.j41(24,"select",14)(25,"option",15),t.EFF(26,"Todas las categor\xedas"),t.k0s(),t.DNE(27,T,2,2,"option",16),t.k0s()(),t.j41(28,"div",11)(29,"label",12),t.EFF(30,"Proveedor"),t.k0s(),t.j41(31,"select",14)(32,"option",15),t.EFF(33,"Todos los proveedores"),t.k0s(),t.DNE(34,A,2,2,"option",16),t.k0s()(),t.j41(35,"div",17)(36,"button",18),t.bIt("click",function(){return o.buscarInventario()}),t.DNE(37,$,1,0,"span",19),t.DNE(38,z,1,0,"i",20),t.EFF(39),t.k0s()()()()()()(),t.DNE(40,D,9,0,"div",21),t.DNE(41,nt,81,32,"div",22),t.DNE(42,et,10,0,"div",21),t.k0s(),t.j41(43,"div",23)(44,"div",24)(45,"div",25)(46,"div",26)(47,"h5",27),t.nrm(48,"i",28),t.EFF(49," Crear Nuevo Inventario "),t.k0s(),t.j41(50,"button",29),t.bIt("click",function(){return o.cerrarModalNuevoInventario()}),t.k0s()(),t.j41(51,"div",30)(52,"div",1)(53,"div",31)(54,"h6",32),t.nrm(55,"i",33),t.EFF(56," Selecciona la categor\xeda para el inventario: "),t.k0s(),t.j41(57,"div",1),t.DNE(58,it,14,11,"div",34),t.k0s()(),t.DNE(59,ct,13,3,"div",35),t.k0s()(),t.j41(60,"div",36)(61,"button",37),t.bIt("click",function(){return o.cerrarModalNuevoInventario()}),t.EFF(62," Cancelar "),t.k0s(),t.j41(63,"button",38),t.bIt("click",function(){return o.crearInventarioConSeleccion()}),t.DNE(64,dt,1,0,"span",19),t.DNE(65,st,1,0,"i",39),t.EFF(66),t.k0s()()()()()),2&e&&(t.R7$(8),t.Y8G("disabled",o.isLoading),t.R7$(11),t.Y8G("formControl",o.fechaFiltro)("value",t.i5U(20,20,o.fechaSeleccionada,"yyyy-MM-dd")),t.R7$(5),t.Y8G("formControl",o.categoriaFiltro),t.R7$(3),t.Y8G("ngForOf",o.categorias),t.R7$(4),t.Y8G("formControl",o.proveedorFiltro),t.R7$(3),t.Y8G("ngForOf",o.proveedores),t.R7$(2),t.Y8G("disabled",o.isLoading),t.R7$(1),t.Y8G("ngIf",o.isLoading),t.R7$(1),t.Y8G("ngIf",!o.isLoading),t.R7$(1),t.SpI(" ",o.isLoading?"Buscando...":"Buscar"," "),t.R7$(1),t.Y8G("ngIf",!o.inventarioActual&&!o.isLoading),t.R7$(1),t.Y8G("ngIf",o.inventarioActual&&!o.isCreatingInventory),t.R7$(1),t.Y8G("ngIf",o.isCreatingInventory),t.R7$(16),t.Y8G("ngForOf",o.categorias),t.R7$(1),t.Y8G("ngIf",o.categoriaSeleccionada),t.R7$(4),t.Y8G("disabled",!o.categoriaSeleccionada||o.isCreatingInventory),t.R7$(1),t.Y8G("ngIf",o.isCreatingInventory),t.R7$(1),t.Y8G("ngIf",!o.isCreatingInventory),t.R7$(1),t.SpI(" ",o.isCreatingInventory?"Creando...":"Crear Inventario"," "))},dependencies:[h.Sq,h.bT,u.xH,u.y7,u.me,u.Q0,u.wz,u.BC,u.VZ,u.l_,u.vS,h.QX,h.oe,h.vh],styles:['.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:#6c757d;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:.875rem}.form-control-sm[_ngcontent-%COMP%]{font-size:.875rem}.badge[_ngcontent-%COMP%]{font-size:.75rem}.text-danger.fw-bold[_ngcontent-%COMP%]{color:#dc3545!important}.text-warning.fw-bold[_ngcontent-%COMP%]{color:#ffc107!important}.text-success.fw-bold[_ngcontent-%COMP%]{color:#198754!important}.card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}@media (max-width: 768px){.form-control-sm[_ngcontent-%COMP%]{width:80px;font-size:.75rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.65rem;padding:.5rem .25rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem .25rem}.card-header[_ngcontent-%COMP%]{padding:.75rem 1rem}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}.card-header[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}}@media (max-width: 576px){.form-control-sm[_ngcontent-%COMP%]{width:60px;font-size:.7rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.25rem .1rem;font-size:.7rem}}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.family-filter-cards[_ngcontent-%COMP%]{margin-bottom:1.5rem}.family-filter-cards[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:600;margin-bottom:1rem;font-size:1.1rem}.family-filter-cards[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}@media (max-width: 768px){.family-filter-cards[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}}@media (min-width: 1200px){.family-filter-cards[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(320px,1fr))}}.family-filter-cards[_ngcontent-%COMP%]   .family-card[_ngcontent-%COMP%]{background:white;border:2px solid #e9ecef;border-radius:12px;padding:1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 4px #0000000d}.family-filter-cards[_ngcontent-%COMP%]   .family-card[_ngcontent-%COMP%]:hover{border-color:var(--ion-color-primary);box-shadow:0 4px 12px #0000001a;transform:translateY(-2px)}.family-filter-cards[_ngcontent-%COMP%]   .family-card.active[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);background:linear-gradient(135deg,var(--ion-color-primary-tint) 0%,white 100%);box-shadow:0 4px 16px rgba(var(--ion-color-primary-rgb),.2)}.family-filter-cards[_ngcontent-%COMP%]   .family-card.active[_ngcontent-%COMP%]   .family-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.family-filter-cards[_ngcontent-%COMP%]   .family-card.active[_ngcontent-%COMP%]   .family-name[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}.family-filter-cards[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.75rem}.family-filter-cards[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .family-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--ion-color-medium);transition:color .3s ease}.family-filter-cards[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .family-name[_ngcontent-%COMP%]{font-weight:500;color:var(--ion-color-dark);font-size:1rem;transition:all .3s ease;flex:1}.family-filter-cards[_ngcontent-%COMP%]   .card-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.family-filter-cards[_ngcontent-%COMP%]   .card-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem}.family-filter-cards[_ngcontent-%COMP%]   .card-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:var(--ion-color-medium-shade);font-weight:500}.family-filter-cards[_ngcontent-%COMP%]   .card-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-weight:600}.family-filter-cards[_ngcontent-%COMP%]   .card-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.uncounted[_ngcontent-%COMP%]{color:var(--ion-color-warning);background:var(--ion-color-warning-tint);padding:.25rem .5rem;border-radius:12px;font-size:.75rem}.family-filter-cards[_ngcontent-%COMP%]   .card-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.cost[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:700}.familia-filter-card[_ngcontent-%COMP%]{width:100%;max-width:100%}.familia-filter-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem;min-height:180px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 768px){.familia-filter-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem;min-height:160px}.familia-filter-card[_ngcontent-%COMP%]   .rounded-circle[_ngcontent-%COMP%]{padding:.75rem}.familia-filter-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.familia-filter-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:.9rem}.familia-filter-card[_ngcontent-%COMP%]   small.text-success[_ngcontent-%COMP%]{font-size:.7rem;line-height:1.2;word-break:break-word}}@media (max-width: 576px){.familia-filter-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.75rem;min-height:140px}.familia-filter-card[_ngcontent-%COMP%]   .rounded-circle[_ngcontent-%COMP%]{padding:.5rem}.familia-filter-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.familia-filter-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:.85rem}.familia-filter-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.7rem;padding:.3rem .6rem}.familia-filter-card[_ngcontent-%COMP%]   small.text-success[_ngcontent-%COMP%]{font-size:.65rem;line-height:1.1;word-break:break-word}.familia-filter-card[_ngcontent-%COMP%]   .d-flex.flex-column.gap-1[_ngcontent-%COMP%]{gap:.25rem}}input[type=number][_ngcontent-%COMP%]{text-align:center}input[type=number][_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.bi-archive[_ngcontent-%COMP%]{opacity:.5}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.area-card[_ngcontent-%COMP%], .categoria-card[_ngcontent-%COMP%], .familia-filter-card[_ngcontent-%COMP%]{transition:all .3s ease;border:2px solid transparent}.area-card[_ngcontent-%COMP%]:hover, .categoria-card[_ngcontent-%COMP%]:hover, .familia-filter-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.area-card.selected[_ngcontent-%COMP%], .categoria-card.selected[_ngcontent-%COMP%], .familia-filter-card.selected[_ngcontent-%COMP%]{border-color:var(--bs-primary);background-color:#0d6efd0d;transform:translateY(-2px);box-shadow:0 8px 25px #0d6efd33}.area-card.selected[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .categoria-card.selected[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .familia-filter-card.selected[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:transparent}.area-card.selected[_ngcontent-%COMP%]   .rounded-circle[_ngcontent-%COMP%], .categoria-card.selected[_ngcontent-%COMP%]   .rounded-circle[_ngcontent-%COMP%], .familia-filter-card.selected[_ngcontent-%COMP%]   .rounded-circle[_ngcontent-%COMP%]{background-color:#0d6efd26!important}.area-card.selected[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .categoria-card.selected[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .familia-filter-card.selected[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-primary)!important}.area-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.area-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.area-card[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.categoria-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{transition:all .2s ease}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}@media (max-width: 768px){.area-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.btn-group[_ngcontent-%COMP%]{flex-wrap:wrap}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:.5rem}}@media (max-width: 576px){.area-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem}.area-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem!important}.categoria-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.75rem}}.familia-pills-container[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem;padding:0 .5rem}.familia-pills-scroll[_ngcontent-%COMP%]{display:flex;gap:.75rem;overflow-x:auto;padding:.75rem 0;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none}.familia-pills-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.familia-pills-scroll[_ngcontent-%COMP%]:before, .familia-pills-scroll[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;width:20px;pointer-events:none;z-index:1}.familia-pills-scroll[_ngcontent-%COMP%]:before{left:0;background:linear-gradient(to right,rgb(255,255,255),rgba(255,255,255,0))}.familia-pills-scroll[_ngcontent-%COMP%]:after{right:0;background:linear-gradient(to left,rgb(255,255,255),rgba(255,255,255,0))}.familia-pill[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#f8f9fa;border:1.5px solid #e9ecef;border-radius:25px;cursor:pointer;transition:all .3s ease;white-space:nowrap;flex-shrink:0;min-height:40px;-webkit-user-select:none;user-select:none}.familia-pill[_ngcontent-%COMP%]   .pill-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#495057}.familia-pill[_ngcontent-%COMP%]   .pill-count[_ngcontent-%COMP%]{background:#6c757d;color:#fff;font-size:.75rem;font-weight:600;padding:.2rem .5rem;border-radius:12px;min-width:24px;text-align:center;line-height:1}.familia-pill[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#adb5bd;transform:translateY(-1px);box-shadow:0 2px 8px #0000001a}.familia-pill.active[_ngcontent-%COMP%]{background:var(--bs-primary, #0d6efd);border-color:var(--bs-primary, #0d6efd);box-shadow:0 2px 12px #0d6efd4d}.familia-pill.active[_ngcontent-%COMP%]   .pill-text[_ngcontent-%COMP%]{color:#fff;font-weight:600}.familia-pill.active[_ngcontent-%COMP%]   .pill-count[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);color:#fff;font-weight:700}.familia-pill.active[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 16px #0d6efd66}.familia-pill[_ngcontent-%COMP%]:active{transform:scale(.98)}@media (max-width: 768px){.familia-pills-container[_ngcontent-%COMP%]{margin:0 -1rem 1rem;padding:0 1rem}.familia-pill[_ngcontent-%COMP%]{padding:.4rem .8rem;min-height:36px}.familia-pill[_ngcontent-%COMP%]   .pill-text[_ngcontent-%COMP%]{font-size:.8rem}.familia-pill[_ngcontent-%COMP%]   .pill-count[_ngcontent-%COMP%]{font-size:.7rem;padding:.15rem .4rem;min-width:20px}}@media (max-width: 576px){.familia-pills-scroll[_ngcontent-%COMP%]{gap:.5rem;padding:.5rem 0}.familia-pill[_ngcontent-%COMP%]{padding:.35rem .7rem;min-height:32px}.familia-pill[_ngcontent-%COMP%]   .pill-text[_ngcontent-%COMP%]{font-size:.75rem}.familia-pill[_ngcontent-%COMP%]   .pill-count[_ngcontent-%COMP%]{font-size:.65rem;padding:.1rem .35rem;min-width:18px}}.container-fluid[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem;max-width:100%;overflow-x:hidden}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}@media (max-width: 576px){.btn[_ngcontent-%COMP%]{touch-action:manipulation}.row[_ngcontent-%COMP%]:first-child{margin-bottom:1rem}.row[_ngcontent-%COMP%]:first-child   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.25rem}.row[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d}.card-body[_ngcontent-%COMP%]{padding:.75rem}.form-label[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:.25rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:.875rem;padding:.375rem .5rem}}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.scroll-indicator[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);background:linear-gradient(to left,rgba(255,255,255,.9),rgba(255,255,255,0));padding:.5rem .75rem .5rem 1.5rem;pointer-events:none;z-index:2}.scroll-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem;animation:_ngcontent-%COMP%_bounce-horizontal 2s infinite}@keyframes _ngcontent-%COMP%_bounce-horizontal{0%,20%,50%,80%,to{transform:translate(0)}40%{transform:translate(3px)}60%{transform:translate(1px)}}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;border-radius:.5rem}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:100%;margin-bottom:0}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;white-space:nowrap}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{min-width:200px;white-space:normal}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){min-width:100px}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){min-width:120px}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){min-width:150px}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){min-width:120px}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem;font-size:.875rem}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{min-width:180px}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){min-width:90px}}@media (max-width: 576px){.table-responsive[_ngcontent-%COMP%]{font-size:.8rem}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.375rem .2rem;font-size:.8rem}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{min-width:160px}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4), .table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){min-width:80px}}.mobile-cards-container[_ngcontent-%COMP%]{background-color:var(--bg-body)}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--bg-card);border:1px solid var(--border-color);border-radius:12px;transition:transform .2s ease,box-shadow .2s ease;color:var(--text-primary)}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026!important}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:var(--bg-card)}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.1rem}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.4rem .8rem}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]{background-color:var(--bg-surface)!important;border:1px solid var(--border-color)}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-secondary)!important;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]   .fw-bold[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-primary)}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:var(--input-bg);border:2px solid var(--input-border);color:var(--text-primary);border-radius:8px;padding:.75rem;font-size:1rem}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-color:var(--input-bg);border-color:var(--color-principal);color:var(--text-primary);box-shadow:0 0 0 .2rem rgba(var(--color-principal),.25)}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600;margin-bottom:.5rem}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--text-primary)}.mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-secondary)!important}body.dark-mode[_ngcontent-%COMP%]   .mobile-cards-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #ffffff1a!important}@media (min-width: 768px){.table-responsive[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a;background-color:var(--bg-card);border:1px solid var(--border-color)}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0;background-color:var(--bg-card);color:var(--text-primary)}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--bg-surface);color:var(--text-primary);border-bottom:2px solid var(--border-color);font-weight:600;text-transform:uppercase;font-size:.8rem;letter-spacing:.5px;padding:1rem .75rem}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{min-width:200px;white-space:normal}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){min-width:120px}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){min-width:100px}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){min-width:120px}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){min-width:150px}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--text-primary);border-bottom:1px solid var(--border-color);padding:.75rem;vertical-align:middle}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:var(--input-bg);border:1px solid var(--input-border);color:var(--text-primary)}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-color:var(--input-bg);border-color:var(--color-principal);color:var(--text-primary);box-shadow:0 0 0 .2rem rgba(var(--color-principal),.25)}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{color:#fff}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-secondary)!important}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--bg-surface)}}body.dark-mode[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000004d}body.dark-mode[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--bg-surface)}.product-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease forwards}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.text-success[_ngcontent-%COMP%]{color:#28a745!important;font-weight:600}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important;font-weight:600}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important;font-weight:600}']})}}return i})()}];let gt=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[w.iI.forChild(lt),w.iI]})}}return i})(),mt=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[gt,E.PrivateModule,h.MD,u.X1,u.YN]})}}return i})()}}]);