"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[706],{3706:(F,u,c)=>{c.r(u),c.d(u,{LoginPageModule:()=>x});var a=c(9417),p=c(177),f=c(9012),m=c(467),n=c(7705),P=c(4441),d=c(2418);let C=(()=>{class e{constructor(r){this.firestore=r}createDefaultUsers(){var r=this;return(0,m.A)(function*(){const o=(0,d.rJ)(r.firestore,"usuarios"),t=["admin@orionsystem.com","gerente@orionsystem.com","empleado@orionsystem.com","visualizador@orionsystem.com"];let l=0;for(const i of t){const s=(0,d.P)(o,(0,d._M)("email","==",i));(yield(0,d.GG)(s)).empty||l++}if(l===t.length)return void console.log("Todos los usuarios de prueba ya existen");const g=[{nombre:"Carlos Administrador",email:"admin@orionsystem.com",telefono:"+34 91 123 4567",rol:"Administrador",permisos:["dashboard","productos","categorias","recetas","ventas","reportes","proveedores","albaranes","usuarios","inventario","ajustes"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date},{nombre:"Mar\xeda Gerente",email:"gerente@orionsystem.com",telefono:"+34 91 234 5678",rol:"Gerente",permisos:["dashboard","productos","categorias","recetas","ventas","reportes","proveedores","albaranes","inventario"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date},{nombre:"Juan Empleado",email:"empleado@orionsystem.com",telefono:"+34 91 345 6789",rol:"Empleado",permisos:["dashboard","productos","ventas"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date},{nombre:"Ana Visualizador",email:"visualizador@orionsystem.com",telefono:"+34 91 456 7890",rol:"Visualizador",permisos:["dashboard","reportes"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date}];try{let i=0;for(const s of g){const h=(0,d.P)(o,(0,d._M)("email","==",s.email));(yield(0,d.GG)(h)).empty?(yield(0,d.gS)(o,s),console.log(`Usuario creado: ${s.nombre}`),i++):console.log(`Usuario ya existe: ${s.nombre}`)}i>0?console.log(`${i} usuarios de prueba creados exitosamente`):console.log("Todos los usuarios de prueba ya exist\xedan")}catch(i){throw console.error("Error creando usuarios por defecto:",i),i}})()}static{this.\u0275fac=function(o){return new(o||e)(n.KVO(d._7))}}static{this.\u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function M(e,b){1&e&&(n.j41(0,"div",19),n.EFF(1," Por favor ingresa un email v\xe1lido "),n.k0s())}function O(e,b){1&e&&(n.j41(0,"div",19),n.EFF(1," La contrase\xf1a es requerida "),n.k0s())}function _(e,b){1&e&&n.nrm(0,"span",20)}const v=[{path:"",component:(()=>{class e{constructor(r,o,t){this.authService=r,this.fb=o,this.seedService=t,this.showPassword=!1,this.isLoading=!1,this.isCreatingUsers=!1}ngOnInit(){this.buildForm()}buildForm(){this.loginForm=this.fb.group({email:["",[a.k0.required,a.k0.email]],password:["",a.k0.required]})}togglePassword(){this.showPassword=!this.showPassword}onSubmit(){var r=this;return(0,m.A)(function*(){if(r.loginForm.valid){r.isLoading=!0;try{const{email:o,password:t}=r.loginForm.value;(yield r.authService.login(o,t))||alert("Email o contrase\xf1a incorrectos, o usuario inactivo.")}catch(o){console.error("Error en login:",o),alert("Error al iniciar sesi\xf3n. Intenta nuevamente.")}finally{r.isLoading=!1}}else Object.keys(r.loginForm.controls).forEach(o=>{r.loginForm.get(o)?.markAsTouched()})})()}createTestUsers(){var r=this;return(0,m.A)(function*(){r.isCreatingUsers=!0;try{yield r.seedService.createDefaultUsers(),alert("Usuarios de prueba creados exitosamente. Ahora puedes iniciar sesi\xf3n con cualquiera de ellos.")}catch(o){console.error("Error creando usuarios:",o),alert("Error al crear usuarios de prueba. Revisa la consola para m\xe1s detalles.")}finally{r.isCreatingUsers=!1}})()}static{this.\u0275fac=function(o){return new(o||e)(n.rXU(P.u),n.rXU(a.ok),n.rXU(C))}}static{this.\u0275cmp=n.VBU({type:e,selectors:[["app-login-page"]],decls:28,vars:13,consts:[[1,"login-container"],[1,"login-card"],[1,"text-center","mb-4"],[1,"logo-container"],["src","assets/logo-rigel2.png","alt","Rigel Logo",2,"height","100px"],[1,"welcome-title"],[1,"welcome-subtitle"],[3,"formGroup","ngSubmit"],[1,"row","mb-4"],[1,"col"],[1,"form-label"],["type","email","formControlName","email","placeholder","tu@email.com",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mb-4"],[1,"input-group"],["formControlName","password","placeholder","Tu contrase\xf1a",1,"form-control",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-danger","w-100","login-btn",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(o,t){if(1&o&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.nrm(4,"img",4),n.k0s()(),n.j41(5,"div",2)(6,"h2",5),n.EFF(7,"\xa1Bienvenido de vuelta!"),n.k0s(),n.j41(8,"p",6),n.EFF(9," Ingresa tus credenciales para acceder a tu cuenta "),n.k0s()(),n.j41(10,"form",7),n.bIt("ngSubmit",function(){return t.onSubmit()}),n.j41(11,"div",8)(12,"div",9)(13,"label",10),n.EFF(14,"Correo Electr\xf3nico"),n.k0s(),n.nrm(15,"input",11),n.k0s(),n.DNE(16,M,2,0,"div",12),n.k0s(),n.j41(17,"div",13)(18,"label",10),n.EFF(19,"Contrase\xf1a"),n.k0s(),n.j41(20,"div",14),n.nrm(21,"input",15),n.j41(22,"button",16),n.bIt("click",function(){return t.togglePassword()}),n.nrm(23,"i"),n.k0s()(),n.DNE(24,O,2,0,"div",12),n.k0s(),n.j41(25,"button",17),n.DNE(26,_,1,0,"span",18),n.EFF(27),n.k0s()()()()),2&o){let l,g,i,s;n.R7$(10),n.Y8G("formGroup",t.loginForm),n.R7$(5),n.AVh("is-invalid",(null==(l=t.loginForm.get("email"))?null:l.invalid)&&(null==(l=t.loginForm.get("email"))?null:l.touched)),n.R7$(1),n.Y8G("ngIf",(null==(g=t.loginForm.get("email"))?null:g.invalid)&&(null==(g=t.loginForm.get("email"))?null:g.touched)),n.R7$(5),n.AVh("is-invalid",(null==(i=t.loginForm.get("password"))?null:i.invalid)&&(null==(i=t.loginForm.get("password"))?null:i.touched)),n.Y8G("type",t.showPassword?"text":"password"),n.R7$(2),n.HbH(t.showPassword?"bi bi-eye-slash":"bi bi-eye"),n.R7$(1),n.Y8G("ngIf",(null==(s=t.loginForm.get("password"))?null:s.invalid)&&(null==(s=t.loginForm.get("password"))?null:s.touched)),n.R7$(1),n.Y8G("disabled",t.loginForm.invalid||t.isLoading),n.R7$(1),n.Y8G("ngIf",t.isLoading),n.R7$(1),n.SpI(" ",t.isLoading?"Ingresando...":"Ingresar"," ")}},dependencies:[p.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD],styles:['.login-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:radial-gradient(circle at 25% 25%,rgba(220,53,69,.1) 0%,transparent 50%),radial-gradient(circle at 75% 75%,rgba(220,53,69,.05) 0%,transparent 50%);pointer-events:none}.login-card[_ngcontent-%COMP%]{background:white;width:100%;max-width:480px;border-radius:20px;box-shadow:0 20px 40px #0000001a;padding:3rem 2.5rem;position:relative;border:1px solid rgba(0,0,0,.05)}@media (max-width: 576px){.login-card[_ngcontent-%COMP%]{padding:2rem 1.5rem;margin:1rem}}.logo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.logo-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);border-radius:20px;display:flex;align-items:center;justify-content:center;margin-bottom:1rem;box-shadow:0 10px 30px #dc35454d}.logo-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:#fff}.brand[_ngcontent-%COMP%]{text-align:center}.brand[_ngcontent-%COMP%]   .brand-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:#212529;margin:0;letter-spacing:-.5px}.brand[_ngcontent-%COMP%]   .brand-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;margin:0;font-weight:500}.welcome-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#212529;margin-bottom:.5rem}.welcome-subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;margin-bottom:0}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-right:none;color:#6c757d}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-left:none;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-left:none}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.25rem}.login-btn[_ngcontent-%COMP%]{padding:.875rem 1.5rem;font-size:1.1rem;font-weight:600;border-radius:12px;background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);border:none;box-shadow:0 8px 20px #dc35454d;transition:all .3s ease}.login-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 25px #dc354566}.login-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.login-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.divider[_ngcontent-%COMP%]{position:relative;text-align:center}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e9ecef}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:white;padding:0 1rem;color:#6c757d;font-weight:500}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{border:none}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:12px;overflow:hidden}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{background:#f8f9fa;border:none;font-weight:600;color:#495057;padding:1rem 1.25rem}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){background:#dc3545;color:#fff;box-shadow:none}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1.25rem;background:#f8f9fa}.test-user-card[_ngcontent-%COMP%]{background:white;border:1px solid #e9ecef;border-radius:8px;padding:.75rem 1rem;margin-bottom:.5rem;transition:all .2s ease}.test-user-card[_ngcontent-%COMP%]:hover{border-color:#dc3545;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.test-user-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.test-user-card[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#212529;font-weight:600}.test-user-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem}.test-user-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@media (max-width: 576px){.welcome-title[_ngcontent-%COMP%]{font-size:1.5rem}.brand-title[_ngcontent-%COMP%]{font-size:1.75rem}.logo-icon[_ngcontent-%COMP%]{width:70px;height:70px}.logo-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}}']})}}return e})()}];let w=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=n.$C({type:e})}static{this.\u0275inj=n.G2t({imports:[f.iI.forChild(v),f.iI]})}}return e})();var y=c(6719);let x=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=n.$C({type:e})}static{this.\u0275inj=n.G2t({imports:[w,y.PublicModule,p.MD,a.X1,a.YN]})}}return e})()}}]);