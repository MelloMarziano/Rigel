"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[661],{3661:(Y,f,s)=>{s.r(f),s.d(f,{RecetasPageModule:()=>D});var k=s(7412),i=s(9417),g=s(177),h=s(5743),p=s(467),l=s(9173),_=s(8032),m=s.n(_),P=s(8359),e=s(7705);function C(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",66),e.nrm(1,"i",67),e.j41(2,"h5",68),e.EFF(3,"No hay recetas registradas"),e.k0s(),e.j41(4,"p",11),e.EFF(5,"Crea tu primera receta para comenzar"),e.k0s(),e.j41(6,"button",4),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.abrirModalNuevo())}),e.nrm(7,"i",56),e.EFF(8," Nueva Receta "),e.k0s()()}}function R(n,c){if(1&n&&(e.j41(0,"span",96),e.EFF(1),e.k0s()),2&n){const t=c.$implicit,o=e.XpG(2);e.R7$(1),e.SpI(" ",o.getProductoNombre(t.productoId)," ")}}function E(n,c){if(1&n&&(e.j41(0,"span",96),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.SpI(" +",t.ingredientes.length-3," m\xe1s ")}}function M(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",69)(1,"div",70),e.bIt("click",function(){const a=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.verDetalleReceta(a))}),e.j41(2,"div",71)(3,"div",72)(4,"div",73),e.nrm(5,"i",74),e.k0s(),e.j41(6,"div",75)(7,"h6",76),e.EFF(8),e.k0s(),e.j41(9,"p",77),e.EFF(10),e.k0s(),e.j41(11,"span",78),e.EFF(12),e.k0s()()(),e.j41(13,"div",79)(14,"div",80)(15,"div",81),e.EFF(16,"Costo Total"),e.k0s(),e.j41(17,"div",82),e.EFF(18),e.nI1(19,"currency"),e.k0s()(),e.j41(20,"div",80)(21,"div",81),e.EFF(22,"Rendimiento"),e.k0s(),e.j41(23,"div",83),e.EFF(24),e.k0s()()(),e.j41(25,"div",46)(26,"div",84)(27,"small",11),e.nrm(28,"i",85),e.EFF(29),e.k0s(),e.j41(30,"h5",86),e.EFF(31),e.nI1(32,"currency"),e.k0s()()(),e.j41(33,"div",46)(34,"small",87),e.nrm(35,"i",88),e.EFF(36," Ingredientes: "),e.k0s(),e.j41(37,"div",89),e.DNE(38,R,2,1,"span",90),e.DNE(39,E,2,1,"span",91),e.k0s()(),e.j41(40,"div",92)(41,"small",11),e.nrm(42,"i",93),e.EFF(43),e.k0s(),e.j41(44,"span",94),e.nrm(45,"i",95),e.EFF(46),e.k0s()()()()()}if(2&n){const t=c.$implicit,o=e.XpG();e.R7$(8),e.JRh(t.nombre),e.R7$(2),e.JRh(t.descripcion||"Sin descripci\xf3n"),e.R7$(1),e.Y8G("ngClass",o.getCategoriaBadgeClass(t.categoriaId)),e.R7$(1),e.SpI(" ",o.getCategoriaNombre(t.categoriaId)," "),e.R7$(6),e.SpI(" ",e.ii3(19,15,t.costoTotal,"EUR","symbol","1.2-2")," "),e.R7$(6),e.Lme(" ",t.rendimiento," ",t.unidadRendimiento," "),e.R7$(5),e.SpI(" Costo/",t.unidadRendimiento," "),e.R7$(2),e.JRh(e.ii3(32,20,t.costoPorUnidad,"EUR","symbol","1.2-2")),e.R7$(7),e.Y8G("ngForOf",t.ingredientes.slice(0,3)),e.R7$(1),e.Y8G("ngIf",t.ingredientes.length>3),e.R7$(4),e.SpI(" ",t.tiempoPreparacion||0," min "),e.R7$(1),e.Y8G("ngClass",t.activo?"bg-success":"bg-secondary"),e.R7$(1),e.Y8G("ngClass",t.activo?"bi-check-circle":"bi-x-circle"),e.R7$(1),e.SpI(" ",t.activo?"Activo":"Inactivo"," ")}}function j(n,c){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"strong"),e.EFF(3),e.k0s(),e.nrm(4,"br"),e.j41(5,"small",11),e.EFF(6),e.nI1(7,"currency"),e.k0s()(),e.j41(8,"td",117),e.EFF(9),e.k0s(),e.j41(10,"td",117),e.EFF(11),e.nI1(12,"currency"),e.k0s(),e.j41(13,"td",117)(14,"span",127),e.EFF(15),e.nI1(16,"number"),e.k0s()()()),2&n){const t=c.$implicit,o=e.XpG(2);e.R7$(3),e.JRh(o.getProductoNombre(t.productoId)),e.R7$(3),e.SpI(" Costo/unidad: ",e.ii3(7,6,(t.costo||0)/t.cantidad,"EUR","symbol","1.3-3")," "),e.R7$(3),e.Lme("",t.cantidad," ",t.unidadMedida,""),e.R7$(2),e.JRh(e.ii3(12,11,t.costo,"EUR","symbol","1.2-2")),e.R7$(4),e.SpI(" ",e.i5U(16,16,o.calcularPorcentajeCosto(t,o.recetaSeleccionada),"1.1-1"),"% ")}}function y(n,c){if(1&n&&(e.j41(0,"div",128)(1,"div",113)(2,"h6",129),e.nrm(3,"i",130),e.EFF(4," Notas de Preparaci\xf3n "),e.k0s(),e.j41(5,"p",131),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(t.recetaSeleccionada.notasPreparacion)}}function O(n,c){if(1&n&&(e.j41(0,"div",97)(1,"div",98)(2,"span",99),e.nrm(3,"i",100),e.EFF(4),e.k0s(),e.j41(5,"span",101),e.nrm(6,"i",95),e.EFF(7),e.k0s()(),e.j41(8,"div",102)(9,"div",103)(10,"div",104)(11,"div",9),e.nrm(12,"i",105),e.j41(13,"h3",106),e.EFF(14),e.nI1(15,"currency"),e.k0s(),e.j41(16,"small",11),e.EFF(17,"Costo Total"),e.k0s()()()(),e.j41(18,"div",103)(19,"div",107)(20,"div",9),e.nrm(21,"i",108),e.j41(22,"h3",109),e.EFF(23),e.k0s(),e.j41(24,"small",11),e.EFF(25),e.k0s()()()(),e.j41(26,"div",103)(27,"div",110)(28,"div",9),e.nrm(29,"i",111),e.j41(30,"h3",86),e.EFF(31),e.nI1(32,"currency"),e.k0s(),e.j41(33,"small",11),e.EFF(34),e.k0s()()()()(),e.j41(35,"div",112)(36,"div",113)(37,"h6",46),e.nrm(38,"i",114),e.EFF(39," Desglose de Costos "),e.k0s(),e.j41(40,"div",115)(41,"table",116)(42,"thead")(43,"tr")(44,"th"),e.EFF(45,"Ingrediente"),e.k0s(),e.j41(46,"th",117),e.EFF(47,"Cantidad"),e.k0s(),e.j41(48,"th",117),e.EFF(49,"Costo"),e.k0s(),e.j41(50,"th",117),e.EFF(51,"%"),e.k0s()()(),e.j41(52,"tbody"),e.DNE(53,j,17,19,"tr",118),e.k0s()()()()(),e.j41(54,"div",119)(55,"div",120)(56,"div",121)(57,"div",113)(58,"h6",46),e.nrm(59,"i",122),e.EFF(60," Tiempo de Preparaci\xf3n "),e.k0s(),e.j41(61,"div",21),e.nrm(62,"i",123),e.j41(63,"div")(64,"h3",24),e.EFF(65),e.k0s(),e.j41(66,"small",11),e.EFF(67,"minutos"),e.k0s()()()()()(),e.j41(68,"div",120)(69,"div",121)(70,"div",113)(71,"h6",46),e.nrm(72,"i",124),e.EFF(73," Ingredientes "),e.k0s(),e.j41(74,"div",21),e.nrm(75,"i",125),e.j41(76,"div")(77,"h3",24),e.EFF(78),e.k0s(),e.j41(79,"small",11),e.EFF(80,"productos"),e.k0s()()()()()()(),e.DNE(81,y,7,1,"div",126),e.k0s()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngClass",t.getCategoriaBadgeClass(t.recetaSeleccionada.categoriaId)),e.R7$(2),e.SpI(" ",t.getCategoriaNombre(t.recetaSeleccionada.categoriaId)," "),e.R7$(1),e.Y8G("ngClass",t.recetaSeleccionada.activo?"bg-success":"bg-secondary"),e.R7$(1),e.Y8G("ngClass",t.recetaSeleccionada.activo?"bi-check-circle-fill":"bi-x-circle-fill"),e.R7$(1),e.SpI(" ",t.recetaSeleccionada.activo?"Activo":"Inactivo"," "),e.R7$(7),e.JRh(e.ii3(15,14,t.recetaSeleccionada.costoTotal,"EUR","symbol","1.2-2")),e.R7$(9),e.JRh(t.recetaSeleccionada.rendimiento),e.R7$(2),e.JRh(t.recetaSeleccionada.unidadRendimiento),e.R7$(6),e.JRh(e.ii3(32,19,t.recetaSeleccionada.costoPorUnidad,"EUR","symbol","1.2-2")),e.R7$(3),e.SpI("Costo por ",t.recetaSeleccionada.unidadRendimiento,""),e.R7$(19),e.Y8G("ngForOf",t.recetaSeleccionada.ingredientes),e.R7$(12),e.JRh(t.recetaSeleccionada.tiempoPreparacion||0),e.R7$(13),e.JRh(t.recetaSeleccionada.ingredientes.length),e.R7$(3),e.Y8G("ngIf",t.recetaSeleccionada.notasPreparacion)}}function x(n,c){if(1&n&&(e.j41(0,"option",132),e.EFF(1),e.k0s()),2&n){const t=c.$implicit;e.Y8G("value",t.id),e.R7$(1),e.JRh(t.nombre)}}function I(n,c){if(1&n&&(e.j41(0,"option",132),e.EFF(1),e.k0s()),2&n){const t=c.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}function $(n,c){if(1&n&&(e.j41(0,"option",132),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&n){const t=c.$implicit;e.Y8G("value",t.nombre),e.R7$(1),e.E5c(" ",t.cantidad," ",t.unidadMedida," - ",e.ii3(2,4,t.costo,"EUR","symbol","1.2-2")," ")}}function w(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",133)(1,"div",134)(2,"div",135)(3,"div",136)(4,"input",137),e.bIt("input",function(r){const d=e.eBV(t).index,u=e.XpG();return e.Njj(u.onProductoInput(d,r))}),e.k0s(),e.j41(5,"datalist",138),e.DNE(6,$,3,9,"option",45),e.k0s(),e.nrm(7,"input",139),e.k0s(),e.j41(8,"div",140),e.nrm(9,"input",141),e.k0s(),e.j41(10,"div",140),e.nrm(11,"input",142),e.k0s(),e.j41(12,"div",143)(13,"button",144),e.bIt("click",function(){const a=e.eBV(t).index,d=e.XpG();return e.Njj(d.eliminarIngrediente(a))}),e.nrm(14,"i",145),e.k0s()()()()()}if(2&n){const t=c.$implicit,o=c.index,r=e.XpG();let a;e.Y8G("formGroupName",o),e.R7$(4),e.Y8G("value",r.getProductoNombreById(null==(a=t.get("productoId"))?null:a.value)),e.BMQ("list","productos-list-"+o),e.R7$(1),e.Y8G("id","productos-list-"+o),e.R7$(1),e.Y8G("ngForOf",r.productos)}}function S(n,c){1&n&&(e.j41(0,"div",146)(1,"small"),e.nrm(2,"i",147),e.EFF(3,' Haz clic en "Agregar" para a\xf1adir ingredientes a la receta '),e.k0s()())}function N(n,c){if(1&n&&(e.j41(0,"div",148)(1,"h6",149),e.nrm(2,"i",150),e.EFF(3," Preview de Costos "),e.k0s(),e.j41(4,"div",1)(5,"div",80)(6,"small",151),e.EFF(7,"Costo Total"),e.k0s(),e.j41(8,"strong",152),e.EFF(9),e.nI1(10,"currency"),e.k0s()(),e.j41(11,"div",80)(12,"small",151),e.EFF(13),e.k0s(),e.j41(14,"strong",153),e.EFF(15),e.nI1(16,"currency"),e.k0s()()()()),2&n){const t=e.XpG();let o;e.R7$(9),e.JRh(e.ii3(10,3,t.costoPreview.costoTotal,"EUR","symbol","1.2-2")),e.R7$(4),e.SpI("Costo por ",null==(o=t.recetaForm.get("unidadRendimiento"))?null:o.value,""),e.R7$(2),e.JRh(e.ii3(16,8,t.costoPreview.costoPorUnidad,"EUR","symbol","1.3-3"))}}const G=[{path:"",component:(()=>{class n{constructor(t,o){this.fb=t,this.firestore=o,this.recetas=[],this.productos=[],this.recetaSeleccionada=null,this.totalRecetas=0,this.recetasActivas=0,this.totalIngredientes=0,this.tiempoPromedio=0,this.categorias=[{id:"platos",nombre:"Platos"},{id:"bebidas",nombre:"Bebidas"},{id:"postres",nombre:"Postres"},{id:"entradas",nombre:"Entradas"},{id:"salsas",nombre:"Salsas"},{id:"guarniciones",nombre:"Guarniciones"}],this.unidadesRendimiento=["g (gramos)","kg (kilogramos)","ml (mililitros)","L (litros)","unidades","porciones","raciones"],this.subscriptions=new P.yU,this.inicializarForm()}ngOnInit(){this.cargarRecetas(),this.cargarProductos();const t=document.getElementById("recetaModal");t&&(this.modal=new bootstrap.Modal(t));const o=document.getElementById("detalleRecetaModal");o&&(this.detalleModal=new bootstrap.Modal(o))}ngOnDestroy(){this.subscriptions.unsubscribe()}inicializarForm(){this.recetaForm=this.fb.group({id:[""],nombre:["",i.k0.required],descripcion:[""],categoriaId:["",i.k0.required],rendimiento:[0,[i.k0.required,i.k0.min(0)]],unidadRendimiento:["g (gramos)",i.k0.required],tiempoPreparacion:[0,i.k0.min(0)],notasPreparacion:[""],ingredientes:this.fb.array([]),activo:[!0]})}get ingredientes(){return this.recetaForm.get("ingredientes")}agregarIngrediente(){const t=this.fb.group({productoId:["",i.k0.required],cantidad:[0,[i.k0.required,i.k0.min(0)]],unidadMedida:["g (gramos)",i.k0.required]});this.ingredientes.push(t)}eliminarIngrediente(t){this.ingredientes.removeAt(t)}cargarRecetas(){const t=(0,l.collection)(this.firestore,"recetas");this.subscriptions.add((0,l.collectionData)(t,{idField:"id"}).subscribe(o=>{this.recetas=o.map(r=>this.calcularCostos(r)),this.calcularEstadisticas()}))}cargarProductos(){const t=(0,l.collection)(this.firestore,"productos");this.subscriptions.add((0,l.collectionData)(t,{idField:"id"}).subscribe(o=>{this.productos=o.filter(r=>!r.esCombinado)}))}calcularCostos(t){let o=0;return t.ingredientes.forEach(r=>{const a=this.productos.find(d=>d.id===r.productoId);a&&(r.productoNombre=a.nombre,r.unidadMedida=a.unidadMedida,r.costo=a.costo/a.cantidad*r.cantidad,o+=r.costo)}),t.costoTotal=o,t.costoPorUnidad=t.rendimiento>0?o/t.rendimiento:0,t}calcularEstadisticas(){if(this.totalRecetas=this.recetas.length,this.recetasActivas=this.recetas.filter(t=>t.activo).length,this.totalIngredientes=this.recetas.reduce((t,o)=>t+o.ingredientes.length,0),this.recetas.length>0){const t=this.recetas.reduce((o,r)=>o+(r.tiempoPreparacion||0),0);this.tiempoPromedio=Math.round(t/this.recetas.length)}else this.tiempoPromedio=0}abrirModalNuevo(){this.recetaForm.reset({id:"",nombre:"",descripcion:"",categoriaId:"",rendimiento:0,unidadRendimiento:"g (gramos)",tiempoPreparacion:0,notasPreparacion:"",activo:!0}),this.ingredientes.clear(),this.agregarIngrediente(),this.modal.show()}verDetalleReceta(t){this.recetaSeleccionada=this.calcularCostos({...t}),this.detalleModal.show()}editarReceta(t){this.recetaForm.patchValue(t),this.ingredientes.clear(),t.ingredientes.forEach(o=>{const r=this.fb.group({productoId:[o.productoId,i.k0.required],cantidad:[o.cantidad,[i.k0.required,i.k0.min(0)]],unidadMedida:[o.unidadMedida,i.k0.required]});this.ingredientes.push(r)}),this.modal.show()}editarDesdeDetalle(){this.recetaSeleccionada&&(this.detalleModal.hide(),this.editarReceta(this.recetaSeleccionada))}eliminarReceta(t){var o=this;return(0,p.A)(function*(){if((yield m().fire({title:"\xbfEliminar Receta?",text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{yield(0,l.deleteDoc)((0,l.doc)(o.firestore,"recetas",t)),m().fire("\xa1Eliminada!","La receta ha sido eliminada.","success")}catch(a){console.error("Error al eliminar receta:",a),m().fire("Error","No se pudo eliminar la receta.","error")}})()}eliminarDesdeDetalle(){var t=this;return(0,p.A)(function*(){t.recetaSeleccionada?.id&&(t.detalleModal.hide(),yield t.eliminarReceta(t.recetaSeleccionada.id),t.recetaSeleccionada=null)})()}guardarReceta(){var t=this;return(0,p.A)(function*(){if(t.recetaForm.invalid)return void m().fire("Error","Por favor completa todos los campos requeridos.","error");if(0===t.ingredientes.length)return void m().fire("Error","Debes agregar al menos un ingrediente a la receta.","error");const o=t.recetaForm.value,r={nombre:o.nombre,descripcion:o.descripcion||"",categoriaId:o.categoriaId,rendimiento:o.rendimiento,unidadRendimiento:o.unidadRendimiento,tiempoPreparacion:o.tiempoPreparacion||0,notasPreparacion:o.notasPreparacion||"",ingredientes:o.ingredientes,activo:o.activo,fechaActualizacion:new Date};try{if(o.id){const a=(0,l.doc)(t.firestore,"recetas",o.id);yield(0,l.updateDoc)(a,r),m().fire("\xa1Actualizada!","La receta ha sido actualizada.","success")}else{const a={...r,fechaCreacion:(0,l.serverTimestamp)()};yield(0,l.addDoc)((0,l.collection)(t.firestore,"recetas"),a),m().fire("\xa1Creada!","La nueva receta ha sido guardada.","success")}t.modal.hide(),t.recetaForm.reset()}catch(a){console.error("Error al guardar receta:",a),m().fire("Error","Hubo un problema al guardar la receta.","error")}})()}getCategoriaNombre(t){return this.categorias.find(r=>r.id===t)?.nombre||"Sin categor\xeda"}getCategoriaBadgeClass(t){return{platos:"bg-primary",bebidas:"bg-info",postres:"bg-warning text-dark",entradas:"bg-success",salsas:"bg-danger",guarniciones:"bg-secondary"}[t]||"bg-secondary"}getProductoNombre(t){return this.productos.find(r=>r.id===t)?.nombre||"Producto no encontrado"}calcularPorcentajeCosto(t,o){return o.costoTotal&&0!==o.costoTotal?(t.costo||0)/o.costoTotal*100:0}onProductoInput(t,o){const r=o.target.value,a=this.productos.find(u=>u.nombre.toLowerCase()===r.toLowerCase());this.ingredientes.at(t).patchValue(a?{productoId:a.id,unidadMedida:a.unidadMedida}:{productoId:""})}getProductoNombreById(t){return this.productos.find(r=>r.id===t)?.nombre||""}get costoPreview(){let t=0;const o=this.recetaForm.get("rendimiento")?.value||0;this.ingredientes.controls.forEach(a=>{const d=a.get("productoId")?.value,u=a.get("cantidad")?.value||0;if(d&&u>0){const b=this.productos.find(v=>v.id===d);if(b&&b.cantidad>0&&b.costo>0){const F=b.costo/b.cantidad*u;isFinite(F)&&(t+=F)}}});let r=0;return o>0&&t>0&&(r=t/o,isFinite(r)||(r=0)),{costoTotal:isFinite(t)?t:0,costoPorUnidad:isFinite(r)?r:0}}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(i.ok),e.rXU(l.Firestore))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-recetas-page"]],decls:140,vars:18,consts:[[1,"container-fluid"],[1,"row"],[1,"col-8"],[1,"col","text-end"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-plus-lg","me-2"],[1,"row","mt-4"],[1,"col-md-3","mb-3"],[1,"card","border-0","shadow-sm"],[1,"card-body","text-center"],[1,"text-primary","mb-0"],[1,"text-muted"],[1,"text-success","mb-0"],[1,"text-info","mb-0"],[1,"text-warning","mb-0"],["class","col-12 text-center py-5",4,"ngIf"],["class","col-12 col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],["id","detalleRecetaModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header","border-0","pb-0"],[1,"d-flex","align-items-center"],[1,"rounded-circle","me-3","d-flex","justify-content-center","align-items-center",2,"background-color","#6c757d","width","56px","height","56px"],[1,"bi","bi-cup-straw","text-white","fs-3"],[1,"mb-0"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body pt-3",4,"ngIf"],[1,"modal-footer","border-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"bi","bi-x-lg","me-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil-fill","me-2"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill","me-2"],["id","recetaModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[3,"formGroup","ngSubmit"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"col-md-6","mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","nombre","placeholder","Ej: Pur\xe9 de Papa",1,"form-control"],["formControlName","categoriaId",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3"],["formControlName","descripcion","rows","2","placeholder","Descripci\xf3n breve de la receta",1,"form-control"],[1,"col-md-4","mb-3"],["type","number","formControlName","rendimiento","placeholder","0",1,"form-control"],["formControlName","unidadRendimiento",1,"form-select"],["type","number","formControlName","tiempoPreparacion","placeholder","0",1,"form-control"],["formControlName","notasPreparacion","rows","2","placeholder","Instrucciones especiales o notas importantes",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"form-label","mb-0"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-plus","me-1"],["formArrayName","ingredientes"],["class","card mb-2",3,"formGroupName",4,"ngFor","ngForOf"],["class","alert alert-info py-2 px-3",4,"ngIf"],["class","alert alert-info mb-3",4,"ngIf"],[1,"form-check"],["type","checkbox","formControlName","activo","id","activoCheck",1,"form-check-input"],["for","activoCheck",1,"form-check-label"],[1,"modal-footer"],["type","submit",1,"btn","btn-danger",3,"disabled"],[1,"col-12","text-center","py-5"],[1,"bi","bi-inbox","fs-1","text-muted"],[1,"mt-3","text-muted"],[1,"col-12","col-md-6","col-lg-4","mb-4"],[1,"card","shadow-sm","border-0","h-100",2,"cursor","pointer",3,"click"],[1,"card-body","p-4"],[1,"d-flex","align-items-start","mb-3"],[1,"rounded-circle","me-3","d-flex","justify-content-center","align-items-center",2,"background-color","#6c757d","width","48px","height","48px","min-width","48px"],[1,"bi","bi-cup-straw","text-white","fs-5"],[1,"flex-grow-1"],[1,"mb-1","fw-bold"],[1,"text-muted","small","mb-2"],[1,"badge","rounded-pill",3,"ngClass"],[1,"row","mb-3"],[1,"col-6"],[1,"text-muted","small"],[1,"fw-bold","text-warning",2,"font-size","1.1rem"],[1,"fw-bold","text-success",2,"font-size","1.1rem"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"bi","bi-calculator","me-1"],[1,"mb-0","text-info"],[1,"text-muted","d-block","mb-2"],[1,"bi","bi-list-ul","me-1"],[1,"d-flex","flex-wrap","gap-1"],["class","badge bg-light text-dark",4,"ngFor","ngForOf"],["class","badge bg-light text-dark",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],[1,"bi","bi-clock","me-1"],[1,"badge",3,"ngClass"],[1,"bi",3,"ngClass"],[1,"badge","bg-light","text-dark"],[1,"modal-body","pt-3"],[1,"mb-4"],[1,"badge","px-3","py-2","me-2",3,"ngClass"],[1,"bi","bi-tag-fill","me-1"],[1,"badge","px-3","py-2",3,"ngClass"],[1,"row","g-3","mb-3"],[1,"col-md-4"],[1,"card","border-0","bg-warning","bg-opacity-10","h-100"],[1,"bi","bi-cash-coin","text-warning","fs-2","d-block","mb-2"],[1,"mb-0","text-warning"],[1,"card","border-0","bg-success","bg-opacity-10","h-100"],[1,"bi","bi-box-seam","text-success","fs-2","d-block","mb-2"],[1,"mb-0","text-success"],[1,"card","border-0","bg-info","bg-opacity-10","h-100"],[1,"bi","bi-calculator","text-info","fs-2","d-block","mb-2"],[1,"card","border-0","bg-light","mb-3"],[1,"card-body"],[1,"bi","bi-calculator","me-2","text-primary"],[1,"table-responsive"],[1,"table","table-sm","mb-0"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"row","g-3"],[1,"col-md-6"],[1,"card","border-0","bg-light","h-100"],[1,"bi","bi-clock","me-2","text-primary"],[1,"bi","bi-stopwatch","fs-2","text-primary","me-3"],[1,"bi","bi-list-ul","me-2","text-primary"],[1,"bi","bi-box-seam","fs-2","text-primary","me-3"],["class","card border-0 bg-primary bg-opacity-10 mt-3",4,"ngIf"],[1,"badge","bg-secondary"],[1,"card","border-0","bg-primary","bg-opacity-10","mt-3"],[1,"mb-2"],[1,"bi","bi-journal-text","me-2","text-primary"],[1,"mb-0","small"],[3,"value"],[1,"card","mb-2",3,"formGroupName"],[1,"card-body","p-3"],[1,"row","g-2"],[1,"col-md-5"],["type","text","placeholder","Buscar producto...","autocomplete","off",1,"form-control","form-control-sm",3,"value","input"],[3,"id"],["type","hidden","formControlName","productoId"],[1,"col-md-3"],["type","number","formControlName","cantidad","placeholder","Cantidad","step","0.01",1,"form-control","form-control-sm"],["type","text","formControlName","unidadMedida","readonly","",1,"form-control","form-control-sm"],[1,"col-md-1"],["type","button",1,"btn","btn-sm","btn-outline-danger","w-100",3,"click"],[1,"bi","bi-trash"],[1,"alert","alert-info","py-2","px-3"],[1,"bi","bi-info-circle","me-1"],[1,"alert","alert-info","mb-3"],[1,"alert-heading"],[1,"bi","bi-calculator","me-2"],[1,"text-muted","d-block"],[1,"fs-5"],[1,"fs-5","text-success"]],template:function(o,r){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e.EFF(4,"Recetas Pre-elaboradas"),e.k0s(),e.j41(5,"span"),e.EFF(6,"Productos combinados para usar en tus escandallos"),e.k0s()(),e.j41(7,"div",3)(8,"button",4),e.bIt("click",function(){return r.abrirModalNuevo()}),e.nrm(9,"i",5),e.EFF(10," Nueva Receta "),e.k0s()()(),e.j41(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"h2",10),e.EFF(16),e.k0s(),e.j41(17,"span",11),e.EFF(18,"Total Recetas"),e.k0s()()()(),e.j41(19,"div",7)(20,"div",8)(21,"div",9)(22,"h2",12),e.EFF(23),e.k0s(),e.j41(24,"span",11),e.EFF(25,"Activas"),e.k0s()()()(),e.j41(26,"div",7)(27,"div",8)(28,"div",9)(29,"h2",13),e.EFF(30),e.k0s(),e.j41(31,"span",11),e.EFF(32,"Total Ingredientes"),e.k0s()()()(),e.j41(33,"div",7)(34,"div",8)(35,"div",9)(36,"h2",14),e.EFF(37),e.k0s(),e.j41(38,"span",11),e.EFF(39,"Tiempo Promedio"),e.k0s()()()()(),e.j41(40,"div",6),e.DNE(41,C,9,0,"div",15),e.DNE(42,M,47,25,"div",16),e.k0s()(),e.j41(43,"div",17)(44,"div",18)(45,"div",19)(46,"div",20)(47,"div",21)(48,"div",22),e.nrm(49,"i",23),e.k0s(),e.j41(50,"div")(51,"h4",24),e.EFF(52),e.k0s(),e.j41(53,"small",11),e.EFF(54),e.k0s()()(),e.nrm(55,"button",25),e.k0s(),e.DNE(56,O,82,24,"div",26),e.j41(57,"div",27)(58,"button",28),e.nrm(59,"i",29),e.EFF(60,"Cerrar "),e.k0s(),e.j41(61,"button",30),e.bIt("click",function(){return r.editarDesdeDetalle()}),e.nrm(62,"i",31),e.EFF(63,"Editar "),e.k0s(),e.j41(64,"button",32),e.bIt("click",function(){return r.eliminarDesdeDetalle()}),e.nrm(65,"i",33),e.EFF(66,"Eliminar "),e.k0s()()()()(),e.j41(67,"div",34)(68,"div",18)(69,"div",19)(70,"form",35),e.bIt("ngSubmit",function(){return r.guardarReceta()}),e.j41(71,"div",36)(72,"h5",37),e.EFF(73),e.k0s(),e.nrm(74,"button",25),e.k0s(),e.j41(75,"div",38)(76,"div",1)(77,"div",39)(78,"label",40),e.EFF(79,"Nombre "),e.j41(80,"span",41),e.EFF(81,"*"),e.k0s()(),e.nrm(82,"input",42),e.k0s(),e.j41(83,"div",39)(84,"label",40),e.EFF(85,"Categor\xeda "),e.j41(86,"span",41),e.EFF(87,"*"),e.k0s()(),e.j41(88,"select",43)(89,"option",44),e.EFF(90,"Seleccionar categor\xeda"),e.k0s(),e.DNE(91,x,2,2,"option",45),e.k0s()()(),e.j41(92,"div",46)(93,"label",40),e.EFF(94,"Descripci\xf3n"),e.k0s(),e.nrm(95,"textarea",47),e.k0s(),e.j41(96,"div",1)(97,"div",48)(98,"label",40),e.EFF(99,"Rendimiento "),e.j41(100,"span",41),e.EFF(101,"*"),e.k0s()(),e.nrm(102,"input",49),e.k0s(),e.j41(103,"div",48)(104,"label",40),e.EFF(105,"Unidad "),e.j41(106,"span",41),e.EFF(107,"*"),e.k0s()(),e.j41(108,"select",50),e.DNE(109,I,2,2,"option",45),e.k0s()(),e.j41(110,"div",48)(111,"label",40),e.EFF(112,"Tiempo (min)"),e.k0s(),e.nrm(113,"input",51),e.k0s()(),e.j41(114,"div",46)(115,"label",40),e.EFF(116,"Notas de Preparaci\xf3n"),e.k0s(),e.nrm(117,"textarea",52),e.k0s(),e.j41(118,"div",46)(119,"div",53)(120,"label",54),e.EFF(121,"Ingredientes "),e.j41(122,"span",41),e.EFF(123,"*"),e.k0s()(),e.j41(124,"button",55),e.bIt("click",function(){return r.agregarIngrediente()}),e.nrm(125,"i",56),e.EFF(126,"Agregar "),e.k0s()(),e.j41(127,"div",57),e.DNE(128,w,15,5,"div",58),e.k0s(),e.DNE(129,S,4,0,"div",59),e.k0s(),e.DNE(130,N,17,13,"div",60),e.j41(131,"div",61),e.nrm(132,"input",62),e.j41(133,"label",63),e.EFF(134," Activo "),e.k0s()()(),e.j41(135,"div",64)(136,"button",28),e.EFF(137,"Cancelar"),e.k0s(),e.j41(138,"button",65),e.EFF(139),e.k0s()()()()()()),2&o){let a,d;e.R7$(16),e.JRh(r.totalRecetas),e.R7$(7),e.JRh(r.recetasActivas),e.R7$(7),e.JRh(r.totalIngredientes),e.R7$(7),e.SpI("",r.tiempoPromedio," min"),e.R7$(4),e.Y8G("ngIf",0===r.recetas.length),e.R7$(1),e.Y8G("ngForOf",r.recetas),e.R7$(10),e.JRh(null==r.recetaSeleccionada?null:r.recetaSeleccionada.nombre),e.R7$(2),e.JRh((null==r.recetaSeleccionada?null:r.recetaSeleccionada.descripcion)||"Sin descripci\xf3n"),e.R7$(2),e.Y8G("ngIf",r.recetaSeleccionada),e.R7$(14),e.Y8G("formGroup",r.recetaForm),e.R7$(3),e.JRh(null!=(a=r.recetaForm.get("id"))&&a.value?"Editar Receta":"Nueva Receta"),e.R7$(18),e.Y8G("ngForOf",r.categorias),e.R7$(18),e.Y8G("ngForOf",r.unidadesRendimiento),e.R7$(19),e.Y8G("ngForOf",r.ingredientes.controls),e.R7$(1),e.Y8G("ngIf",0===r.ingredientes.length),e.R7$(1),e.Y8G("ngIf",r.ingredientes.length>0),e.R7$(8),e.Y8G("disabled",r.recetaForm.invalid),e.R7$(1),e.SpI(" ",null!=(d=r.recetaForm.get("id"))&&d.value?"Actualizar":"Guardar"," ")}},dependencies:[g.YU,g.Sq,g.bT,i.qT,i.xH,i.y7,i.me,i.Q0,i.Zm,i.wz,i.BC,i.cb,i.j4,i.JD,i.$R,i.v8,g.QX,g.oe],styles:[".card[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #00000026!important}.badge[_ngcontent-%COMP%]{font-weight:500}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000005}.modal-content[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden}.dark-mode[_nghost-%COMP%]   .card[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--bg-card);color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover, .dark-mode   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #ffffff1a!important}.dark-mode[_nghost-%COMP%]   .text-muted[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-muted)!important}.dark-mode[_nghost-%COMP%]   .bg-light[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .bg-light[_ngcontent-%COMP%]{background-color:var(--bg-surface)!important}.dark-mode[_nghost-%COMP%]   .table[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .table[_ngcontent-%COMP%]{color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover, .dark-mode   [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}.dark-mode[_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:var(--bg-card);color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom-color:var(--border-color)}.dark-mode[_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top-color:var(--border-color)}.dark-mode[_nghost-%COMP%]   .form-control[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .form-control[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .form-select[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]{background-color:var(--input-bg);border-color:var(--input-border);color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .dark-mode   [_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .dark-mode[_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]:focus, .dark-mode   [_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{background-color:var(--input-bg);border-color:var(--color-principal);color:var(--text-primary)}.dark-mode[_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder, .dark-mode   [_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder, .dark-mode[_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]::placeholder, .dark-mode   [_nghost-%COMP%]   .form-select[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.dark-mode[_nghost-%COMP%]   .badge.bg-light[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .badge.bg-light[_ngcontent-%COMP%]{background-color:var(--bg-surface)!important;color:var(--text-primary)!important}.dark-mode[_nghost-%COMP%]   .alert[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .alert[_ngcontent-%COMP%]{background-color:var(--bg-surface);border-color:var(--border-color);color:var(--text-primary)}.card-body[_ngcontent-%COMP%]   .row.g-2[_ngcontent-%COMP%]   .form-select-sm[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]   .row.g-2[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{font-size:.875rem}.badge.rounded-pill[_ngcontent-%COMP%]{padding:.35em .75em;font-size:.75rem;font-weight:600}.card-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.table-responsive[_ngcontent-%COMP%]{border-radius:8px}.card.mb-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease-out}input[list][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{opacity:.6}"]})}}return n})()}];let T=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(G),h.iI]})}}return n})(),D=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[T,k.PrivateModule,g.MD,i.X1,i.YN]})}}return n})()}}]);