"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[920],{2920:(L,w,n)=>{n.r(w),n.d(w,{UsuariosPageModule:()=>J});var x=n(1239),l=n(9417),p=n(177),P=n(9012),R=n(467),u=n(2418),G=n(8359),$=n(4572),C=n(9172),A=n(152),I=n(8032),d=n.n(I),e=n(7705);function D(i,c){1&i&&(e.j41(0,"div",96)(1,"p",28),e.EFF(2," No se encontraron usuarios con los filtros seleccionados. "),e.k0s()())}function V(i,c){if(1&i&&(e.j41(0,"div",113),e.nrm(1,"i",121),e.j41(2,"small",28),e.EFF(3),e.k0s()()),2&i){const s=e.XpG().$implicit;e.R7$(3),e.JRh(s.telefono)}}function T(i,c){if(1&i&&(e.j41(0,"span",122),e.EFF(1),e.k0s()),2&i){const s=c.$implicit;e.R7$(1),e.SpI(" ",s," ")}}function N(i,c){if(1&i&&(e.j41(0,"span",123),e.EFF(1),e.k0s()),2&i){const s=e.XpG().$implicit;e.R7$(1),e.SpI(" +",s.permisos.length-3," m\xe1s ")}}function Y(i,c){if(1&i){const s=e.RV6();e.j41(0,"div",97)(1,"div",98)(2,"div",99)(3,"div",100)(4,"div",101)(5,"div",102),e.nrm(6,"i",103),e.k0s(),e.j41(7,"div")(8,"h6",104),e.EFF(9),e.k0s(),e.j41(10,"p",105),e.EFF(11),e.k0s()()(),e.j41(12,"div",106)(13,"button",107),e.bIt("click",function(){const a=e.eBV(s).$implicit,t=e.XpG();return e.Njj(t.editarUsuario(a))}),e.nrm(14,"i",108),e.k0s(),e.j41(15,"button",109),e.bIt("click",function(){const a=e.eBV(s).$implicit,t=e.XpG();return e.Njj(t.eliminarUsuario(a.id))}),e.nrm(16,"i",110),e.k0s()()(),e.j41(17,"div",44)(18,"span",111),e.EFF(19),e.k0s()(),e.j41(20,"div",44),e.DNE(21,V,4,1,"div",112),e.j41(22,"div",113),e.nrm(23,"i",114),e.j41(24,"small",28),e.EFF(25),e.k0s()(),e.j41(26,"div",101),e.nrm(27,"i",115),e.j41(28,"small",28),e.EFF(29),e.k0s()()(),e.j41(30,"div")(31,"div",113),e.nrm(32,"i",116),e.j41(33,"small",117),e.EFF(34,"Permisos:"),e.k0s()(),e.j41(35,"div",118),e.DNE(36,T,2,1,"span",119),e.DNE(37,N,2,1,"span",120),e.k0s()()()()()}if(2&i){const s=c.$implicit,o=e.XpG();e.R7$(9),e.JRh(s.nombre),e.R7$(2),e.JRh(s.email),e.R7$(7),e.Y8G("ngClass",o.getRoleBadgeClass(s.rol)),e.R7$(1),e.SpI(" ",s.rol," "),e.R7$(2),e.Y8G("ngIf",s.telefono),e.R7$(4),e.JRh(s.email),e.R7$(4),e.SpI(" \xdaltimo acceso: ",o.formatearFecha(s.ultimoAcceso)," "),e.R7$(7),e.Y8G("ngForOf",s.permisos),e.R7$(1),e.Y8G("ngIf",s.permisos&&s.permisos.length>3)}}function S(i,c){if(1&i){const s=e.RV6();e.j41(0,"div",44)(1,"label",45),e.EFF(2," Contrase\xf1a "),e.j41(3,"span",46),e.EFF(4,"*"),e.k0s()(),e.j41(5,"div",19),e.nrm(6,"input",124),e.j41(7,"button",125),e.bIt("click",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.togglePasswordVisibility())}),e.nrm(8,"i",28),e.k0s()()()}if(2&i){const s=e.XpG();e.R7$(6),e.Y8G("type",s.showPassword?"text":"password"),e.R7$(2),e.HbH(s.showPassword?"bi bi-eye-slash":"bi bi-eye")}}function B(i,c){1&i&&(e.j41(0,"div",44)(1,"label",45),e.EFF(2," Confirmar Contrase\xf1a "),e.j41(3,"span",46),e.EFF(4,"*"),e.k0s()(),e.nrm(5,"input",126),e.k0s())}const M=[{path:"",component:(()=>{class i{constructor(s,o){this.firestore=s,this.fb=o,this.usuarios=[],this.filteredUsers=[],this.totalUsuarios=0,this.usuariosActivos=0,this.administradores=0,this.activosHoy=0,this.userSearch=new l.MJ(""),this.roleFilter=new l.MJ("all"),this.permisosDisponibles=["dashboard","productos","categorias","recetas","ventas","reportes","proveedores","albaranes","usuarios","inventario","ajustes"],this.showPassword=!1,this.subscriptions=new G.yU,this.usuarioForm=this.fb.group({id:[null],nombre:["",l.k0.required],email:["",[l.k0.required,l.k0.email]],telefono:[""],rol:["",l.k0.required],permisos:[[]],password:[""],confirmPassword:[""],activo:[!0]})}ngOnInit(){this.cargarUsuarios(),this.initModal(),this.setupFilters(),this.setupRoleListener()}ngOnDestroy(){this.subscriptions.unsubscribe()}initModal(){const s=document.getElementById("userModal");s&&(this.modal=new bootstrap.Modal(s))}setupFilters(){this.subscriptions.add((0,$.z)([this.userSearch.valueChanges.pipe((0,C.Z)("")),this.roleFilter.valueChanges.pipe((0,C.Z)("all"))]).pipe((0,A.B)(300)).subscribe(([s,o])=>{this.filterUsers(s||"",o||"all")}))}cargarUsuarios(){const s=(0,u.rJ)(this.firestore,"usuarios");this.subscriptions.add((0,u.xs)(s,{idField:"id"}).subscribe(o=>{this.usuarios=o,this.filteredUsers=o,this.calcularEstadisticas()}))}calcularEstadisticas(){this.totalUsuarios=this.usuarios.length,this.usuariosActivos=this.usuarios.filter(o=>o.activo).length,this.administradores=this.usuarios.filter(o=>"Administrador"===o.rol).length;const s=new Date;this.activosHoy=this.usuarios.filter(o=>!!o.ultimoAcceso&&(o.ultimoAcceso.toDate?o.ultimoAcceso.toDate():new Date(o.ultimoAcceso)).toDateString()===s.toDateString()).length}filterUsers(s,o){let r=[...this.usuarios];s&&(r=r.filter(a=>a.nombre.toLowerCase().includes(s.toLowerCase())||a.email.toLowerCase().includes(s.toLowerCase()))),o&&"all"!==o&&(r=r.filter(a=>a.rol===o)),this.filteredUsers=r}getRoleBadgeClass(s){switch(s){case"Administrador":return"bg-danger";case"Gerente":return"bg-info";case"Empleado":return"bg-success";default:return"bg-secondary"}}formatearFecha(s){return s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Nunca"}onPermisoChange(s,o){const r=this.usuarioForm.get("permisos")?.value||[];if(s.target.checked)r.includes(o)||r.push(o);else{const a=r.indexOf(o);a>-1&&r.splice(a,1)}this.usuarioForm.get("permisos")?.setValue(r)}togglePasswordVisibility(){this.showPassword=!this.showPassword}abrirModalNuevo(){this.resetForm(),this.usuarioForm.get("password")?.setValidators([l.k0.required,l.k0.minLength(6)]),this.usuarioForm.get("confirmPassword")?.setValidators([l.k0.required]),this.usuarioForm.get("password")?.updateValueAndValidity(),this.usuarioForm.get("confirmPassword")?.updateValueAndValidity(),this.modal.show()}editarUsuario(s){this.usuarioForm.patchValue(s),this.usuarioForm.get("password")?.clearValidators(),this.usuarioForm.get("confirmPassword")?.clearValidators(),this.usuarioForm.get("password")?.updateValueAndValidity(),this.usuarioForm.get("confirmPassword")?.updateValueAndValidity(),this.modal.show()}guardarUsuario(){var s=this;return(0,R.A)(function*(){if(s.usuarioForm.invalid)return void d().fire("Error","Por favor, complete todos los campos requeridos.","error");const o=s.usuarioForm.getRawValue();if(o.id||o.password===o.confirmPassword){d().showLoading();try{if(o.id){const{id:r,password:a,confirmPassword:t,...h}=o,m=(0,u.H9)(s.firestore,"usuarios",r);yield(0,u.mZ)(m,h),d().fire("\xa1Actualizado!","El usuario ha sido actualizado.","success")}else{const{id:r,confirmPassword:a,...t}=o;t.fechaCreacion=(0,u.O5)(),t.ultimoAcceso=(0,u.O5)(),yield(0,u.gS)((0,u.rJ)(s.firestore,"usuarios"),t),d().fire("\xa1Creado!","El nuevo usuario ha sido creado.","success")}s.modal.hide(),s.resetForm()}catch(r){console.error("Error al guardar el usuario:",r),d().fire("Error","Hubo un problema al guardar el usuario.","error")}}else d().fire("Error","Las contrase\xf1as no coinciden.","error")})()}eliminarUsuario(s){var o=this;return(0,R.A)(function*(){if((yield d().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{yield(0,u.kd)((0,u.H9)(o.firestore,"usuarios",s)),d().fire("\xa1Eliminado!","El usuario ha sido eliminado.","success")}catch(a){console.error("Error al eliminar el usuario:",a),d().fire("Error","No se pudo eliminar el usuario.","error")}})()}setupRoleListener(){this.subscriptions.add(this.usuarioForm.get("rol")?.valueChanges.subscribe(s=>{s&&this.setPermisosSegunRol(s)}))}setPermisosSegunRol(s){let o=[];switch(s){case"Administrador":o=[...this.permisosDisponibles];break;case"Gerente":o=["dashboard","productos","categorias","recetas","ventas","reportes","proveedores","albaranes","inventario"];break;case"Empleado":o=["dashboard","productos","ventas"];break;case"Visualizador":o=["dashboard","reportes"];break;default:o=[]}this.usuarioForm.get("permisos")?.setValue(o)}resetForm(){this.usuarioForm.reset({nombre:"",email:"",telefono:"",rol:"",permisos:[],password:"",confirmPassword:"",activo:!0}),this.showPassword=!1}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(u._7),e.rXU(l.ok))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-usuarios-page"]],decls:247,vars:26,consts:[[1,"container-fluid"],[1,"row"],[1,"col-8"],[1,"col","text-end"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-plus-lg","me-2"],[1,"row","mt-4"],[1,"col-12","col-md-3","mb-3"],[1,"card","border-0","shadow-sm"],[1,"card-body","text-center"],[1,"text-danger","fw-bold","mb-1"],[1,"text-muted","mb-0"],[1,"text-info","fw-bold","mb-1"],[1,"text-primary","fw-bold","mb-1"],[1,"text-secondary","fw-bold","mb-1"],[1,"col"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-12","col-md-4","mb-2","mb-md-0"],[1,"position-relative"],[1,"bi","bi-search","position-absolute",2,"left","12px","top","50%","transform","translateY(-50%)","color","#6c757d"],["type","text","placeholder","Buscar usuarios...",1,"form-control","ps-5",3,"formControl"],[1,"form-select",3,"formControl"],["value","all"],["value","Administrador"],["value","Gerente"],["value","Empleado"],[1,"col-12","col-md-4","text-end"],[1,"text-muted"],[1,"bi","bi-people","me-1"],["class","col-12 text-center",4,"ngIf"],["class","col-12 col-lg-4 mb-4",4,"ngFor","ngForOf"],["id","userModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg"],[3,"formGroup","ngSubmit"],[1,"modal-header","border-0","pb-0"],[1,"modal-title","fw-bold","text-dark"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","px-4","py-3"],[1,"col-md-6"],[1,"d-flex","align-items-center","mb-4"],[1,"bi","bi-person-circle","me-2","text-primary","fs-5"],[1,"mb-0","fw-bold","text-dark"],[1,"mb-3"],[1,"form-label","text-dark","fw-medium"],[1,"text-danger"],["type","text","formControlName","nombre","placeholder","Juan P\xe9rez",1,"form-control","border-1","py-2",2,"border-color","#e0e0e0","border-radius","8px"],["type","email","formControlName","email","placeholder","juan@orionsystem.com",1,"form-control","border-1","py-2",2,"border-color","#e0e0e0","border-radius","8px"],["type","tel","formControlName","telefono","placeholder","+34 91 123 4567",1,"form-control","border-1","py-2",2,"border-color","#e0e0e0","border-radius","8px"],["class","mb-3",4,"ngIf"],[1,"form-check"],["type","checkbox","formControlName","activo","id","usuarioActivo",1,"form-check-input"],["for","usuarioActivo",1,"form-check-label","text-dark","fw-medium"],[1,"bi","bi-shield-check","me-2","text-primary","fs-5"],[1,"mb-4"],[1,"form-label","text-dark","fw-medium","mb-3"],[1,"form-check","p-3","border","rounded-3",2,"border-color","#e0e0e0"],["type","radio","name","rol","value","Administrador","formControlName","rol","id","rolAdmin",1,"form-check-input"],["for","rolAdmin",1,"form-check-label","w-100"],[1,"fw-bold","text-dark"],["type","radio","name","rol","value","Gerente","formControlName","rol","id","rolGerente",1,"form-check-input"],["for","rolGerente",1,"form-check-label","w-100"],["type","radio","name","rol","value","Empleado","formControlName","rol","id","rolEmpleado",1,"form-check-input"],["for","rolEmpleado",1,"form-check-label","w-100"],["type","radio","name","rol","value","Visualizador","formControlName","rol","id","rolVisualizador",1,"form-check-input"],["for","rolVisualizador",1,"form-check-label","w-100"],[1,"col-12"],[1,"d-flex","align-items-center","mb-3"],[1,"mb-2"],["type","checkbox","value","dashboard","id","permisoDashboard",1,"form-check-input",3,"checked","change"],["for","permisoDashboard",1,"form-check-label","w-100"],["type","checkbox","value","productos","id","permisoProductos",1,"form-check-input",3,"checked","change"],["for","permisoProductos",1,"form-check-label","w-100"],["type","checkbox","value","categorias","id","permisoCategorias",1,"form-check-input",3,"checked","change"],["for","permisoCategorias",1,"form-check-label","w-100"],["type","checkbox","value","recetas","id","permisoRecetas",1,"form-check-input",3,"checked","change"],["for","permisoRecetas",1,"form-check-label","w-100"],["type","checkbox","value","ventas","id","permisoVentas",1,"form-check-input",3,"checked","change"],["for","permisoVentas",1,"form-check-label","w-100"],["type","checkbox","value","reportes","id","permisoReportes",1,"form-check-input",3,"checked","change"],["for","permisoReportes",1,"form-check-label","w-100"],["type","checkbox","value","proveedores","id","permisoProveedores",1,"form-check-input",3,"checked","change"],["for","permisoProveedores",1,"form-check-label","w-100"],["type","checkbox","value","albaranes","id","permisoAlbaranes",1,"form-check-input",3,"checked","change"],["for","permisoAlbaranes",1,"form-check-label","w-100"],["type","checkbox","value","usuarios","id","permisoUsuarios",1,"form-check-input",3,"checked","change"],["for","permisoUsuarios",1,"form-check-label","w-100"],["type","checkbox","value","inventario","id","permisoInventario",1,"form-check-input",3,"checked","change"],["for","permisoInventario",1,"form-check-label","w-100"],["type","checkbox","value","ajustes","id","permisoAjustes",1,"form-check-input",3,"checked","change"],["for","permisoAjustes",1,"form-check-label","w-100"],[1,"text-muted","mt-2","d-block"],[1,"modal-footer","border-0","pt-0","px-4","pb-4"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary","px-4","py-2",2,"border-radius","8px"],["type","submit",1,"btn","btn-danger","px-4","py-2","ms-2",2,"border-radius","8px",3,"disabled"],[1,"col-12","text-center"],[1,"col-12","col-lg-4","mb-4"],[1,"card","border-0","shadow-sm","h-100"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"d-flex","align-items-center"],[1,"rounded-circle","bg-dark","d-flex","align-items-center","justify-content-center","me-3",2,"width","48px","height","48px"],[1,"bi","bi-person-fill","text-white","fs-5"],[1,"mb-1","fw-bold"],[1,"text-muted","small","mb-0"],[1,"d-flex","gap-1"],[1,"btn","btn-outline-primary","btn-sm",2,"width","32px","height","32px","padding","0",3,"click"],[1,"bi","bi-pencil-fill",2,"font-size","0.75rem"],[1,"btn","btn-outline-danger","btn-sm",2,"width","32px","height","32px","padding","0",3,"click"],[1,"bi","bi-trash3-fill",2,"font-size","0.75rem"],[1,"badge","rounded-pill",3,"ngClass"],["class","d-flex align-items-center mb-2",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],[1,"bi","bi-envelope","text-muted","me-2"],[1,"bi","bi-clock","text-muted","me-2"],[1,"bi","bi-shield-check","text-muted","me-2"],[1,"text-muted","fw-bold"],[1,"d-flex","flex-wrap","gap-1"],["class","badge bg-light text-dark border small",4,"ngFor","ngForOf"],["class","badge bg-secondary small",4,"ngIf"],[1,"bi","bi-telephone","text-muted","me-2"],[1,"badge","bg-light","text-dark","border","small"],[1,"badge","bg-secondary","small"],["formControlName","password","placeholder","M\xednimo 6 caracteres",1,"form-control","border-1","py-2","pe-5",2,"border-color","#e0e0e0","border-radius","8px",3,"type"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-50","translate-middle-y","pe-3",2,"border","none","background","none",3,"click"],["type","password","formControlName","confirmPassword","placeholder","Repetir contrase\xf1a",1,"form-control","border-1","py-2",2,"border-color","#e0e0e0","border-radius","8px"]],template:function(o,r){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e.EFF(4,"Gesti\xf3n de Usuarios"),e.k0s(),e.j41(5,"span"),e.EFF(6,"Administra los usuarios y sus permisos del sistema"),e.k0s()(),e.j41(7,"div",3)(8,"button",4),e.bIt("click",function(){return r.abrirModalNuevo()}),e.nrm(9,"i",5),e.EFF(10," Nuevo Usuario "),e.k0s()()(),e.j41(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"h2",10),e.EFF(16),e.k0s(),e.j41(17,"p",11),e.EFF(18,"Total Usuarios"),e.k0s()()()(),e.j41(19,"div",7)(20,"div",8)(21,"div",9)(22,"h2",12),e.EFF(23),e.k0s(),e.j41(24,"p",11),e.EFF(25,"Usuarios Activos"),e.k0s()()()(),e.j41(26,"div",7)(27,"div",8)(28,"div",9)(29,"h2",13),e.EFF(30),e.k0s(),e.j41(31,"p",11),e.EFF(32,"Administradores"),e.k0s()()()(),e.j41(33,"div",7)(34,"div",8)(35,"div",9)(36,"h2",14),e.EFF(37),e.k0s(),e.j41(38,"p",11),e.EFF(39,"Activos Hoy"),e.k0s()()()()(),e.j41(40,"div",6)(41,"div",15)(42,"div",8)(43,"div",16)(44,"div",17)(45,"div",18)(46,"div",19),e.nrm(47,"i",20)(48,"input",21),e.k0s()(),e.j41(49,"div",18)(50,"select",22)(51,"option",23),e.EFF(52,"Todos los roles"),e.k0s(),e.j41(53,"option",24),e.EFF(54,"Administrador"),e.k0s(),e.j41(55,"option",25),e.EFF(56,"Gerente"),e.k0s(),e.j41(57,"option",26),e.EFF(58,"Empleado"),e.k0s()()(),e.j41(59,"div",27)(60,"span",28),e.nrm(61,"i",29),e.EFF(62),e.k0s()()()()()()(),e.j41(63,"div",6),e.DNE(64,D,3,0,"div",30),e.DNE(65,Y,38,9,"div",31),e.k0s(),e.j41(66,"div",32)(67,"div",33)(68,"div",34)(69,"form",35),e.bIt("ngSubmit",function(){return r.guardarUsuario()}),e.j41(70,"div",36)(71,"h4",37),e.EFF(72),e.k0s(),e.nrm(73,"button",38),e.k0s(),e.j41(74,"div",39)(75,"div",1)(76,"div",40)(77,"div",41),e.nrm(78,"i",42),e.j41(79,"h6",43),e.EFF(80,"Informaci\xf3n Personal"),e.k0s()(),e.j41(81,"div",44)(82,"label",45),e.EFF(83," Nombre Completo "),e.j41(84,"span",46),e.EFF(85,"*"),e.k0s()(),e.nrm(86,"input",47),e.k0s(),e.j41(87,"div",44)(88,"label",45),e.EFF(89," Email "),e.j41(90,"span",46),e.EFF(91,"*"),e.k0s()(),e.nrm(92,"input",48),e.k0s(),e.j41(93,"div",44)(94,"label",45),e.EFF(95,"Tel\xe9fono"),e.k0s(),e.nrm(96,"input",49),e.k0s(),e.DNE(97,S,9,3,"div",50),e.DNE(98,B,6,0,"div",50),e.j41(99,"div",51),e.nrm(100,"input",52),e.j41(101,"label",53),e.EFF(102," Usuario activo "),e.k0s()()(),e.j41(103,"div",40)(104,"div",41),e.nrm(105,"i",54),e.j41(106,"h6",43),e.EFF(107,"Rol y Permisos"),e.k0s()(),e.j41(108,"div",55)(109,"label",56),e.EFF(110,"Rol del Usuario"),e.k0s(),e.j41(111,"div",44)(112,"div",57),e.nrm(113,"input",58),e.j41(114,"label",59)(115,"div",60),e.EFF(116,"Administrador"),e.k0s(),e.j41(117,"small",28),e.EFF(118,"Acceso completo al sistema"),e.k0s()()()(),e.j41(119,"div",44)(120,"div",57),e.nrm(121,"input",61),e.j41(122,"label",62)(123,"div",60),e.EFF(124,"Gerente"),e.k0s(),e.j41(125,"small",28),e.EFF(126,"Gesti\xf3n de productos, ventas y reportes"),e.k0s()()()(),e.j41(127,"div",44)(128,"div",57),e.nrm(129,"input",63),e.j41(130,"label",64)(131,"div",60),e.EFF(132,"Empleado"),e.k0s(),e.j41(133,"small",28),e.EFF(134,"Operaciones b\xe1sicas de venta"),e.k0s()()()(),e.j41(135,"div",44)(136,"div",57),e.nrm(137,"input",65),e.j41(138,"label",66)(139,"div",60),e.EFF(140,"Visualizador"),e.k0s(),e.j41(141,"small",28),e.EFF(142,"Solo lectura de reportes"),e.k0s()()()()()()(),e.j41(143,"div",6)(144,"div",67)(145,"div",68),e.nrm(146,"i",54),e.j41(147,"h6",43),e.EFF(148,"Permisos Espec\xedficos"),e.k0s()(),e.j41(149,"div",1)(150,"div",40)(151,"div",69)(152,"div",51)(153,"input",70),e.bIt("change",function(t){return r.onPermisoChange(t,"dashboard")}),e.k0s(),e.j41(154,"label",71)(155,"div",60),e.EFF(156,"Dashboard"),e.k0s(),e.j41(157,"small",28),e.EFF(158,"Ver m\xe9tricas principales"),e.k0s()()()(),e.j41(159,"div",69)(160,"div",51)(161,"input",72),e.bIt("change",function(t){return r.onPermisoChange(t,"productos")}),e.k0s(),e.j41(162,"label",73)(163,"div",60),e.EFF(164,"Productos"),e.k0s(),e.j41(165,"small",28),e.EFF(166,"Gestionar inventario"),e.k0s()()()(),e.j41(167,"div",69)(168,"div",51)(169,"input",74),e.bIt("change",function(t){return r.onPermisoChange(t,"categorias")}),e.k0s(),e.j41(170,"label",75)(171,"div",60),e.EFF(172,"Categor\xedas"),e.k0s(),e.j41(173,"small",28),e.EFF(174,"Gestionar categor\xedas"),e.k0s()()()(),e.j41(175,"div",69)(176,"div",51)(177,"input",76),e.bIt("change",function(t){return r.onPermisoChange(t,"recetas")}),e.k0s(),e.j41(178,"label",77)(179,"div",60),e.EFF(180,"Recetas"),e.k0s(),e.j41(181,"small",28),e.EFF(182,"Crear y editar recetas"),e.k0s()()()(),e.j41(183,"div",69)(184,"div",51)(185,"input",78),e.bIt("change",function(t){return r.onPermisoChange(t,"ventas")}),e.k0s(),e.j41(186,"label",79)(187,"div",60),e.EFF(188,"Ventas"),e.k0s(),e.j41(189,"small",28),e.EFF(190,"Procesar ventas"),e.k0s()()()(),e.j41(191,"div",69)(192,"div",51)(193,"input",80),e.bIt("change",function(t){return r.onPermisoChange(t,"reportes")}),e.k0s(),e.j41(194,"label",81)(195,"div",60),e.EFF(196,"Reportes"),e.k0s(),e.j41(197,"small",28),e.EFF(198,"Ver reportes y estad\xedsticas"),e.k0s()()()()(),e.j41(199,"div",40)(200,"div",69)(201,"div",51)(202,"input",82),e.bIt("change",function(t){return r.onPermisoChange(t,"proveedores")}),e.k0s(),e.j41(203,"label",83)(204,"div",60),e.EFF(205,"Proveedores"),e.k0s(),e.j41(206,"small",28),e.EFF(207,"Gestionar proveedores"),e.k0s()()()(),e.j41(208,"div",69)(209,"div",51)(210,"input",84),e.bIt("change",function(t){return r.onPermisoChange(t,"albaranes")}),e.k0s(),e.j41(211,"label",85)(212,"div",60),e.EFF(213,"Albaranes"),e.k0s(),e.j41(214,"small",28),e.EFF(215,"Gestionar albaranes"),e.k0s()()()(),e.j41(216,"div",69)(217,"div",51)(218,"input",86),e.bIt("change",function(t){return r.onPermisoChange(t,"usuarios")}),e.k0s(),e.j41(219,"label",87)(220,"div",60),e.EFF(221,"Usuarios"),e.k0s(),e.j41(222,"small",28),e.EFF(223,"Gestionar usuarios del sistema"),e.k0s()()()(),e.j41(224,"div",69)(225,"div",51)(226,"input",88),e.bIt("change",function(t){return r.onPermisoChange(t,"inventario")}),e.k0s(),e.j41(227,"label",89)(228,"div",60),e.EFF(229,"Inventario"),e.k0s(),e.j41(230,"small",28),e.EFF(231,"Control de inventario"),e.k0s()()()(),e.j41(232,"div",69)(233,"div",51)(234,"input",90),e.bIt("change",function(t){return r.onPermisoChange(t,"ajustes")}),e.k0s(),e.j41(235,"label",91)(236,"div",60),e.EFF(237,"Ajustes"),e.k0s(),e.j41(238,"small",28),e.EFF(239,"Configurar sistema"),e.k0s()()()()()(),e.j41(240,"small",92),e.EFF(241," Los permisos se asignan autom\xe1ticamente seg\xfan el rol, pero puedes personalizarlos aqu\xed. "),e.k0s()()()(),e.j41(242,"div",93)(243,"button",94),e.EFF(244," Cancelar "),e.k0s(),e.j41(245,"button",95),e.EFF(246),e.k0s()()()()()()()),2&o){let a,t,h,m,b,f,v,g,F,k,j,E,_,y,U;e.R7$(16),e.JRh(r.totalUsuarios),e.R7$(7),e.JRh(r.usuariosActivos),e.R7$(7),e.JRh(r.administradores),e.R7$(7),e.JRh(r.activosHoy),e.R7$(11),e.Y8G("formControl",r.userSearch),e.R7$(2),e.Y8G("formControl",r.roleFilter),e.R7$(12),e.SpI("",r.filteredUsers.length," usuarios "),e.R7$(2),e.Y8G("ngIf",0===r.filteredUsers.length),e.R7$(1),e.Y8G("ngForOf",r.filteredUsers),e.R7$(4),e.Y8G("formGroup",r.usuarioForm),e.R7$(3),e.SpI(" ",null!=(a=r.usuarioForm.get("id"))&&a.value?"Editar Usuario":"Nuevo Usuario"," "),e.R7$(25),e.Y8G("ngIf",!(null!=(t=r.usuarioForm.get("id"))&&t.value)),e.R7$(1),e.Y8G("ngIf",!(null!=(h=r.usuarioForm.get("id"))&&h.value)),e.R7$(55),e.Y8G("checked",null==(m=r.usuarioForm.get("permisos"))||null==m.value?null:m.value.includes("dashboard")),e.R7$(8),e.Y8G("checked",null==(b=r.usuarioForm.get("permisos"))||null==b.value?null:b.value.includes("productos")),e.R7$(8),e.Y8G("checked",null==(f=r.usuarioForm.get("permisos"))||null==f.value?null:f.value.includes("categorias")),e.R7$(8),e.Y8G("checked",null==(v=r.usuarioForm.get("permisos"))||null==v.value?null:v.value.includes("recetas")),e.R7$(8),e.Y8G("checked",null==(g=r.usuarioForm.get("permisos"))||null==g.value?null:g.value.includes("ventas")),e.R7$(8),e.Y8G("checked",null==(F=r.usuarioForm.get("permisos"))||null==F.value?null:F.value.includes("reportes")),e.R7$(9),e.Y8G("checked",null==(k=r.usuarioForm.get("permisos"))||null==k.value?null:k.value.includes("proveedores")),e.R7$(8),e.Y8G("checked",null==(j=r.usuarioForm.get("permisos"))||null==j.value?null:j.value.includes("albaranes")),e.R7$(8),e.Y8G("checked",null==(E=r.usuarioForm.get("permisos"))||null==E.value?null:E.value.includes("usuarios")),e.R7$(8),e.Y8G("checked",null==(_=r.usuarioForm.get("permisos"))||null==_.value?null:_.value.includes("inventario")),e.R7$(8),e.Y8G("checked",null==(y=r.usuarioForm.get("permisos"))||null==y.value?null:y.value.includes("ajustes")),e.R7$(11),e.Y8G("disabled",r.usuarioForm.invalid),e.R7$(1),e.SpI(" ",null!=(U=r.usuarioForm.get("id"))&&U.value?"Actualizar Usuario":"Crear Usuario"," ")}},dependencies:[p.YU,p.Sq,p.bT,l.qT,l.xH,l.y7,l.me,l.Zm,l.wz,l.Fm,l.BC,l.cb,l.l_,l.j4,l.JD]})}}return i})()}];let z=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[P.iI.forChild(M),P.iI]})}}return i})(),J=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[z,x.PrivateModule,p.MD,l.X1,l.YN]})}}return i})()}}]);