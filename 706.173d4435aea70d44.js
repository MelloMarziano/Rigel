"use strict";(self.webpackChunkrigel=self.webpackChunkrigel||[]).push([[706],{3706:(F,u,c)=>{c.r(u),c.d(u,{LoginPageModule:()=>y});var i=c(9417),p=c(177),f=c(8498),m=c(467),o=c(7705),C=c(4441),d=c(2418);let h=(()=>{class n{constructor(r){this.firestore=r}createDefaultUsers(){var r=this;return(0,m.A)(function*(){const e=(0,d.rJ)(r.firestore,"usuarios"),t=["root@orionsystem.com","admin@orionsystem.com","gerente@orionsystem.com","empleado@orionsystem.com","visualizador@orionsystem.com"];let l=0;for(const a of t){const s=(0,d.P)(e,(0,d._M)("email","==",a));(yield(0,d.GG)(s)).empty||l++}if(l===t.length)return void console.log("Todos los usuarios de prueba ya existen");const g=[{nombre:"Alberto Ortega ROOT",email:"root@orionsystem.com",telefono:"+34 673 90 59 91",rol:"ROOT",permisos:["dashboard","productos","categorias","recetas","ventas","reportes","proveedores","albaranes","usuarios","inventario","ajustes","app_shutdown"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date},{nombre:"Carlos Administrador",email:"admin@orionsystem.com",telefono:"+34 91 123 4567",rol:"Administrador",permisos:["dashboard","productos","categorias","recetas","ventas","reportes","proveedores","albaranes","usuarios","inventario","ajustes"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date},{nombre:"Mar\xeda Gerente",email:"gerente@orionsystem.com",telefono:"+34 91 234 5678",rol:"Gerente",permisos:["dashboard","productos","categorias","recetas","ventas","reportes","proveedores","albaranes","inventario"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date},{nombre:"Juan Empleado",email:"empleado@orionsystem.com",telefono:"+34 91 345 6789",rol:"Empleado",permisos:["dashboard","productos","ventas"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date},{nombre:"Ana Visualizador",email:"visualizador@orionsystem.com",telefono:"+34 91 456 7890",rol:"Visualizador",permisos:["dashboard","reportes"],password:"123456",activo:!0,fechaCreacion:new Date,ultimoAcceso:new Date}];try{let a=0;for(const s of g){const P=(0,d.P)(e,(0,d._M)("email","==",s.email));(yield(0,d.GG)(P)).empty?(yield(0,d.gS)(e,s),console.log(`Usuario creado: ${s.nombre}`),a++):console.log(`Usuario ya existe: ${s.nombre}`)}a>0?console.log(`${a} usuarios de prueba creados exitosamente`):console.log("Todos los usuarios de prueba ya exist\xedan")}catch(a){throw console.error("Error creando usuarios por defecto:",a),a}})()}static{this.\u0275fac=function(e){return new(e||n)(o.KVO(d._7))}}static{this.\u0275prov=o.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function v(n,b){1&n&&(o.j41(0,"div",19),o.EFF(1," Por favor ingresa un email v\xe1lido "),o.k0s())}function M(n,b){1&n&&(o.j41(0,"div",19),o.EFF(1," La contrase\xf1a es requerida "),o.k0s())}function O(n,b){1&n&&o.nrm(0,"span",20)}const _=[{path:"",component:(()=>{class n{constructor(r,e,t){this.authService=r,this.fb=e,this.seedService=t,this.showPassword=!1,this.isLoading=!1,this.isCreatingUsers=!1}ngOnInit(){this.buildForm()}buildForm(){this.loginForm=this.fb.group({email:["",[i.k0.required,i.k0.email]],password:["",i.k0.required]})}togglePassword(){this.showPassword=!this.showPassword}onSubmit(){var r=this;return(0,m.A)(function*(){if(r.loginForm.valid){r.isLoading=!0;try{const{email:e,password:t}=r.loginForm.value;(yield r.authService.login(e,t))||alert("Email o contrase\xf1a incorrectos, o usuario inactivo.")}catch(e){console.error("Error en login:",e),alert("Error al iniciar sesi\xf3n. Intenta nuevamente.")}finally{r.isLoading=!1}}else Object.keys(r.loginForm.controls).forEach(e=>{r.loginForm.get(e)?.markAsTouched()})})()}createTestUsers(){var r=this;return(0,m.A)(function*(){r.isCreatingUsers=!0;try{yield r.seedService.createDefaultUsers(),alert("Usuarios de prueba creados exitosamente. Ahora puedes iniciar sesi\xf3n con cualquiera de ellos.")}catch(e){console.error("Error creando usuarios:",e),alert("Error al crear usuarios de prueba. Revisa la consola para m\xe1s detalles.")}finally{r.isCreatingUsers=!1}})()}static{this.\u0275fac=function(e){return new(e||n)(o.rXU(C.u),o.rXU(i.ok),o.rXU(h))}}static{this.\u0275cmp=o.VBU({type:n,selectors:[["app-login-page"]],decls:28,vars:13,consts:[[1,"login-container"],[1,"login-card"],[1,"text-center","mb-4"],[1,"logo-container"],["src","assets/logo-rigel2.png","alt","Rigel Logo",2,"height","100px"],[1,"welcome-title"],[1,"welcome-subtitle"],[3,"formGroup","ngSubmit"],[1,"row","mb-4"],[1,"col"],[1,"form-label"],["type","email","formControlName","email","placeholder","tu@email.com",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mb-4"],[1,"input-group"],["formControlName","password","placeholder","Tu contrase\xf1a",1,"form-control",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-danger","w-100","login-btn",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,t){if(1&e&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o.nrm(4,"img",4),o.k0s()(),o.j41(5,"div",2)(6,"h2",5),o.EFF(7,"\xa1Bienvenido de vuelta!"),o.k0s(),o.j41(8,"p",6),o.EFF(9," Ingresa tus credenciales para acceder a tu cuenta "),o.k0s()(),o.j41(10,"form",7),o.bIt("ngSubmit",function(){return t.onSubmit()}),o.j41(11,"div",8)(12,"div",9)(13,"label",10),o.EFF(14,"Correo Electr\xf3nico"),o.k0s(),o.nrm(15,"input",11),o.k0s(),o.DNE(16,v,2,0,"div",12),o.k0s(),o.j41(17,"div",13)(18,"label",10),o.EFF(19,"Contrase\xf1a"),o.k0s(),o.j41(20,"div",14),o.nrm(21,"input",15),o.j41(22,"button",16),o.bIt("click",function(){return t.togglePassword()}),o.nrm(23,"i"),o.k0s()(),o.DNE(24,M,2,0,"div",12),o.k0s(),o.j41(25,"button",17),o.DNE(26,O,1,0,"span",18),o.EFF(27),o.k0s()()()()),2&e){let l,g,a,s;o.R7$(10),o.Y8G("formGroup",t.loginForm),o.R7$(5),o.AVh("is-invalid",(null==(l=t.loginForm.get("email"))?null:l.invalid)&&(null==(l=t.loginForm.get("email"))?null:l.touched)),o.R7$(1),o.Y8G("ngIf",(null==(g=t.loginForm.get("email"))?null:g.invalid)&&(null==(g=t.loginForm.get("email"))?null:g.touched)),o.R7$(5),o.AVh("is-invalid",(null==(a=t.loginForm.get("password"))?null:a.invalid)&&(null==(a=t.loginForm.get("password"))?null:a.touched)),o.Y8G("type",t.showPassword?"text":"password"),o.R7$(2),o.HbH(t.showPassword?"bi bi-eye-slash":"bi bi-eye"),o.R7$(1),o.Y8G("ngIf",(null==(s=t.loginForm.get("password"))?null:s.invalid)&&(null==(s=t.loginForm.get("password"))?null:s.touched)),o.R7$(1),o.Y8G("disabled",t.loginForm.invalid||t.isLoading),o.R7$(1),o.Y8G("ngIf",t.isLoading),o.R7$(1),o.SpI(" ",t.isLoading?"Ingresando...":"Ingresar"," ")}},dependencies:[p.bT,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],styles:['.login-container[_ngcontent-%COMP%]{background:var(--color-sidebar-gradient, linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%));font-family:var(--font-sans);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:radial-gradient(circle at 25% 25%,rgba(var(--color-principal-rgb, 220, 53, 69),.1) 0%,transparent 50%),radial-gradient(circle at 75% 75%,rgba(var(--color-principal-rgb, 220, 53, 69),.05) 0%,transparent 50%);pointer-events:none}.login-card[_ngcontent-%COMP%]{background:var(--bg-card, white);width:100%;max-width:480px;border-radius:20px;box-shadow:0 20px 40px #0000001a;padding:3rem 2.5rem;position:relative;border:1px solid var(--border-color, rgba(0, 0, 0, .05))}@media (max-width: 576px){.login-card[_ngcontent-%COMP%]{padding:2rem 1.5rem;margin:1rem}}.logo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.logo-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:var(--color-principal, linear-gradient(135deg, #dc3545 0%, #c82333 100%));border-radius:20px;display:flex;align-items:center;justify-content:center;margin-bottom:1rem;box-shadow:0 10px 30px #dc35454d}.logo-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--color-texto-sidebar, white)}.brand[_ngcontent-%COMP%]{text-align:center}.brand[_ngcontent-%COMP%]   .brand-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:var(--text-primary, #212529);margin:0;letter-spacing:-.5px}.brand[_ngcontent-%COMP%]   .brand-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary, #6c757d);margin:0;font-weight:500}.welcome-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--text-primary, #212529);margin-bottom:.5rem}.welcome-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary, #6c757d);font-size:1rem;margin-bottom:0}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary, #495057);margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background:var(--bg-surface, #f8f9fa);border:2px solid var(--border-color, #e9ecef);border-right:none;color:var(--text-secondary, #6c757d)}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:var(--input-bg, #ffffff);border:2px solid var(--input-border, #e9ecef);border-left:none;padding:.75rem 1rem;font-size:1rem;color:var(--text-primary, #212529);transition:all .3s ease}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--color-principal, #dc3545);box-shadow:0 0 0 .2rem rgba(var(--color-principal-rgb, 220, 53, 69),.25)}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--color-principal, #dc3545)}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-muted, #6c757d)}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:2px solid var(--input-border, #e9ecef);border-left:none}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{border-color:var(--color-principal, #dc3545);box-shadow:0 0 0 .2rem rgba(var(--color-principal-rgb, 220, 53, 69),.25)}.form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.25rem;color:var(--color-principal, #dc3545)}.login-btn[_ngcontent-%COMP%]{padding:.875rem 1.5rem;font-size:1.1rem;font-weight:600;border-radius:12px;background:var(--color-principal, linear-gradient(135deg, #dc3545 0%, #c82333 100%));border:none;color:var(--color-texto-sidebar, white);box-shadow:0 8px 20px rgba(var(--color-principal-rgb, 220, 53, 69),.3);transition:all .3s ease}.login-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-principal-hover, #c82333);transform:translateY(-2px);box-shadow:0 12px 25px rgba(var(--color-principal-rgb, 220, 53, 69),.4)}.login-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.login-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.divider[_ngcontent-%COMP%]{position:relative;text-align:center}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:var(--border-color, #e9ecef)}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--bg-card, white);padding:0 1rem;color:var(--text-secondary, #6c757d);font-weight:500}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{border:none}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:1px solid var(--border-color, #e9ecef);border-radius:12px;overflow:hidden}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{background:var(--bg-surface, #f8f9fa);border:none;font-weight:600;color:var(--text-primary, #495057);padding:1rem 1.25rem}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){background:var(--color-principal, #dc3545);color:var(--color-texto-sidebar, white);box-shadow:none}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none}.test-users-info[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1.25rem;background:var(--bg-surface, #f8f9fa)}.table[_ngcontent-%COMP%]{background:var(--bg-card, white);border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-surface, #f8f9fa);border:none;font-weight:600;color:var(--text-primary, #495057);padding:.75rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:.75rem;color:var(--text-primary, #212529);border-bottom:1px solid var(--border-color, #e9ecef)}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:none}.table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}.test-user-card[_ngcontent-%COMP%]{background:var(--bg-card, white);border:1px solid var(--border-color, #e9ecef);border-radius:12px;padding:1rem;margin-bottom:.75rem;transition:all .3s ease;cursor:pointer}.test-user-card[_ngcontent-%COMP%]:hover{border-color:var(--color-principal, #dc3545);box-shadow:0 4px 12px rgba(var(--color-principal-rgb, 220, 53, 69),.15);transform:translateY(-2px)}.test-user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.test-user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;color:var(--text-primary, #212529);font-weight:600}.test-user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-secondary, #6c757d)}.test-user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem;border-radius:6px}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{padding:1rem;min-height:100vh}.login-card[_ngcontent-%COMP%]{margin:0;border-radius:0;min-height:100vh;display:flex;flex-direction:column;justify-content:center}.brand-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.brand-section[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{width:60px;height:60px;margin-bottom:1rem}.brand-section[_ngcontent-%COMP%]   .brand-title[_ngcontent-%COMP%]{font-size:1.5rem}.brand-section[_ngcontent-%COMP%]   .brand-subtitle[_ngcontent-%COMP%]{font-size:.9rem}.welcome-section[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:1.75rem}.welcome-section[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 576px){.welcome-title[_ngcontent-%COMP%]{font-size:1.5rem}.brand-title[_ngcontent-%COMP%]{font-size:1.75rem}.logo-icon[_ngcontent-%COMP%]{width:70px;height:70px}.logo-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}}']})}}return n})()}];let w=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=o.$C({type:n})}static{this.\u0275inj=o.G2t({imports:[f.iI.forChild(_),f.iI]})}}return n})();var x=c(2336);let y=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=o.$C({type:n})}static{this.\u0275inj=o.G2t({imports:[w,x.PublicModule,p.MD,i.X1,i.YN]})}}return n})()}}]);